<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO Meta Tags -->
    <title>살리는빛부천침례교회 | 하나님을 갈망하는 공동체</title>
    <meta name="description" content="살리는빛부천침례교회는 하나님을 갈망하는 사람들의 공동체입니다. 성경적 가치, 사랑의 공동체, 섬김과 전도의 사명을 핵심 가치로 삼는 부천 지역 침례교회입니다.">
    <meta name="keywords" content="부천교회, 침례교회, 부천침례교회, 살리는빛부천침례교회, 부천 기독교, 부천 교회, 한국침례회, 기독교한국침례회, 부천 예배, 부천 목사, 이영호 목사">
    <meta name="author" content="살리는빛부천침례교회">
    <meta name="robots" content="index, follow">
    <meta name="language" content="Korean">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.xn--9d0bk1sg8dc8rz8bl7s.kr/">
    <meta property="og:title" content="부천침례교회">
    <meta property="og:description" content="살리는 빛 부천교회">
    <meta property="og:image" content="https://fkqxalcwhqohrkdzwhvv.supabase.co/storage/v1/object/public/media/001.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:type" content="image/jpeg">
    <meta property="og:site_name" content="부천침례교회">
    <meta property="og:locale" content="ko_KR">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://www.xn--9d0bk1sg8dc8rz8bl7s.kr/">
    <meta property="twitter:title" content="부천침례교회">
    <meta property="twitter:description" content="살리는 빛 부천교회">
    <meta property="twitter:image" content="https://fkqxalcwhqohrkdzwhvv.supabase.co/storage/v1/object/public/media/001.jpg">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://www.xn--9d0bk1sg8dc8rz8bl7s.kr/">
    
    <!-- Naver Search Advisor Verification -->
    <meta name="naver-site-verification" content="naver73ec88dbc657225933a5949237fc62be" />
    
    <!-- Google Search Console Verification -->
    <meta name="google-site-verification" content="google7e27154133f5a148" />
    <!-- Preconnect to external domains -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="dns-prefetch" href="https://cdn.tailwindcss.com">
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
    <link rel="dns-prefetch" href="https://fkqxalcwhqohrkdzwhvv.supabase.co">
    
    <!-- Fonts with display=swap (already optimized) -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@200;300;400;500;600;700;800;900&family=Noto+Sans+KR:wght@200;300;400;500;600;700;800;900&family=Noto+Serif+KR:wght@400;700&family=Homenaje:wght@400&family=Playfair+Display:wght@400;500;600;700&family=Space+Mono&family=Nanum+Pen+Script&display=swap" rel="stylesheet">
    
    <!-- JavaScript - Tailwind must load immediately, Supabase can defer -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2" defer></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Noto Sans KR', 'Inter', sans-serif;
            overflow-x: hidden;
            scroll-behavior: auto;
        }
        
        html {
            scroll-behavior: auto;
        }
        
        /* 모바일 최적화 */
        @media (max-width: 768px) {
            .main-header {
                padding: 6px 16px !important;
            }
            
            .header-logo, .header-logo-right {
                height: 36px !important;
                width: 36px !important;
                border-radius: 50% !important;
            }
            
            /* 모바일에서도 한국침례회 표시 */
            .denomination {
                display: block !important;
            }
            
            /* 기독교한국침례회 글씨 크기 키우기 */
            .denomination-top, .denomination-bottom {
                font-size: 9px !important;
            }
            
            /* 살리는 빛과 부천교회 글씨 크기 똑같이, 옆에 나란히 */
            .church-name {
                font-size: 14px !important;
                display: flex !important;
                align-items: center !important;
                gap: 6px !important;
            }
            
            .church-name span:first-child {
                font-size: 14px !important;
            }
            
            .church-name span:last-child {
                font-size: 14px !important;
                margin-left: 0 !important;
            }
            
            nav {
                display: none !important;
            }
            
            /* 스크롤바 완전 제거 및 유격 맞추기 */
            html, body {
                overflow-x: hidden !important;
                width: 100% !important;
                max-width: 100vw !important;
                margin: 0 !important;
                padding: 0 !important;
                position: relative !important;
                box-sizing: border-box !important;
            }
            
            * {
                box-sizing: border-box !important;
            }
            
            ::-webkit-scrollbar {
                display: none !important;
                width: 0 !important;
                height: 0 !important;
            }
            
            * {
                -ms-overflow-style: none !important;
                scrollbar-width: none !important;
            }
            
            .main-header {
                width: 100% !important;
                max-width: 100vw !important;
                left: 0 !important;
                right: 0 !important;
                margin: 0 !important;
            }
            
            /* 히어로 섹션 모바일 - 데스크톱 비율 유지 */
            #heroSection {
                height: 60vh !important;
                min-height: 300px !important;
                max-height: 500px !important;
                aspect-ratio: auto !important;
                margin-top: 50px !important;
                width: 100% !important;
                max-width: 100vw !important;
                margin-left: 0 !important;
                margin-right: 0 !important;
                padding-left: 0 !important;
                padding-right: 0 !important;
            }
            
            #heroSection img,
            #heroSection .hero-slide {
                object-fit: cover !important;
                object-position: center !important;
            }
            
            /* 히어로 텍스트 모바일 최적화 */
            #heroSection .hero-text {
                display: block !important;
            }
            
            #heroSection .hero-text h1 {
                font-size: 28px !important;
                text-shadow: 1px 1px 4px rgba(0,0,0,0.7) !important;
            }
            
            /* 히어로 하단 영역 숨기기 (모바일) */
            #heroSection .hero-text[style*="bottom: 0"] {
                display: none !important;
            }
            
            /* 가로 스크롤 섹션 모바일 - 가로 스크롤 유지 */
            .service-card > div {
                width: 100% !important;
            }
            
            .service-number {
                font-size: 60px !important;
                letter-spacing: 4px !important;
            }
            
            .service-card h2 {
                font-size: 1.75rem !important;
                margin-top: 15px !important;
                margin-bottom: 15px !important;
            }
            
            .service-card p {
                font-size: 15px !important;
                line-height: 1.6 !important;
            }
            
            .service-card img {
                max-width: 100% !important;
                margin-top: 20px !important;
                max-width: 400px !important;
            }
            
            /* 대형 문구 섹션 모바일 */
            #introStatement {
                font-size: 24px !important;
                padding: 20px !important;
            }
            
            /* 교회 소개 섹션 모바일 */
            #about {
                padding: 0 !important;
                margin-bottom: 0 !important;
                min-height: auto !important;
            }
            
            #about h2 {
                font-size: 2rem !important;
                margin-bottom: 12px !important;
            }
            
            #about p {
                font-size: 16px !important;
                line-height: 1.3 !important;
                margin-bottom: 6px !important;
            }
            
            #about .w-full.max-w-3xl {
                padding: 0 !important;
            }
            
            #about .w-full.max-w-3xl > p:first-of-type {
                margin-bottom: 8px !important;
            }
            
            #about .w-full.max-w-3xl p[style*="line-height: 1.8"] {
                line-height: 1.4 !important;
            }
            
            #about .w-full.max-w-3xl p[style*="line-height: 1.9"] {
                line-height: 1.3 !important;
            }
            
            #about .w-full.max-w-3xl p[class*="mb-10"],
            #about .w-full.max-w-3xl p[class*="mb-12"],
            #about .w-full.max-w-3xl p[class*="mb-14"],
            #about .w-full.max-w-3xl p[class*="mb-16"] {
                margin-bottom: 12px !important;
            }
            
            /* 목사님 섹션 모바일 */
            .grid {
                grid-template-columns: 1fr !important;
            }
            
            /* 목사님 섹션 (Canva 디자인) 모바일 반응형 - position absolute 해제 */
            .pastor-section-canva {
                aspect-ratio: auto !important;
                min-height: auto !important;
                padding: 20px 15px !important;
            }
            
            .pastor-section-canva > div {
                position: static !important;
                left: auto !important;
                right: auto !important;
                top: auto !important;
                bottom: auto !important;
                transform: none !important;
            }
            
            /* 배경 이미지/오버레이는 그대로 */
            .pastor-section-canva > div:nth-child(1),
            .pastor-section-canva > div:nth-child(2),
            .pastor-section-canva > div:nth-child(4) {
                position: absolute !important;
            }
            
            /* 제목 */
            .pastor-section-canva > div:nth-child(3) { 
                width: 100% !important;
                margin-bottom: 20px !important;
            }
            
            /* 커리어 텍스트 (왼쪽) */
            .pastor-section-canva > div:nth-child(6) { 
                width: calc(100% - 180px) !important;
                max-width: calc(100% - 180px) !important;
                text-align: left !important;
                margin: 0 20px 0 0 !important;
                float: left !important;
            }
            
            /* 목사님 사진 (오른쪽) */
            .pastor-section-canva > div:nth-child(5) { 
                width: 140px !important;
                padding: 0 !important;
                background: none !important;
                box-shadow: none !important;
                margin: 0 !important;
                float: right !important;
            }
            
            /* 환영 인사 (왼쪽 정렬, float clear) */
            .pastor-section-canva > div:nth-child(7) { 
                position: static !important;
                width: 100% !important;
                left: auto !important;
                top: auto !important;
                bottom: auto !important;
                margin-top: 50px !important;
                text-align: left !important;
                clear: both !important;
            }
            
            /* 목사님 이름 (오른쪽 정렬) */
            .pastor-section-canva > div:nth-child(8) { 
                position: static !important; 
                width: 100% !important; 
                margin-top: 50px !important;
                text-align: right !important;
            }
            
            /* 섹션 하단 여백 */
            .pastor-section-canva {
                padding-bottom: 60px !important;
            }
            
            .pastor-section-canva .pastor-greeting-text {
                width: 100% !important;
                line-height: 1.4 !important;
                text-align: left !important;
            }
            
            .pastor-section-canva .pastor-greeting-text p {
                margin-bottom: 4px !important;
            }
            
            .pastor-section-canva .pastor-greeting-text p:nth-child(4),
            .pastor-section-canva .pastor-greeting-text p:nth-child(5),
            .pastor-section-canva .pastor-greeting-text p:nth-child(6) {
                display: none !important;
            }
            
            .pastor-section-canva .pastor-career-text {
                width: auto !important;
                text-align: left !important;
                line-height: 1.6 !important;
                font-size: clamp(11px, 0.9vw, 14px) !important;
            }
            
            .pastor-section-canva .pastor-career-text p {
                margin-bottom: 4px !important;
                white-space: nowrap !important;
            }
            
            /* 목사님 사진 테두리/배경 제거 */
            .pastor-section-canva .pastor-photo-container {
                background: none !important;
                padding: 0 !important;
                box-shadow: none !important;
                border-radius: 0 !important;
            }
            
            .pastor-section-canva .pastor-photo-container img {
                border-radius: 12px !important;
                box-shadow: none !important;
                opacity: 1 !important;
                filter: brightness(1.2) contrast(1.3) saturate(1.1) !important;
            }
            
            /* 목사님 사진 크기 조정 */
            .pastor-section-canva img {
                max-width: 140px !important;
                width: 140px !important;
                margin: 0 !important;
                opacity: 1 !important;
                filter: brightness(1.2) contrast(1.3) saturate(1.1) !important;
            }
            
            .pastor-section-canva h2 {
                font-size: 28px !important;
                margin-bottom: 4px !important;
            }
            
            .pastor-section-canva h2 + p {
                font-size: 18px !important;
                margin-bottom: 12px !important;
            }
            
            /* 유튜브 섹션 모바일 */
            #sermon {
                padding: 20px 15px !important;
            }
            
            #sermon h2 {
                font-size: 2rem !important;
                margin-bottom: 16px !important;
            }
            
            #sermon iframe {
                height: 200px !important;
            }
            
            
            /* 인용문 섹션 모바일 */
            section.py-32[style*="padding-left: 120px"] {
                padding-left: 20px !important;
                padding-right: 20px !important;
            }
            
            /* 갤러리 섹션 모바일 - 데스크톱과 유사하게 최적화 */
            #gallery {
                padding: 15px 10px !important;
                min-height: auto !important;
            }
            
            #gallery h2 {
                font-size: 20px !important;
                margin-bottom: 4px !important;
            }
            
            #gallery .text-gray-700 {
                font-size: 11px !important;
                margin-bottom: 8px !important;
            }
            
            .gallery-category-btn {
                font-size: 10px !important;
                padding: 4px 8px !important;
                margin: 2px !important;
            }
            
            .gallery-container {
                min-height: auto !important;
                position: relative !important;
            }
            
            .polaroid-grid {
                grid-template-columns: repeat(2, 1fr) !important;
                gap: 8px !important;
                padding: 8px 0 !important;
                min-height: auto !important;
            }
            
            .polaroid {
                transform: rotate(0deg) scale(1) !important;
                padding: 6px 6px 12px 6px !important;
                margin: 0 !important;
            }
            
            .polaroid img {
                width: 100% !important;
                height: auto !important;
                aspect-ratio: 4/3 !important;
                object-fit: cover !important;
            }
            
            .polaroid-caption {
                font-size: 10px !important;
                margin-top: 4px !important;
                line-height: 1.2 !important;
            }
            
            .polaroid-filename {
                font-size: 12px !important;
                margin-top: 2px !important;
            }
            
            .gallery-nav-btn {
                display: none !important;
            }
            
            #gallery-prev, #gallery-next {
                display: none !important;
            }
            
            .gallery-pagination {
                margin-top: 10px !important;
            }
            
            .gallery-pagination button {
                font-size: 12px !important;
                padding: 4px 10px !important;
            }
            
            /* 라이트박스 모바일 전체화면 최적화 */
            #lightbox {
                padding: 0 !important;
            }
            
            #lightbox-image {
                max-width: 100vw !important;
                max-height: 100vh !important;
                width: 100vw !important;
                height: auto !important;
                object-fit: contain !important;
                border-radius: 0 !important;
            }
            
            #lightbox-close {
                top: 10px !important;
                right: 10px !important;
                font-size: 32px !important;
                z-index: 10002 !important;
            }
            
            .lightbox-nav-btn {
                width: 44px !important;
                height: 44px !important;
                font-size: 20px !important;
            }
            
            #lightbox-prev {
                left: 5px !important;
            }
            
            #lightbox-next {
                right: 5px !important;
            }
            
            /* 공지사항/기도제목 모바일 */
            .notice-carousel-wrapper,
            .prayer-carousel-wrapper {
                padding: 15px 10px !important;
            }
            
            .notice-card,
            .prayer-card {
                padding: 16px 14px !important;
                margin: 0 8px !important;
                min-width: calc(100vw - 40px) !important;
                max-width: calc(100vw - 40px) !important;
            }
            
            .notice-card h3,
            .prayer-card h3 {
                font-size: 18px !important;
                margin-bottom: 8px !important;
            }
            
            .notice-card p,
            .prayer-card p {
                font-size: 14px !important;
                line-height: 1.4 !important;
                margin-bottom: 4px !important;
            }
            
            .notice-nav-btn,
            .prayer-nav-btn {
                width: 40px !important;
                height: 40px !important;
                font-size: 18px !important;
            }
            
            /* 비전 섹션 모바일 */
            #vision {
                padding: 20px 15px !important;
            }
            
            #vision h2 {
                font-size: 20px !important;
                margin-bottom: 8px !important;
                line-height: 1.3 !important;
            }
            
            #vision p[style*="Playfair Display"] {
                font-size: 16px !important;
                margin-bottom: 12px !important;
            }
            
            #introStatement {
                font-size: 16px !important;
                line-height: 1.3 !important;
                padding: 0 10px !important;
            }
            
            /* 예배시간 섹션 모바일 */
            .worship-content {
                padding: 20px 15px !important;
            }
            
            .worship-title {
                font-size: 32px !important;
                margin-bottom: 16px !important;
            }
            
            .worship-items-row {
                flex-direction: column !important;
                gap: 12px !important;
            }
            
            .worship-item {
                width: 100% !important;
                padding: 16px !important;
            }
            
            .worship-item .time {
                font-size: 28px !important;
            }
            
            .worship-item .name {
                font-size: 18px !important;
            }
            
            .worship-item .day {
                font-size: 12px !important;
            }
            
            /* 오시는 길 섹션 모바일 */
            #location {
                padding: 20px 15px !important;
            }
            
            #location h2 {
                font-size: 24px !important;
                margin-bottom: 12px !important;
            }
            
            #location p {
                font-size: 14px !important;
            }
            
            /* 연락처 섹션 모바일 */
            #contact {
                padding: 20px 15px !important;
            }
            
            #contact h2 {
                font-size: 20px !important;
                line-height: 1.4 !important;
                margin-bottom: 16px !important;
            }
            
            #contact a {
                font-size: 16px !important;
                padding: 12px 24px !important;
                margin-top: 16px !important;
            }
            
            /* 카테고리 슬라이더 모바일 */
            .category-slider-container {
                height: 40vh !important;
                min-height: 250px !important;
            }
            
            .category-slide-item {
                width: 80vw !important;
            }
            
            /* 네비게이션 모바일 */
            .site-map-nav {
                padding: 20px 15px !important;
                height: auto !important;
                display: flex !important;
            }
            
            .site-map-nav > div {
                width: 100% !important;
            }
            
            .site-map-nav > div > div:first-child,
            .site-map-nav > div > div:last-child {
                grid-template-columns: repeat(2, 1fr) !important;
                gap: 12px !important;
            }
            
            .nav-item {
                font-size: 13px !important;
                padding: 14px 10px !important;
                min-height: 50px !important;
            }
            
            /* 모바일 햄버거 메뉴 - 투명 배경으로 고급스럽게 */
            #mobile-menu {
                display: none !important;
                position: fixed !important;
                top: 50px !important;
                left: 0 !important;
                right: 0 !important;
                width: 100% !important;
                max-width: 100vw !important;
                background: rgba(0, 0, 0, 0.3) !important;
                backdrop-filter: blur(15px) !important;
                -webkit-backdrop-filter: blur(15px) !important;
                z-index: 9998 !important;
                padding: 24px 20px !important;
                max-height: calc(100vh - 50px) !important;
                overflow-y: auto !important;
                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2) !important;
                box-sizing: border-box !important;
            }
            
            #mobile-menu.active {
                display: block !important;
            }
            
            #mobile-menu nav {
                display: flex !important;
                flex-direction: column !important;
                gap: 8px !important;
                width: 100% !important;
                max-width: 100% !important;
            }
            
            /* 모든 섹션이 모바일에서 100vw 넘지 않도록 */
            section {
                width: 100% !important;
                max-width: 100vw !important;
                margin-left: 0 !important;
                margin-right: 0 !important;
                padding-left: 15px !important;
                padding-right: 15px !important;
                box-sizing: border-box !important;
            }
            
            #mobile-menu .mobile-nav-item {
                color: white !important;
                text-decoration: none !important;
                padding: 16px 18px !important;
                border-radius: 10px !important;
                font-family: 'Noto Sans KR', sans-serif !important;
                font-size: 16px !important;
                font-weight: 500 !important;
                transition: all 0.3s !important;
                background: rgba(255, 255, 255, 0.12) !important;
                border: 1px solid rgba(255, 255, 255, 0.15) !important;
                cursor: pointer !important;
                display: block !important;
                width: 100% !important;
                box-sizing: border-box !important;
                backdrop-filter: blur(5px) !important;
                -webkit-backdrop-filter: blur(5px) !important;
            }
            
            #mobile-menu .mobile-nav-item:hover,
            #mobile-menu .mobile-nav-item:active {
                background: rgba(255, 184, 0, 0.2);
                color: #FFB800;
                transform: translateX(4px);
            }
            
            #mobile-menu .mobile-nav-dropdown {
                display: none !important;
                flex-direction: column !important;
                gap: 6px !important;
                margin-left: 12px !important;
                margin-top: 8px !important;
                margin-bottom: 8px !important;
                width: calc(100% - 24px) !important;
                box-sizing: border-box !important;
            }
            
            #mobile-menu .mobile-nav-dropdown.active {
                display: flex !important;
            }
            
            #mobile-menu .mobile-nav-dropdown a {
                color: rgba(255, 255, 255, 0.9) !important;
                text-decoration: none !important;
                padding: 12px 18px !important;
                border-radius: 8px !important;
                font-size: 15px !important;
                transition: all 0.3s !important;
                background: rgba(255, 255, 255, 0.08) !important;
                display: block !important;
                width: 100% !important;
                box-sizing: border-box !important;
                backdrop-filter: blur(3px) !important;
                -webkit-backdrop-filter: blur(3px) !important;
            }
            
            #mobile-menu .mobile-nav-dropdown a:hover,
            #mobile-menu .mobile-nav-dropdown a:active {
                background: rgba(255, 184, 0, 0.15);
                color: #FFB800;
                transform: translateX(4px);
            }
            
            #mobile-menu-toggle:hover {
                background-color: rgba(255, 255, 255, 0.2) !important;
            }
            
            /* 히어로 섹션 추가 모바일 최적화 */
            .hero-text {
                padding: 20px !important;
            }
            
            /* 목사님 섹션 배경 이미지 모바일 - 004.jpg 적용 */
            .pastor-section-canva > div[style*="background-image"][style*="004.jpg"],
            .pastor-section-canva > div[style*="background-image"] {
                opacity: 0.6 !important;
                background-image: url('https://fkqxalcwhqohrkdzwhvv.supabase.co/storage/v1/object/public/media/004.jpg') !important;
                background-size: cover !important;
                background-position: center !important;
                background-repeat: no-repeat !important;
                display: block !important;
                visibility: visible !important;
                z-index: 0 !important;
                position: absolute !important;
                inset: 0 !important;
                pointer-events: none !important;
            }
            
            .pastor-section-canva > div[style*="background: linear-gradient"] {
                opacity: 0.3 !important;
                z-index: 1 !important;
            }
            
            /* 목사님 이름 폰트 크기 조정 */
            .pastor-section-canva > div:nth-child(8) p[style*="font-size: clamp(32px"] {
                font-size: clamp(24px, 2.4vw, 38px) !important;
            }
            
            /* 교회 소개 섹션 추가 모바일 최적화 */
            #about .w-full.max-w-3xl p[class*="mb-6"],
            #about .w-full.max-w-3xl p[class*="mb-8"] {
                margin-bottom: 8px !important;
            }
            
            #about .w-full.max-w-3xl h2[class*="mb-10"],
            #about .w-full.max-w-3xl h2[class*="mb-14"] {
                margin-bottom: 16px !important;
            }
            
            #about .w-full.max-w-3xl > div[class*="mb-8"],
            #about .w-full.max-w-3xl > div[class*="mb-12"] {
                margin-bottom: 12px !important;
            }
            
            /* 교회 소개 섹션 텍스트 일부 숨기기 (모바일) */
            #about .w-full.max-w-3xl p:nth-child(4),
            #about .w-full.max-w-3xl p:nth-child(5),
            #about .w-full.max-w-3xl p:nth-child(6),
            #about .w-full.max-w-3xl p:nth-child(7) {
                display: none !important;
            }
            
            #about .w-full.max-w-3xl p:nth-child(8) {
                margin-bottom: 12px !important;
            }
            
            /* 교회 소개 섹션 높이 줄이기 */
            #about .relative.z-10 {
                min-height: auto !important;
                padding-top: 30px !important;
                padding-bottom: 30px !important;
            }
        }
        
        /* 티커 애니메이션 */
        @keyframes ticker {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }
        
        .ticker-content {
            animation: ticker 30s linear infinite;
            display: inline-flex;
            will-change: transform;
        }
        
        /* 카테고리 슬라이더 섹션 */
        .category-slider-section {
            margin: 0 !important;
            padding: 0 !important;
            border: none !important;
            background-color: #000000 !important;
            display: block !important;
        }
        
        /* 카테고리 슬라이더 애니메이션 */
        /* 첫 번째 세트 9개 전체를 지나가도록 정확히 계산 */
        @keyframes slide {
            0% { transform: translateX(0); }
            100% { transform: translateX(calc(-40vw * 9)); }
        }
        
        .category-slider-container {
            position: relative;
            width: 100%;
            height: 60vh;
            overflow: hidden;
            background-color: #000000;
            padding: 5mm 0;
            margin: 0;
            box-sizing: border-box;
        }
        
        .category-slider-track {
            display: flex;
            height: 100%;
            animation: slide 90s linear infinite;
            will-change: transform;
            gap: 2mm;
        }
        
        .category-slide-item {
            flex-shrink: 0;
            width: 40vw;
            height: 100%;
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: stretch;
            justify-content: center;
            background-color: #000000;
        }
        
        .category-slide-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
            display: block;
            image-rendering: auto;
        }
        
        .category-overlay {
            display: none;
        }
        
        .category-text {
            font-family: 'Inter', sans-serif;
            font-weight: 300;
            font-size: clamp(1.5rem, 2.5vw, 2.5rem);
            color: #ffffff;
            text-align: center;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);
            letter-spacing: 2px;
        }
        
        .slider-nav-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            z-index: 10;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #ffffff;
            font-size: 24px;
            font-weight: 300;
        }
        
        .slider-nav-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-50%) scale(1.1);
        }
        
        .slider-nav-btn.prev {
            left: 20px;
        }
        
        .slider-nav-btn.next {
            right: 20px;
        }
        
        @media (max-width: 768px) {
            @keyframes slide {
                0% { transform: translateX(0); }
                100% { transform: translateX(calc(-80vw * 9)); }
            }
            
            .category-slider-container {
                height: auto;
                min-height: 40vh;
                max-height: 60vh;
                padding: 0;
                margin: 0;
            }
            
            .category-slider-track {
                animation: slide 90s linear infinite;
            }
            
            .category-slide-item {
                width: 80vw;
                padding: 0;
                align-items: stretch;
            }
            
            .category-slide-item img {
                width: 100%;
                height: 100%;
                object-fit: cover;
                object-position: center;
                image-rendering: auto;
            }
            
            .slider-nav-btn {
                width: 40px;
                height: 40px;
                font-size: 20px;
            }
            
            .slider-nav-btn.prev {
                left: 10px;
            }
            
            .slider-nav-btn.next {
                right: 10px;
            }
        }
        
        
        /* 헤더 스타일 */
        .main-header {
            background: rgba(0, 0, 0, 0.7) !important;
            backdrop-filter: blur(12px) !important;
            -webkit-backdrop-filter: blur(12px) !important;
        }
        
        .header-logo {
            height: 48px;
            width: 48px;
            border-radius: 50%;
            object-fit: cover;
        }
        
        .header-logo-right {
            height: 32px;
            width: auto;
            margin-left: 2cm;
        }
        
        .church-name {
            font-size: 20px;
            font-weight: bold;
            color: white;
            letter-spacing: 2px;
        }
        
        .denomination {
            display: flex;
            flex-direction: column;
            gap: 1px;
            font-size: 9px;
            color: rgba(255, 255, 255, 0.9);
            line-height: 1.1;
        }
        
        .denomination-top {
            letter-spacing: 1.05em;
        }
        
        .denomination-bottom {
            letter-spacing: 0.08em;
        }
        
        /* 가로 스크롤 섹션 */
        .horizontal-scroll-container {
            height: 400vh;
            position: relative;
        }
        
        .horizontal-scroll-wrapper {
            position: sticky;
            top: 0;
            height: 100vh;
            overflow: hidden;
        }
        
        .horizontal-track {
            display: flex;
            height: 100%;
            width: 300vw;
            will-change: transform;
            backface-visibility: hidden;
            transform: translate3d(0, 0, 0);
        }
        
        .service-card {
            flex-shrink: 0;
            width: 100vw;
            height: 100vh;
            padding: 60px;
        }
        
        @media (max-width: 768px) {
            /* 횡스크롤 - 데스크톱과 동일하게 세로 스크롤 → 가로 이동 */
            .horizontal-scroll-container {
                height: 250vh !important;
                position: relative !important;
            }
            
            .horizontal-scroll-wrapper {
                position: sticky !important;
                top: 0 !important;
                height: 100vh !important;
                overflow: hidden !important;
            }
            
            .horizontal-track {
                display: flex !important;
                flex-direction: row !important;
                width: 300vw !important;
                height: 100% !important;
            }
            
            .service-card {
                width: 100vw !important;
                height: 100vh !important;
                min-height: 100vh !important;
                padding: 20px 16px !important;
                flex-shrink: 0 !important;
                flex-direction: column !important;
                justify-content: center !important;
                align-items: center !important;
                margin: 0 !important;
                box-sizing: border-box !important;
            }
            
            .service-card:first-child {
                margin-left: 0 !important;
            }
            
            .service-card:last-child {
                margin-right: 0 !important;
            }
            
            .service-card > div {
                width: 100% !important;
                max-width: 100% !important;
                padding: 0 !important;
                margin: 0 !important;
            }
            
            .service-card .service-number {
                font-size: 42px !important;
                letter-spacing: 2px !important;
                margin-bottom: 8px !important;
            }
            
            .service-card h2 {
                font-size: 24px !important;
                margin: 8px 0 !important;
                line-height: 1.2 !important;
            }
            
            .service-card p {
                font-size: 13px !important;
                line-height: 1.5 !important;
                margin-bottom: 12px !important;
            }
            
            .service-card img {
                width: 100% !important;
                max-width: 200px !important;
                height: auto !important;
                margin-top: 8px !important;
                border-radius: 16px !important;
            }
            
            .service-card br.hidden {
                display: none !important;
            }
            
            /* 간증 섹션 모바일 - 데스크톱과 동일하게 스크롤 기반 카드 전환 */
            .stacking-cards-container {
                height: 400vh !important;
                position: relative !important;
            }
            
            .stacking-cards-wrapper {
                position: sticky !important;
                top: 0 !important;
                height: 100vh !important;
                overflow: hidden !important;
            }
            
            /* 타이틀 영역 - 상단에 배치, 이미지 숨김 (모바일에서는 타이틀만) */
            .testimonial-title-box {
                position: absolute !important;
                left: 50% !important;
                top: 5% !important;
                transform: translateX(-50%) !important;
                width: 90% !important;
                max-width: 320px !important;
                padding: 0 !important;
                text-align: center !important;
                z-index: 5 !important;
            }
            
            .testimonial-title-box img {
                display: none !important;
            }
            
            .testimonial-title-box p {
                font-size: 10px !important;
                margin-bottom: 4px !important;
            }
            
            .testimonial-title-box h2 {
                font-size: 24px !important;
                line-height: 1.2 !important;
            }
            
            .testimonial-title-box h2 span {
                font-size: 24px !important;
            }
            
            .testimonial-title-box .w-20 {
                width: 40px !important;
                margin: 8px auto 0 auto !important;
            }
            
            /* 간증 카드들 - 중앙에 배치 */
            .stack-card {
                position: absolute !important;
                left: 50% !important;
                top: 28% !important;
                transform: translateX(-50%) !important;
                width: 88% !important;
                max-width: 340px !important;
                height: auto !important;
                min-height: 380px !important;
                padding: 20px !important;
                border-radius: 20px !important;
            }
            
            .stack-card .flex {
                margin-bottom: 16px !important;
            }
            
            .stack-card .text-6xl {
                font-size: 40px !important;
            }
            
            .stack-card img {
                width: 100px !important;
                height: 100px !important;
                border-radius: 14px !important;
            }
            
            .stack-card blockquote {
                font-size: 14px !important;
                line-height: 1.5 !important;
                margin-bottom: 16px !important;
            }
            
            .stack-card .text-xl {
                font-size: 16px !important;
            }
            
            .stack-card .text-sm {
                font-size: 12px !important;
            }
            
            .stack-card .text-sm {
                font-size: 12px !important;
            }
        }
        
        .service-number {
            font-size: clamp(80px, 25vw, 350px);
            font-weight: 400;
            line-height: 0.9;
            letter-spacing: 0.1em;
            color: rgba(0,0,0,0.9);
            margin-bottom: 20px;
            display: block;
        }
        
        /* 예배시간 섹션 (빈티지/클래식 스타일) */
        .worship-section {
            position: relative;
            min-height: 450px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            padding: 50px 20px;
        }
        
        .worship-bg {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: url('https://images.unsplash.com/photo-1438232992991-995b7058bbb3?w=1920&q=80');
            background-size: cover;
            background-position: center;
            filter: blur(4px) brightness(0.5);
            transform: scale(1.1);
        }
        
        .worship-content {
            position: relative;
            z-index: 1;
            text-align: center;
            color: #fff;
            padding: 40px 40px;
            max-width: 1200px;
            width: 100%;
        }
        
        .worship-title {
            font-family: 'Noto Serif KR', serif;
            font-size: 67px;
            font-weight: 700;
            letter-spacing: 8px;
            margin-bottom: 8px;
            text-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }
        
        .divider {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 16px;
            margin-bottom: 40px;
        }
        
        .divider .line {
            width: 84px;
            height: 1px;
            background: rgba(255,255,255,0.5);
        }
        
        .divider .text {
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 20px;
            letter-spacing: 4px;
            color: rgba(255,255,255,0.8);
        }
        
        .worship-list {
            display: flex;
            flex-direction: column;
            gap: 28px;
            align-items: center;
            width: 100%;
        }
        
        .worship-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
        }
        
        .worship-items-row {
            display: flex;
            flex-direction: row;
            gap: calc(35px + 1cm);
            align-items: flex-start;
            justify-content: center;
            flex-wrap: nowrap !important;
            width: 100%;
            max-width: 1200px;
        }
        
        .worship-items-row .worship-item {
            flex: 0 0 auto !important;
            min-width: 0 !important;
            width: auto !important;
            max-width: none !important;
        }
        
        .worship-row {
            display: flex;
            gap: 30px;
            justify-content: center;
            align-items: flex-start;
            width: 100%;
        }
        
        .worship-row .worship-item {
            flex: 1;
            min-width: 0;
        }
        
        @media (max-width: 900px) {
            .worship-items-row {
                gap: 10px;
                max-width: 100%;
            }
            
            .worship-items-row .worship-item .time {
                font-size: 28px;
            }
            
            .worship-items-row .worship-item .name {
                font-size: 22px;
            }
            
            .worship-items-row .worship-item .day {
                font-size: 14px;
            }
        }
        
        @media (max-width: 600px) {
            .worship-list {
                gap: 24px;
            }
            
            .worship-items-row {
                flex-direction: column;
                gap: 24px;
                align-items: center;
            }
            
            .worship-items-row .worship-item {
                max-width: 100%;
            }
        }
        
        .worship-item .day {
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 17px;
            letter-spacing: 3px;
            color: rgba(255,255,255,0.6);
            text-transform: uppercase;
        }
        
        .worship-item .name {
            font-family: 'Noto Serif KR', serif;
            font-size: 25px;
            font-weight: 500;
            letter-spacing: 2px;
            white-space: nowrap;
        }
        
        .worship-items-row .worship-item .name {
            font-size: 22px;
        }
        
        .worship-item .time {
            font-family: 'Noto Serif KR', serif;
            font-size: 45px;
            font-weight: 700;
            letter-spacing: 2px;
            text-shadow: 0 2px 8px rgba(0,0,0,0.3);
            white-space: nowrap;
        }
        
        .worship-items-row .worship-item .time {
            font-size: 34px;
        }
        
        .ornament-top, .ornament-bottom {
            font-size: 28px;
            color: rgba(255,255,255,0.6);
            letter-spacing: 8px;
            margin: 20px 0;
        }
        
        /* 드롭다운 메뉴 스타일 - 호버로 작동 */
        .nav-dropdown {
            position: relative;
        }
        
        .nav-dropdown-btn {
            display: flex;
            align-items: center;
            gap: 4px;
            background: none;
            border: none;
            color: inherit;
            font: inherit;
            cursor: pointer;
            padding: 4px 8px;
            transition: color 0.3s;
        }
        
        .nav-dropdown-menu {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            margin-top: 8px;
            background: rgba(45, 45, 45, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 8px;
            padding: 8px 0;
            min-width: 160px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            z-index: 1000;
            animation: fadeInDown 0.2s ease;
        }
        
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .dropdown-item {
            display: block;
            padding: 10px 20px;
            color: rgba(255,255,255,0.9);
            text-decoration: none;
            font-size: 14px;
            transition: all 0.2s;
            white-space: nowrap;
        }
        
        .dropdown-item:hover {
            background: rgba(255,255,255,0.1);
            color: #FFB800;
            padding-left: 24px;
        }
        
        /* 호버로 드롭다운 열기 */
        .nav-dropdown:hover .nav-dropdown-menu {
            display: block !important;
            animation: dropdownFade 0.2s ease;
        }
        
        .nav-dropdown:hover .nav-dropdown-btn svg {
            transform: rotate(180deg);
        }
        
        .nav-dropdown-btn svg {
            transition: transform 0.2s ease;
        }
        
        @media (max-width: 600px) {
            .worship-title {
                font-size: 45px;
                letter-spacing: 4px;
            }
            
            .worship-item .time {
                font-size: 34px;
            }
            
            .worship-content {
                padding: 40px 20px;
            }
            
            .worship-item .name {
                font-size: 25px;
            }
            
            .worship-row {
                flex-direction: column;
                gap: 24px;
            }
        }
        
        /* 스택 카드 섹션 */
        .stacking-cards-container {
            position: relative;
            height: 350vh;
        }
        
        .stacking-cards-wrapper {
            position: sticky;
            top: 0;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding-left: 0;
            padding-right: 0;
            padding-top: 40px;
            padding-bottom: 40px;
            max-width: 100%;
            margin: 0 auto;
        }
        
        /* 간증 타이틀 애니메이션 */
        @keyframes testimonialSlide {
            0% {
                opacity: 0;
                transform: translateX(-30px);
            }
            100% {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        @keyframes testimonialFade {
            0% {
                opacity: 0;
                letter-spacing: 0.5em;
            }
            100% {
                opacity: 1;
                letter-spacing: 0.2em;
            }
        }
        
        @keyframes lineGrow {
            0% {
                width: 0;
            }
            100% {
                width: 80px;
            }
        }
        
        .testimonial-slide {
            opacity: 0;
            animation: testimonialSlide 0.8s ease forwards;
        }
        
        .testimonial-fade {
            opacity: 0;
            animation: testimonialFade 1s ease forwards;
        }
        
        .testimonial-line {
            width: 0;
            animation: lineGrow 0.8s ease 0.8s forwards;
        }
        
        .stack-card {
            position: absolute;
            width: 500px;
            height: 500px;
            border-radius: 24px;
            padding: 40px;
            left: calc(50% + 5cm);
            top: 50%;
            transform: translate(-50%, -50%);
            display: flex;
            flex-direction: column;
            transition: transform 0.4s cubic-bezier(0.25, 0.1, 0.25, 1), opacity 0.4s ease;
            will-change: transform, opacity;
            z-index: 5;
        }
        
        .testimonial-title-box {
            position: absolute !important;
            left: 15% !important;
            top: 50% !important;
            transform: translateY(-50%) !important;
            z-index: 10 !important;
            width: 30% !important;
            max-width: 450px !important;
            padding-left: 60px !important;
            padding-right: 30px !important;
            box-sizing: border-box !important;
        }
        
        @media (max-width: 1024px) {
            .stack-card {
                left: 50%;
            }
        }
        
        @media (min-width: 768px) and (max-width: 1400px) {
            .stack-card {
                left: 70% !important;
            }
        }
        
        /* Fade-in 애니메이션 */
        .reveal-text {
            opacity: 0;
            transform: translateY(60px);
            transition: opacity 0.8s ease, transform 0.8s ease;
        }
        
        .reveal-text.visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        .fade-in {
            opacity: 0;
            transform: translateY(40px);
            transition: opacity 0.6s ease, transform 0.6s ease;
        }
        
        .fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* 목사님 사진 고급스러운 테두리 효과 */
        .pastor-photo-container {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .pastor-photo-container:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.18), 0 4px 12px rgba(0, 0, 0, 0.12), inset 0 1px 0 rgba(255, 255, 255, 0.7) !important;
        }
        
        .pastor-photo-container img {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .pastor-photo-container:hover img {
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2) !important;
        }
        
        /* 텍스트 순차적 나타남 효과 */
        .text-reveal {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        
        .text-reveal.visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        .text-reveal:nth-child(1) { transition-delay: 0.1s; }
        .text-reveal:nth-child(2) { transition-delay: 0.3s; }
        .text-reveal:nth-child(3) { transition-delay: 0.5s; }
        .text-reveal:nth-child(4) { transition-delay: 0.7s; }
        .text-reveal:nth-child(5) { transition-delay: 0.9s; }
        .text-reveal:nth-child(6) { transition-delay: 1.1s; }
        
        /* 한 줄씩 아래에서 위로 나타나는 효과 */
        .line-reveal {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }
        
        .line-reveal.visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        .line-reveal:nth-of-type(1) { transition-delay: 0.1s; }
        .line-reveal:nth-of-type(2) { transition-delay: 0.3s; }
        .line-reveal:nth-of-type(3) { transition-delay: 0.5s; }
        .line-reveal:nth-of-type(4) { transition-delay: 0.7s; }
        .line-reveal:nth-of-type(5) { transition-delay: 0.9s; }
        .line-reveal:nth-of-type(6) { transition-delay: 1.1s; }
        .line-reveal:nth-of-type(7) { transition-delay: 1.3s; }
        .line-reveal:nth-of-type(8) { transition-delay: 1.5s; }
        .line-reveal:nth-of-type(9) { transition-delay: 1.7s; }
        
        /* 푸터 그라디언트 텍스트 */
        .gradient-text {
            background: linear-gradient(to bottom, #000000 0%, #ffffff 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        /* 로고 마키 애니메이션 */
        @keyframes marquee {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }
        
        .marquee {
            animation: marquee 20s linear infinite;
        }
        
        /* 히어로 섹션 스타일 */
        .hero-background-text {
            position: absolute;
            top: 15%;
            left: 0;
            right: 0;
            width: 100%;
            font-size: clamp(200px, 40vw, 600px);
            font-weight: 900;
            color: rgba(255, 255, 255, 0.12);
            letter-spacing: 0.03em;
            z-index: 1;
            font-family: 'Inter', sans-serif;
            line-height: 0.85;
            text-align: center;
            overflow: visible;
            white-space: normal;
            word-break: keep-all;
        }
        
        .hero-grid-container {
            position: absolute;
            top: 45%;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                linear-gradient(rgba(255, 255, 255, 0.02) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255, 255, 255, 0.02) 1px, transparent 1px);
            background-size: 120px 120px;
            z-index: 2;
            pointer-events: none;
        }
        
        .hero-verse {
            position: absolute;
            bottom: 160px;
            z-index: 3;
            max-width: 520px;
        }
        
        .hero-verse-left {
            left: 100px;
            transform: rotate(-3deg);
        }
        
        .hero-verse-right {
            right: 100px;
            transform: rotate(3deg);
        }
        
        .verse-text {
            font-size: 32px;
            line-height: 1.7;
            color: white;
            font-weight: 300;
            font-style: italic;
            margin-bottom: 24px;
            text-shadow: 0 3px 15px rgba(0, 0, 0, 0.6);
            font-family: 'Noto Sans KR', 'Inter', sans-serif;
        }
        
        .verse-reference {
            font-size: 18px;
            color: rgba(255, 255, 255, 0.85);
            font-style: italic;
            text-align: right;
            font-weight: 400;
        }
    </style>
</head>
<body class="bg-white text-black" style="padding-top: 0; margin: 0;">

    <!-- 1. 메인 헤더 (로고 + 네비게이션) -->
    <header class="fixed top-0 left-0 w-full z-50 main-header">
        <div class="max-w-7xl mx-auto px-4 md:px-8 py-2 flex justify-between items-center">
            <!-- 좌측: 첫 번째 로고 + 텍스트 -->
            <div class="flex items-center gap-2 md:gap-3">
                <img src="https://fkqxalcwhqohrkdzwhvv.supabase.co/storage/v1/object/public/media/logo.jpg" 
                     alt="살리는 빛 부천침례교회 로고" 
                     class="header-logo">
                <div class="denomination" style="font-size: 0.85em;">
                    <div class="denomination-top">기독교</div>
                    <div class="denomination-bottom">한국침례회</div>
                </div>
                <a href="#heroSection" class="church-name flex items-center" style="text-decoration: none; cursor: pointer;">
                    <span class="text-xs md:text-sm" style="font-family: 'Noto Sans KR', sans-serif; font-weight: 400; color: #FFB800;">살리는 빛</span>
                    <span class="text-base md:text-xl font-bold ml-2" style="color: white;">부천교회</span>
                </a>
            </div>
            
            <!-- 우측: 네비게이션 + 두 번째 로고 + 관리자 아이콘 -->
            <div class="flex items-center gap-3 md:gap-6">
                <nav class="hidden md:flex gap-3 lg:gap-4 text-white font-medium text-xs md:text-sm items-center">
                    <!-- 드롭다운 메뉴 -->
                    <div class="nav-dropdown relative" style="position: relative;">
                        <button class="nav-dropdown-btn flex items-center gap-1 hover:text-red-400 transition" 
                                style="background: none; border: none; color: inherit; font: inherit; cursor: pointer; padding: 4px 8px;"
                                onclick="toggleDropdown(event, 'church-menu')">
                            교회 소개
                            <svg width="12" height="12" viewBox="0 0 12 12" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="transition: transform 0.3s;">
                                <path d="M3 4.5l3 3 3-3"/>
                            </svg>
                        </button>
                        <div id="church-menu" class="nav-dropdown-menu" style="display: none; position: absolute; top: 100%; left: 0; margin-top: 8px; background: rgba(45, 45, 45, 0.95); backdrop-filter: blur(10px); border-radius: 8px; padding: 8px 0; min-width: 160px; box-shadow: 0 4px 20px rgba(0,0,0,0.3); z-index: 1000;">
                            <a href="#about" class="dropdown-item">교회 소개</a>
                            <a href="#pastor" class="dropdown-item">담임목사</a>
                        </div>
                    </div>
                    
                    <div class="nav-dropdown relative" style="position: relative;">
                        <button class="nav-dropdown-btn flex items-center gap-1 hover:text-red-400 transition" 
                                style="background: none; border: none; color: inherit; font: inherit; cursor: pointer; padding: 4px 8px;"
                                onclick="toggleDropdown(event, 'worship-menu')">
                            예배/설교
                            <svg width="12" height="12" viewBox="0 0 12 12" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="transition: transform 0.3s;">
                                <path d="M3 4.5l3 3 3-3"/>
                            </svg>
                        </button>
                        <div id="worship-menu" class="nav-dropdown-menu" style="display: none; position: absolute; top: 100%; left: 0; margin-top: 8px; background: rgba(45, 45, 45, 0.95); backdrop-filter: blur(10px); border-radius: 8px; padding: 8px 0; min-width: 160px; box-shadow: 0 4px 20px rgba(0,0,0,0.3); z-index: 1000;">
                            <a href="#sermon" class="dropdown-item">설교 영상</a>
                            <a href="#worship-times" class="dropdown-item">예배시간</a>
                            <a href="#vision" class="dropdown-item">교회 핵심 가치</a>
                        </div>
                    </div>
                    
                    <div class="nav-dropdown relative" style="position: relative;">
                        <button class="nav-dropdown-btn flex items-center gap-1 hover:text-red-400 transition" 
                                style="background: none; border: none; color: inherit; font: inherit; cursor: pointer; padding: 4px 8px;"
                                onclick="toggleDropdown(event, 'community-menu')">
                            공동체
                            <svg width="12" height="12" viewBox="0 0 12 12" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="transition: transform 0.3s;">
                                <path d="M3 4.5l3 3 3-3"/>
                            </svg>
                        </button>
                        <div id="community-menu" class="nav-dropdown-menu" style="display: none; position: absolute; top: 100%; left: 0; margin-top: 8px; background: rgba(45, 45, 45, 0.95); backdrop-filter: blur(10px); border-radius: 8px; padding: 8px 0; min-width: 160px; box-shadow: 0 4px 20px rgba(0,0,0,0.3); z-index: 1000;">
                            <a href="#testimonials" class="dropdown-item">간증</a>
                            <a href="#features" class="dropdown-item">초대합니다</a>
                        </div>
                    </div>
                    
                    <div class="nav-dropdown relative" style="position: relative;">
                        <button class="nav-dropdown-btn flex items-center gap-1 hover:text-red-400 transition" 
                                style="background: none; border: none; color: inherit; font: inherit; cursor: pointer; padding: 4px 8px;"
                                onclick="toggleDropdown(event, 'info-menu')">
                            소식
                            <svg width="12" height="12" viewBox="0 0 12 12" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="transition: transform 0.3s;">
                                <path d="M3 4.5l3 3 3-3"/>
                            </svg>
                        </button>
                        <div id="info-menu" class="nav-dropdown-menu" style="display: none; position: absolute; top: 100%; left: 0; margin-top: 8px; background: rgba(45, 45, 45, 0.95); backdrop-filter: blur(10px); border-radius: 8px; padding: 8px 0; min-width: 160px; box-shadow: 0 4px 20px rgba(0,0,0,0.3); z-index: 1000;">
                            <a href="#notice" class="dropdown-item">공지사항</a>
                            <a href="#prayer" class="dropdown-item">기도제목</a>
                            <a href="#gallery" class="dropdown-item">갤러리</a>
                        </div>
                    </div>
                    
                    <a href="#location" class="hover:text-red-400 transition">오시는 길</a>
                </nav>
                
                <!-- 우측 텍스트 (Bucheon Baptist Church) -->
                <div class="hidden md:block text-right">
                    <div class="text-white font-semibold text-sm" style="font-family: 'Playfair Display', serif;">Bucheon Baptist Church</div>
                </div>
                
                <!-- 햄버거 메뉴 (모바일) -->
                <button id="mobile-menu-toggle" class="md:hidden flex items-center justify-center"
                        style="width: 32px; height: 32px; padding: 6px; background-color: rgba(255, 255, 255, 0.1); border-radius: 8px; transition: all 0.3s ease; border: none; cursor: pointer; backdrop-filter: blur(5px);"
                        onclick="toggleMobileMenu()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="3" y1="12" x2="21" y2="12"></line>
                        <line x1="3" y1="6" x2="21" y2="6"></line>
                        <line x1="3" y1="18" x2="21" y2="18"></line>
                    </svg>
                </button>
                
            </div>
        </div>
    </header>
    
    <!-- 모바일 햄버거 메뉴 -->
    <div id="mobile-menu" class="md:hidden">
        <nav>
            <div class="mobile-nav-item" onclick="toggleMobileSubmenu('mobile-church-menu')">
                교회 소개
                <span style="float: right;">▼</span>
            </div>
            <div id="mobile-church-menu" class="mobile-nav-dropdown" style="display: none;">
                <a href="#about" onclick="scrollToSectionMobile('#about'); return false;">교회 소개</a>
                <a href="#pastor" onclick="scrollToSectionMobile('#pastor'); return false;">담임목사</a>
            </div>
            
            <div class="mobile-nav-item" onclick="toggleMobileSubmenu('mobile-worship-menu')">
                예배/설교
                <span style="float: right;">▼</span>
            </div>
            <div id="mobile-worship-menu" class="mobile-nav-dropdown" style="display: none;">
                <a href="#sermon" onclick="scrollToSectionMobile('#sermon'); return false;">설교 영상</a>
                <a href="#worship-times" onclick="scrollToSectionMobile('#worship-times'); return false;">예배시간</a>
                <a href="#vision" onclick="scrollToSectionMobile('#vision'); return false;">교회 핵심 가치</a>
            </div>
            
            <div class="mobile-nav-item" onclick="toggleMobileSubmenu('mobile-community-menu')">
                공동체
                <span style="float: right;">▼</span>
            </div>
            <div id="mobile-community-menu" class="mobile-nav-dropdown" style="display: none;">
                <a href="#testimonials" onclick="scrollToSectionMobile('#testimonials'); return false;">간증</a>
                <a href="#features" onclick="scrollToSectionMobile('#features'); return false;">초대합니다</a>
            </div>
            
            <div class="mobile-nav-item" onclick="toggleMobileSubmenu('mobile-info-menu')">
                소식
                <span style="float: right;">▼</span>
            </div>
            <div id="mobile-info-menu" class="mobile-nav-dropdown" style="display: none;">
                <a href="#notice" onclick="scrollToSectionMobile('#notice'); return false;">공지사항</a>
                <a href="#prayer" onclick="scrollToSectionMobile('#prayer'); return false;">기도제목</a>
                <a href="#gallery" onclick="scrollToSectionMobile('#gallery'); return false;">갤러리</a>
            </div>
            
            <a href="#location" class="mobile-nav-item" onclick="scrollToSectionMobile('#location'); return false;">오시는 길</a>
        </nav>
    </div>

    <!-- 3. 히어로 섹션 - Figma 디자인 정확히 반영 (1920 x 1006) -->
    <section id="heroSection" class="relative w-full" style="height: calc(100vh - 40px); max-height: calc(100vh - 40px); overflow: hidden; width: 100%; margin: 0; padding: 0; margin-top: 40px; background-color: #000000; position: relative;">
        <!-- 배경 이미지 슬라이드쇼 -->
        <div id="heroSlideshow" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 0;">
            <img class="hero-slide active" src="https://fkqxalcwhqohrkdzwhvv.supabase.co/storage/v1/object/public/media/001.jpg" alt="부천교회 슬라이드 1" fetchpriority="high" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; object-position: center center; opacity: 1; transition: opacity 1s ease-in-out;">
            <img class="hero-slide" src="https://fkqxalcwhqohrkdzwhvv.supabase.co/storage/v1/object/public/media/002.jpg" alt="부천교회 슬라이드 2" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; object-position: center center; opacity: 0; transition: opacity 1s ease-in-out;">
            <img class="hero-slide" src="https://fkqxalcwhqohrkdzwhvv.supabase.co/storage/v1/object/public/media/004.jpg" alt="부천교회 슬라이드 3" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; object-position: center center; opacity: 0; transition: opacity 1s ease-in-out;">
            <img class="hero-slide" src="https://fkqxalcwhqohrkdzwhvv.supabase.co/storage/v1/object/public/media/003.jpg" alt="부천교회 슬라이드 4" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; object-position: center center; opacity: 0; transition: opacity 1s ease-in-out;">
            <img class="hero-slide" src="https://fkqxalcwhqohrkdzwhvv.supabase.co/storage/v1/object/public/media/005.jpg" alt="부천교회 슬라이드 5" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; object-position: center center; opacity: 0; transition: opacity 1s ease-in-out;">
            <img class="hero-slide" src="https://fkqxalcwhqohrkdzwhvv.supabase.co/storage/v1/object/public/media/006.jpg" alt="부천교회 슬라이드 6" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; object-position: center center; opacity: 0; transition: opacity 1s ease-in-out;">
            <img class="hero-slide" src="https://fkqxalcwhqohrkdzwhvv.supabase.co/storage/v1/object/public/media/007.jpg" alt="부천교회 슬라이드 7" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; object-position: center center; opacity: 0; transition: opacity 1s ease-in-out;">
            <img class="hero-slide" src="https://fkqxalcwhqohrkdzwhvv.supabase.co/storage/v1/object/public/media/008.jpg" alt="부천교회 슬라이드 8" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; object-position: center center; opacity: 0; transition: opacity 1s ease-in-out;">
            <img class="hero-slide" src="https://fkqxalcwhqohrkdzwhvv.supabase.co/storage/v1/object/public/media/009%20(1).jpg" alt="부천교회 슬라이드 9" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; object-position: center center; opacity: 0; transition: opacity 1s ease-in-out;">
            <img class="hero-slide" src="https://fkqxalcwhqohrkdzwhvv.supabase.co/storage/v1/object/public/media/010.jpg" alt="부천교회 슬라이드 10" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; object-position: center center; opacity: 0; transition: opacity 1s ease-in-out;">
            <img class="hero-slide" src="https://fkqxalcwhqohrkdzwhvv.supabase.co/storage/v1/object/public/media/011.jpg" alt="부천교회 슬라이드 11" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; object-position: center center; opacity: 0; transition: opacity 1s ease-in-out;">
            <img class="hero-slide" src="https://fkqxalcwhqohrkdzwhvv.supabase.co/storage/v1/object/public/media/012.jpg" alt="부천교회 슬라이드 12" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; object-position: center center; opacity: 0; transition: opacity 1s ease-in-out;">
            <img class="hero-slide" src="https://fkqxalcwhqohrkdzwhvv.supabase.co/storage/v1/object/public/media/013.jpg" alt="부천교회 슬라이드 13" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; object-position: center center; opacity: 0; transition: opacity 1s ease-in-out;">
        </div>
        
        <!-- 1. "The Light of Life" - 반응형 위치 -->
        <div 
            class="hero-text absolute z-10"
            style="left: 4.69%; top: 41.15%; width: 90.63%; height: 31.01%; z-index: 10;">
            <h1
                style="font-family: 'Inter', sans-serif; font-weight: 400; font-size: clamp(40px, 11.46vw, 220px); line-height: 1.2102272727272727em; color: #FFFFFF; text-align: left; margin: 0; padding: 0; text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.5);">
                The Light of Life
            </h1>
        </div>

        <!-- 2. 하단 영역 - 한글 + 영어 2개 컬럼 (반응형) -->
        <div 
            class="hero-text absolute"
            style="left: 0; bottom: 0; width: 100%; height: 29.62%; z-index: 10; background: transparent;">
            
            <!-- 상단 가로선 -->
            <div 
                class="hero-line absolute bg-white"
                style="left: 0; top: 0; width: 100%; height: 1px;">
            </div>
            
            <!-- 컬럼 1: 한글 성경 구절 (왼쪽) -->
            <div 
                class="absolute"
                style="left: 0.05%; top: 1.79%; width: 49.95%; height: auto; padding-right: 2%; box-sizing: border-box;">
                <p
                    style="font-family: 'Inter', sans-serif; font-weight: 400; font-size: clamp(16px, 1.5vw, 28px); line-height: 1.4em; color: #FFFFFF; text-align: right; margin: 0; padding: 0; text-shadow: 0px 2px 4px rgba(0, 0, 0, 0.5); white-space: pre-line;">
                    이같이 <span style="font-size: clamp(22px, 2vw, 40px); font-weight: 600;">너희 빛</span>이 사람 앞에 비치게 하여
그들로 너희 착한 행실을 보고
하늘에 계신 너희 아버지께 영광을 돌리게 하라
                </p>
                <p
                    style="font-family: 'Inter', sans-serif; font-weight: 400; font-size: clamp(16px, 1.5vw, 28px); line-height: 1.4em; color: #FFFFFF; text-align: right; margin: 0; padding: 0; margin-top: 1.5vh; text-shadow: 0px 2px 4px rgba(0, 0, 0, 0.5);">
                    마태복음 5:16
                </p>
            </div>

            <!-- 구분선 (세로) - 한글과 영어 사이 -->
            <div 
                class="hero-line absolute bg-white"
                style="left: 50.05%; top: 0; width: 1px; height: 100%;">
            </div>

            <!-- 컬럼 2: 영어 성경 구절 (오른쪽) -->
            <div 
                class="absolute"
                style="left: 50.05%; top: 1.79%; width: 49.95%; height: auto; padding-right: 2%; box-sizing: border-box;">
                <p
                    style="font-family: 'Inter', sans-serif; font-weight: 400; font-size: clamp(16px, 1.5vw, 28px); line-height: 1.4em; color: #FFFFFF; text-align: right; margin: 0; padding: 0; text-shadow: 0px 2px 4px rgba(0, 0, 0, 0.5); white-space: pre-line;">
                    In the same way, let <span style="font-size: clamp(22px, 2vw, 40px); font-weight: 600;">your light</span> shine before others,
that they may see your good deeds
and glorify your Father in heaven.
                </p>
                <!-- Matthew 5:16 -->
                <p
                    style="font-family: 'Inter', sans-serif; font-weight: 400; font-size: clamp(16px, 1.5vw, 28px); line-height: 1.4em; color: #FFFFFF; text-align: right; margin: 0; padding: 0; margin-top: 1.5vh; text-shadow: 0px 2px 4px rgba(0, 0, 0, 0.5);">
                    Matthew 5:16
                </p>
            </div>
        </div>
    </section>

    <!-- 4. 사이트맵 내비게이션 (히어로 바로 밑) -->
    <nav class="site-map-nav" style="width: 100%; height: 7cm; background-color: #F5F5F5; padding: 60px 0; margin: 0; display: flex; align-items: center; justify-content: center;">
        <div class="max-w-6xl mx-auto w-full px-8">
            <!-- 상단 행: 4개 버튼 (실제 섹션 순서대로) -->
            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin-bottom: 20px;">
                <a href="#sermon" class="nav-item" style="text-decoration: none; color: #2D2D2D; font-family: 'Noto Sans KR', sans-serif; font-weight: 500; font-size: clamp(15px, 1.3vw, 18px); text-align: center; padding: 24px 16px; border-radius: 12px; transition: all 0.3s; background-color: #FFFFFF; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08); display: flex; align-items: center; justify-content: center; min-height: 80px;">
                    설교
                </a>
                <a href="#about" class="nav-item" style="text-decoration: none; color: #2D2D2D; font-family: 'Noto Sans KR', sans-serif; font-weight: 500; font-size: clamp(15px, 1.3vw, 18px); text-align: center; padding: 24px 16px; border-radius: 12px; transition: all 0.3s; background-color: #FFFFFF; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08); display: flex; align-items: center; justify-content: center; min-height: 80px;">
                    교회 소개
                </a>
                <a href="#pastor" class="nav-item" style="text-decoration: none; color: #2D2D2D; font-family: 'Noto Sans KR', sans-serif; font-weight: 500; font-size: clamp(15px, 1.3vw, 18px); text-align: center; padding: 24px 16px; border-radius: 12px; transition: all 0.3s; background-color: #FFFFFF; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08); display: flex; align-items: center; justify-content: center; min-height: 80px;">
                    담임목사
                </a>
                <a href="#vision" class="nav-item" style="text-decoration: none; color: #2D2D2D; font-family: 'Noto Sans KR', sans-serif; font-weight: 500; font-size: clamp(15px, 1.3vw, 18px); text-align: center; padding: 24px 16px; border-radius: 12px; transition: all 0.3s; background-color: #FFFFFF; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08); display: flex; align-items: center; justify-content: center; min-height: 80px;">
                    교회 핵심 가치
                </a>
            </div>
            <!-- 하단 행: 4개 버튼 (실제 섹션 순서대로) -->
            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px;">
                <a href="#testimonials" class="nav-item" style="text-decoration: none; color: #2D2D2D; font-family: 'Noto Sans KR', sans-serif; font-weight: 500; font-size: clamp(15px, 1.3vw, 18px); text-align: center; padding: 24px 16px; border-radius: 12px; transition: all 0.3s; background-color: #FFFFFF; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08); display: flex; align-items: center; justify-content: center; min-height: 80px;">
                    간증
                </a>
                <a href="#worship-times" class="nav-item" style="text-decoration: none; color: #2D2D2D; font-family: 'Noto Sans KR', sans-serif; font-weight: 500; font-size: clamp(15px, 1.3vw, 18px); text-align: center; padding: 24px 16px; border-radius: 12px; transition: all 0.3s; background-color: #FFFFFF; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08); display: flex; align-items: center; justify-content: center; min-height: 80px;">
                    예배시간
                </a>
                <a href="#notice" class="nav-item" style="text-decoration: none; color: #2D2D2D; font-family: 'Noto Sans KR', sans-serif; font-weight: 500; font-size: clamp(15px, 1.3vw, 18px); text-align: center; padding: 24px 16px; border-radius: 12px; transition: all 0.3s; background-color: #FFFFFF; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08); display: flex; align-items: center; justify-content: center; min-height: 80px;">
                    공지사항
                </a>
                <a href="#gallery" class="nav-item" style="text-decoration: none; color: #2D2D2D; font-family: 'Noto Sans KR', sans-serif; font-weight: 500; font-size: clamp(15px, 1.3vw, 18px); text-align: center; padding: 24px 16px; border-radius: 12px; transition: all 0.3s; background-color: #FFFFFF; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08); display: flex; align-items: center; justify-content: center; min-height: 80px;">
                    갤러리
                </a>
            </div>
        </div>
    </nav>

    <style>
        .site-map-nav .nav-item:hover {
            background-color: #344d6b !important;
            color: #FFFFFF !important;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15) !important;
        }
        
        @media (max-width: 768px) {
            .site-map-nav {
                height: auto !important;
                padding: 20px 15px !important;
            }
            .site-map-nav > div > div:first-child {
                grid-template-columns: repeat(2, 1fr) !important;
                gap: 12px !important;
                margin-bottom: 12px !important;
            }
            .site-map-nav > div > div:last-child {
                grid-template-columns: repeat(2, 1fr) !important;
                gap: 12px !important;
            }
            
            .site-map-nav .nav-item {
                font-size: 13px !important;
                padding: 14px 10px !important;
                min-height: 50px !important;
            }
        }
    </style>

    <!-- 4-1. 유튜브 재생목록 섹션 (히어로 바로 밑) - YouTube 화면만 -->
    <section id="sermon" class="relative px-4 md:px-8" style="background: #FFFFFF; padding-top: 40px; padding-bottom: 40px;">
        <div class="max-w-6xl mx-auto">
            <!-- 영상 컨테이너 -->
            <div class="relative bg-black rounded-2xl md:rounded-3xl overflow-hidden" style="box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);">
                <!-- 16:9 비율 유지 -->
                <div class="relative w-full" style="padding-bottom: 56.25%;">
                    <iframe 
                        id="youtubePlayer"
                        class="absolute top-0 left-0 w-full h-full"
                        src="" 
                        title="살리는빛부천침례교회 주일설교" 
                        frameborder="0" 
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                        allowfullscreen>
                    </iframe>
                </div>
            </div>
            
            <!-- 하단 정보 - 미니멀 스타일 -->
            <div class="flex flex-col md:flex-row justify-between items-center mt-10 gap-6 fade-in">
                <div class="flex items-center gap-4">
                    <div class="w-12 h-12 bg-red-600 rounded-xl flex items-center justify-center">
                        <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"/>
                        </svg>
                    </div>
                    <div>
                        <p style="font-family: 'Noto Sans KR', sans-serif; font-weight: 500; font-size: 18px; color: #333;">살리는빛부천침례교회</p>
                        <p style="font-family: 'Inter', sans-serif; font-size: 14px; color: #888;">매주 주일예배 설교 업로드</p>
                    </div>
                </div>
                <div class="flex gap-3 flex-wrap">
                    <a href="https://www.youtube.com/@살리는빛부천침례교회?sub_confirmation=1" 
                       target="_blank"
                       style="font-family: 'Inter', sans-serif; font-size: 13px; color: #fff; background: #FF0000; padding: 10px 20px; border-radius: 30px; text-decoration: none; display: flex; align-items: center; gap: 6px; transition: all 0.3s;"
                       onmouseover="this.style.background='#CC0000';"
                       onmouseout="this.style.background='#FF0000';">
                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"/>
                        </svg>
                        구독
                    </a>
                    <a href="https://youtube.com/playlist?list=PL_0QqEAUL4K8E9U3fB8vUX3GZGcR-Yvl_" 
                       target="_blank"
                       style="font-family: 'Noto Sans KR', sans-serif; font-size: 13px; color: #fff; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 10px 20px; border-radius: 30px; text-decoration: none; display: flex; align-items: center; gap: 8px; transition: all 0.3s; box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);"
                       onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 12px rgba(102, 126, 234, 0.4)';"
                       onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 8px rgba(102, 126, 234, 0.3)';">
                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"/>
                        </svg>
                        1분설교
                    </a>
                    <a href="https://www.youtube.com/@살리는빛부천침례교회" 
                       target="_blank"
                       style="font-family: 'Inter', sans-serif; font-size: 13px; color: #666; border: 1px solid #ddd; padding: 10px 20px; border-radius: 30px; text-decoration: none; transition: all 0.3s;"
                       onmouseover="this.style.borderColor='#333'; this.style.color='#333';"
                       onmouseout="this.style.borderColor='#ddd'; this.style.color='#666';">
                        더보기 →
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- 5. 교회 소개 섹션 (Canva 디자인) -->
    <section id="about" class="relative" style="min-height: 100vh; overflow: hidden; margin: 0; padding: 0; border: none; background-color: #000;">
        <!-- 배경 이미지 + 오버레이 -->
        <div class="absolute inset-0 z-0">
            <img src="https://fkqxalcwhqohrkdzwhvv.supabase.co/storage/v1/object/public/media/KakaoTalk_Photo_2025-12-16-19-24-26%20001.jpg" 
                 alt="배경" 
                 loading="lazy"
                 class="w-full h-full object-cover object-center">
            <div class="absolute inset-0" style="background: rgba(0, 0, 0, 0.5);"></div>
        </div>
        
        <!-- 콘텐츠 -->
        <div class="relative z-10 flex flex-col items-center justify-center text-center px-4 md:px-8" style="min-height: 100vh; padding-top: 60px; padding-bottom: 60px;">
            
            <!-- 상단 작은 텍스트 -->
            <p class="text-white text-sm md:text-base tracking-[0.3em] md:tracking-[0.4em] mb-6 md:mb-8" 
               style="font-family: 'Noto Sans KR', sans-serif; font-weight: 300; letter-spacing: 0.4em;">
                살리는 빛 부천교회
            </p>
            
            <!-- 가로선 -->
            <div class="w-full max-w-3xl h-[1px] bg-white opacity-60 mb-8 md:mb-12"></div>
            
            <!-- 큰 영문 제목 -->
            <h2 class="text-white mb-10 md:mb-14" 
                style="font-family: 'Playfair Display', serif; font-weight: 400; font-size: clamp(40px, 8vw, 100px); line-height: 1.1; letter-spacing: -0.02em;">
                Church Introduction
            </h2>
            
            <!-- 본문 텍스트 1 -->
            <p class="text-white text-lg md:text-xl lg:text-2xl mb-2 font-semibold" 
               style="font-family: 'Noto Sans KR', sans-serif; line-height: 1.8;">
                살리는 빛 부천 침례교회는 하나님을 갈망하는 사람들이 모인 공동체입니다.
            </p>
            
            <!-- 본문 텍스트 2 -->
            <p class="text-white text-base md:text-lg lg:text-xl mb-1" 
               style="font-family: 'Noto Sans KR', sans-serif; font-weight: 300; line-height: 1.9;">
                우리는 영감 있는 예배를 통해 하나님을 만나고,
            </p>
            <p class="text-white text-base md:text-lg lg:text-xl mb-1" 
               style="font-family: 'Noto Sans KR', sans-serif; font-weight: 300; line-height: 1.9;">
                성도들과의 사랑의 교제 안에서 서로를 세워갑니다.
            </p>
            <p class="text-white text-base md:text-lg lg:text-xl mb-1" 
               style="font-family: 'Noto Sans KR', sans-serif; font-weight: 300; line-height: 1.9;">
                말씀을 깊이 묵상하며 훈련받아,
            </p>
            <p class="text-white text-base md:text-lg lg:text-xl mb-10 md:mb-14" 
               style="font-family: 'Noto Sans KR', sans-serif; font-weight: 300; line-height: 1.9;">
                교회와 세상을 섬기는 그리스도의 제자로 자라갑니다.
            </p>
            
            <!-- 강조 텍스트 -->
            <p class="text-white text-lg md:text-xl lg:text-2xl font-medium mb-1" 
               style="font-family: 'Noto Sans KR', sans-serif; line-height: 1.8;">
                처음 오시는 분도, 오랜 신앙의 여정을 걸어온 분도,
            </p>
            <p class="text-white text-lg md:text-xl lg:text-2xl font-medium mb-12 md:mb-16" 
               style="font-family: 'Noto Sans KR', sans-serif; line-height: 1.8;">
                이곳에서 함께 하나님을 갈망하며 성장하실 수 있습니다.
            </p>
            
            <!-- 예배 안내 버튼 -->
            <a href="#worship" 
               class="inline-block border-2 border-white text-white px-6 md:px-10 py-2.5 md:py-3 rounded-lg transition-all duration-300 hover:bg-white hover:text-gray-900"
               style="font-family: 'Noto Sans KR', sans-serif; font-weight: 400; font-size: 13px; letter-spacing: 0.5em;">
                예 배 안 내
            </a>
        </div>
    </section>
    
    <section class="category-slider-section" style="margin: 0 !important; padding: 0 !important; border: none !important; background-color: #000000 !important;">
        <div class="category-slider-container" id="categorySlider" style="margin: 0 !important; padding: 5mm 0 !important; background-color: #FFFFFF !important;">
            <!-- 좌측 네비게이션 버튼 -->
            <button class="slider-nav-btn prev" id="sliderPrev" aria-label="이전 슬라이드">
                <span>&lt;</span>
            </button>
            
            <!-- 슬라이더 트랙 -->
            <div class="category-slider-track" id="sliderTrack">
                <!-- 이미지 슬라이드 아이템들 (2세트로 복제하여 무한 루프 구현) -->
                <div class="category-slide-item">
                    <img src="https://fkqxalcwhqohrkdzwhvv.supabase.co/storage/v1/object/public/media/bon1.jpg" alt="Image 1" loading="lazy">
                    <div class="category-overlay"></div>
                </div>
                <div class="category-slide-item">
                    <img src="https://fkqxalcwhqohrkdzwhvv.supabase.co/storage/v1/object/public/media/bon14.jpg" alt="Image 2" loading="lazy">
                    <div class="category-overlay"></div>
                </div>
                <div class="category-slide-item">
                    <img src="https://fkqxalcwhqohrkdzwhvv.supabase.co/storage/v1/object/public/media/bon11.jpg" alt="Image 3" loading="lazy">
                    <div class="category-overlay"></div>
                </div>
                <div class="category-slide-item">
                    <img src="https://fkqxalcwhqohrkdzwhvv.supabase.co/storage/v1/object/public/media/bon15.jpg" alt="Image 4" loading="lazy">
                    <div class="category-overlay"></div>
                </div>
                <div class="category-slide-item">
                    <img src="https://fkqxalcwhqohrkdzwhvv.supabase.co/storage/v1/object/public/media/bon5.jpg" alt="Image 5" loading="lazy">
                    <div class="category-overlay"></div>
                </div>
                <div class="category-slide-item">
                    <img src="https://fkqxalcwhqohrkdzwhvv.supabase.co/storage/v1/object/public/media/bon6.jpg" alt="Image 6" loading="lazy">
                    <div class="category-overlay"></div>
                </div>
                <div class="category-slide-item">
                    <img src="https://fkqxalcwhqohrkdzwhvv.supabase.co/storage/v1/object/public/media/bon8.jpg" alt="Image 7" loading="lazy">
                    <div class="category-overlay"></div>
                </div>
                <div class="category-slide-item">
                    <img src="https://fkqxalcwhqohrkdzwhvv.supabase.co/storage/v1/object/public/media/bon16.jpg" alt="Image 8" loading="lazy">
                    <div class="category-overlay"></div>
                </div>
                <div class="category-slide-item">
                    <img src="https://fkqxalcwhqohrkdzwhvv.supabase.co/storage/v1/object/public/media/bon2.jpg" alt="Image 9" loading="lazy">
                    <div class="category-overlay"></div>
                </div>
                <!-- 2세트 복제 (무한 루프용) -->
                <div class="category-slide-item">
                    <img src="https://fkqxalcwhqohrkdzwhvv.supabase.co/storage/v1/object/public/media/bon1.jpg" alt="Image 1" loading="lazy">
                    <div class="category-overlay"></div>
                </div>
                <div class="category-slide-item">
                    <img src="https://fkqxalcwhqohrkdzwhvv.supabase.co/storage/v1/object/public/media/bon14.jpg" alt="Image 2" loading="lazy">
                    <div class="category-overlay"></div>
                </div>
                <div class="category-slide-item">
                    <img src="https://fkqxalcwhqohrkdzwhvv.supabase.co/storage/v1/object/public/media/bon11.jpg" alt="Image 3" loading="lazy">
                    <div class="category-overlay"></div>
                </div>
                <div class="category-slide-item">
                    <img src="https://fkqxalcwhqohrkdzwhvv.supabase.co/storage/v1/object/public/media/bon15.jpg" alt="Image 4" loading="lazy">
                    <div class="category-overlay"></div>
                </div>
                <div class="category-slide-item">
                    <img src="https://fkqxalcwhqohrkdzwhvv.supabase.co/storage/v1/object/public/media/bon5.jpg" alt="Image 5" loading="lazy">
                    <div class="category-overlay"></div>
                </div>
                <div class="category-slide-item">
                    <img src="https://fkqxalcwhqohrkdzwhvv.supabase.co/storage/v1/object/public/media/bon6.jpg" alt="Image 6" loading="lazy">
                    <div class="category-overlay"></div>
                </div>
                <div class="category-slide-item">
                    <img src="https://fkqxalcwhqohrkdzwhvv.supabase.co/storage/v1/object/public/media/bon8.jpg" alt="Image 7" loading="lazy">
                    <div class="category-overlay"></div>
                </div>
                <div class="category-slide-item">
                    <img src="https://fkqxalcwhqohrkdzwhvv.supabase.co/storage/v1/object/public/media/bon16.jpg" alt="Image 8" loading="lazy">
                    <div class="category-overlay"></div>
                </div>
                <div class="category-slide-item">
                    <img src="https://fkqxalcwhqohrkdzwhvv.supabase.co/storage/v1/object/public/media/bon2.jpg" alt="Image 9" loading="lazy">
                    <div class="category-overlay"></div>
                </div>
            </div>
            
            <!-- 우측 네비게이션 버튼 -->
            <button class="slider-nav-btn next" id="sliderNext" aria-label="다음 슬라이드">
                <span>&gt;</span>
            </button>
        </div>
    </section>

    <!-- 6. 목사님 소개 섹션 (Canva 디자인 99% 정밀 구현 - position absolute) -->
    <section id="pastor" class="pastor-section-canva" style="background-color: #E8E4DE; position: relative; width: 100%; min-height: 100vh; overflow: hidden;">
        <!-- 배경 이미지 레이어 -->
        <div style="position: absolute; inset: 0; pointer-events: none; background-image: url('https://fkqxalcwhqohrkdzwhvv.supabase.co/storage/v1/object/public/media/004.jpg'); background-size: cover; background-position: center; background-repeat: no-repeat; opacity: 0.35; z-index: 0;"></div>
        
        <!-- 배경 오버레이 (텍스트 가독성 향상) -->
        <div style="position: absolute; inset: 0; pointer-events: none; background: linear-gradient(to bottom, rgba(232, 228, 222, 0.55) 0%, rgba(232, 228, 222, 0.45) 100%); z-index: 1;"></div>
        
        <!-- 배경 노이즈 질감 -->
        <div style="position: absolute; inset: 0; pointer-events: none; background-image: url('data:image/svg+xml,%3Csvg viewBox=%220 0 200 200%22 xmlns=%22http://www.w3.org/2000/svg%22%3E%3Cfilter id=%22noiseFilter%22%3E%3CfeTurbulence type=%22fractalNoise%22 baseFrequency=%220.65%22 numOctaves=%223%22 stitchTiles=%22stitch%22/%3E%3C/filter%3E%3Crect width=%22100%25%22 height=%22100%25%22 filter=%22url(%23noiseFilter)%22/%3E%3C/svg%3E'); opacity: 0.04; z-index: 2;"></div>
        
        <!-- ===== [1] 담임목사 제목 (좌측 상단) ===== -->
        <div class="reveal-text" style="position: absolute; left: 10%; top: 18%; z-index: 10;">
            <h2 style="font-family: 'Noto Sans KR', sans-serif; font-weight: 900; font-size: clamp(40px, 4vw, 64px); color: #000000; line-height: 1.0; margin: 0; letter-spacing: -0.02em;">담임목사</h2>
            <p style="font-family: 'Playfair Display', serif; font-weight: 400; font-style: italic; font-size: clamp(24px, 2.2vw, 36px); color: #000000; margin: 8px 0 0 0;">Senior pastor</p>
                    </div>
                    
        <!-- ===== [2] 부천교회 로고 (우측 상단) ===== -->
        <div class="reveal-text" style="position: absolute; right: calc(4% + 152px); top: calc(18% - 38px); text-align: right; z-index: 10;">
            <p style="font-family: 'Noto Sans KR', sans-serif; font-weight: 500; font-size: clamp(12px, 1vw, 16px); color: #000000; margin: 0 0 2px 0; letter-spacing: 0.08em;">부천교회</p>
                        </div>
                        
        <!-- ===== [4] 목사님 사진 (좌측으로 이동) ===== -->
        <div class="pastor-photo-container reveal-text" style="position: absolute; left: 42%; top: 28%; width: 18%; padding: 12px; background: linear-gradient(135deg, rgba(232, 228, 222, 0.8) 0%, rgba(255, 255, 255, 0.9) 50%, rgba(232, 228, 222, 0.8) 100%); border-radius: 16px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12), 0 2px 8px rgba(0, 0, 0, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.6); z-index: 10;">
            <img src="https://fkqxalcwhqohrkdzwhvv.supabase.co/storage/v1/object/public/media/pa.jpg" 
                 alt="담임목사 이영호" 
                 loading="lazy"
                 style="width: 100%; aspect-ratio: 3/4; object-fit: cover; border-radius: 12px; box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15); display: block;">
                            </div>
                            
        <!-- ===== [5] 학력/경력 (사진 오른쪽, 좌측으로 이동해서 붙게) ===== -->
        <div class="pastor-career-text reveal-text" style="position: absolute; left: calc(65% - 38px); bottom: calc(100% - 52% - 190px); width: 28%; font-family: 'Noto Sans KR', sans-serif; color: #000000; font-size: clamp(13.2px, 1.08vw, 18px); line-height: 2.0; display: flex; flex-direction: column; justify-content: flex-end; z-index: 10;">
            <p style="margin: 0;">•충남대학교 법과대학 행정학과 졸업</p>
            <p style="margin: 0;">•한국침례신학대학교 신학대학원 졸업 (M.Div.)</p>
            <p style="margin: 0;">•한국침례신학대학교 대학원 신약 전공 (Th.M.)</p>
            <p style="margin: 0 0 0.8em 0;">•에스라성경대학원대학교 박사 (D.Litt.)</p>
            <p style="margin: 0;">한국침례신학대학교 실천신학 교수</p>
            <p style="margin: 0;">한국 복음주의 실천신학회 회원</p>
            <p style="margin: 0;">(전)대전대흥침례교회 부목사</p>
                            </div>
        
        <!-- ===== [2] 인사말 텍스트 (좌측, 제목 아래 - 우측으로 당김) ===== -->
        <div class="pastor-greeting-text reveal-text" style="position: absolute; left: 10%; top: calc(26% + 76px); bottom: calc(100% - 52%); width: 36%; font-family: 'Noto Sans KR', sans-serif; color: #000000; font-size: clamp(16.8px, 1.32vw, 21.6px); line-height: 2.2; z-index: 10;">
            <p style="margin: 0;">환영합니다.</p>
            <p style="margin: 0;">살리는빛부천침례교회 담임목사 이영호입니다.</p>
            <p style="margin: 0;">우리 교회는 하나님을 갈망하는 사람들의 공동체입니다.</p>
            <p style="margin: 0;">영감 있는 예배로 하나님을 만나고,</p>
            <p style="margin: 0;">사랑의 교제로 서로를 세우며,</p>
            <p style="margin: 0;">말씀 묵상으로 훈련받아 세상을 섬깁니다.</p>
            <p style="margin: 0; font-weight: 700;">신앙의 여정에서 동행할 공동체를 찾고 계시다면,</p>
            <p style="margin: 0; font-weight: 700;">우리 교회의 문은 언제나 열려 있습니다.</p>
            <p style="margin: 0;">함께 하나님을 갈망하며 성장해 가길 소망합니다.</p>
                            </div>
        
        <!-- ===== [6] 서명 (사진 아래 중앙에 배치 - 사진 위치에 맞춤) ===== -->
        <div class="reveal-text" style="position: absolute; left: 51%; top: calc(58% + 38px + 76px + 38px); transform: translateX(-50%); display: flex; align-items: center; gap: clamp(12px, 1.5vw, 24px); z-index: 10;">
            <div style="text-align: left;">
                <p style="font-family: 'Playfair Display', serif; font-weight: 700; font-size: clamp(14px, 1.1vw, 18px); color: #000000; margin: 0; line-height: 1.3;">Pastor</p>
                <p style="font-family: 'Playfair Display', serif; font-weight: 700; font-size: clamp(16px, 1.3vw, 22px); color: #000000; margin: 0; line-height: 1.3;">Lee Young-ho</p>
                </div>
            <p style="font-family: 'Noto Sans KR', sans-serif; font-weight: 900; font-size: clamp(32px, 3.2vw, 52px); color: #000000; margin: 0; letter-spacing: 0.12em;">이영호</p>
            </div>
            
        <!-- ===== [7] 점선 구분선 (맨 하단) ===== -->
        <div style="position: absolute; left: 4%; bottom: 5%; width: 92%; border-top: 1.5px dashed #B8B4AC; z-index: 10;"></div>
    </section>

    <!-- 4. 대형 문구 섹션 - 비전 (Canva 디자인 99% 정밀 구현) -->
    <section id="vision" style="width: 100%; background-color: #FFFFFF; padding: 50px 20px 55px 20px; margin: 0;">
        <div style="width: 100%; max-width: 1200px; margin: 0 auto; display: flex; flex-direction: column; align-items: center; text-align: center;">
            
            <!-- [1] 메인 타이틀 -->
            <h2 class="reveal-text" style="
                font-family: 'Noto Sans KR', sans-serif;
                font-weight: 900;
                font-size: clamp(24px, 4vw, 48px);
                line-height: 1.3;
                letter-spacing: 0.02em;
                color: #000000;
                margin: 0 0 28px 0;
                padding: 0 15px;
                ">
                우리가 가장 소중히 여기는 세 가지 가치가 있습니다.
            </h2>
            
            <!-- [2] 영문 서브타이틀 - 세리프체 -->
            <p style="
                font-family: 'Playfair Display', serif;
                font-weight: 400;
                font-size: clamp(20px, 2.5vw, 32px);
                color: #000000;
                margin: 0 0 28px 0;
                letter-spacing: 0.05em;
            ">
                Three values
            </p>
            
            <!-- [3] 설명 텍스트 (세 가지 가치에 대한 내용) -->
            <p id="introStatement" class="reveal-text" style="
                font-family: 'Noto Sans KR', sans-serif;
                font-weight: 300;
                font-size: clamp(16px, 2vw, 24px);
                line-height: 1.2;
                color: #000000;
                margin: 0;
                padding: 0 15px;
                white-space: pre-line;
            ">하나님의 말씀을 중심으로 한 <strong style="font-weight: 700; font-size: 1.3em; color: #FFB800;">성경적 가치</strong>, 서로를 아끼고 돌보는 <strong style="font-weight: 700; font-size: 1.3em; color: #FF6B6B;">사랑의 공동체</strong>,<br>
지역사회에 그리스도의 사랑을 전하는 <strong style="font-weight: 700; font-size: 1.3em; color: #87CEEB;">섬김과 전도의 사명</strong>을 우리의 핵심 가치로 삼습니다.</p>
            
        </div>
    </section>

    <!-- 6. ⭐ 가로 스크롤 서비스 카드 섹션 -->
    <section id="worship" class="horizontal-scroll-container">
        <div class="horizontal-scroll-wrapper">
            <div class="horizontal-track" id="horizontalTrack">
                
                <!-- 카드 01 - 성경적 가치 -->
                <div class="service-card flex flex-col md:flex-row items-center justify-between" style="background-color: #FFB800;">
                    <div class="w-full md:w-1/2 md:pr-12 mb-6 md:mb-0">
                        <div class="service-number">01</div>
                        <h2 class="text-3xl md:text-6xl font-bold mt-4 md:mt-8 mb-4 md:mb-6">성경적 가치</h2>
                        <p class="text-base md:text-xl leading-relaxed opacity-90">
                            하나님의 말씀은 우리 삶의 유일한 기준입니다.<br class="hidden md:block">
                            성경의 진리 위에 서서 세상의 가치가 아닌,<br class="hidden md:block">
                            하나님 나라의 가치를 따라 살아가는 공동체입니다.
                        </p>
                    </div>
                    <div class="w-full md:w-1/2 flex justify-center items-center mt-4 md:mt-0">
                        <img src="https://images.unsplash.com/photo-1504052434569-70ad5836ab65?w=1000&q=80" 
                             alt="성경적 가치" 
                             class="w-full max-w-[400px] md:max-w-[650px] aspect-square object-cover rounded-3xl shadow-2xl">
                    </div>
                </div>

                <!-- 카드 02 - 사랑의 공동체 -->
                <div class="service-card flex flex-col md:flex-row items-center justify-between" style="background-color: #FF6B6B;">
                    <div class="w-full md:w-1/2 flex justify-center items-center mb-6 md:mb-0 order-2 md:order-1">
                        <img src="https://images.unsplash.com/photo-1529156069898-49953e39b3ac?w=1000&q=80" 
                             alt="사랑의 공동체" 
                             class="w-full max-w-[400px] md:max-w-[650px] aspect-square object-cover rounded-3xl shadow-2xl">
                    </div>
                    <div class="w-full md:w-1/2 md:pl-12 order-1 md:order-2">
                        <div class="service-number" style="margin-bottom: 30px;">02</div>
                        <h2 class="text-3xl md:text-6xl font-bold mb-4 md:mb-6" style="margin-top: 0;">사랑의 공동체</h2>
                        <p class="text-base md:text-xl leading-relaxed opacity-90">
                            서로를 아끼고 돌보는 따뜻한 공동체입니다.<br class="hidden md:block">
                            기쁨과 아픔을 함께 나누며, 서로를 격려하고 세워갑니다.<br class="hidden md:block">
                            진정한 영적 가족 안에서 그리스도의 사랑을 경험합니다.
                        </p>
                    </div>
                </div>

                <!-- 카드 03 - 섬김과 전도의 사명 -->
                <div class="service-card flex flex-col md:flex-row items-center justify-between" style="background-color: #87CEEB;">
                    <div class="w-full md:w-1/2 md:pr-12 mb-6 md:mb-0">
                        <div class="service-number" style="margin-bottom: 30px;">03</div>
                        <h2 class="text-3xl md:text-6xl font-bold mb-4 md:mb-6" style="margin-top: 0;">섬김과 전도</h2>
                        <p class="text-base md:text-xl leading-relaxed opacity-90">
                            지역사회에 그리스도의 사랑을 전합니다.<br class="hidden md:block">
                            이웃을 섬기고 복음을 나누는 사명을 감당하며,<br class="hidden md:block">
                            세상을 향한 빛과 소금의 역할을 다합니다.
                        </p>
                    </div>
                    <div class="w-full md:w-1/2 flex justify-center items-center mt-4 md:mt-0">
                        <img src="https://images.unsplash.com/photo-1522202176988-66273c2fd55f?w=1000&q=80" 
                             alt="섬김과 전도" 
                             class="w-full max-w-[400px] md:max-w-[650px] aspect-square object-cover rounded-3xl shadow-2xl">
                    </div>
                </div>
                
            </div>
        </div>
    </section>

    <!-- 8. 특징 섹션 (Canva 레퍼런스 99% 구현) -->
    <section id="features" class="relative bg-white overflow-hidden" style="padding: 60px 5% 80px 5%;">
        <!-- 구름 패턴 -->
        <div class="absolute inset-0 opacity-20">
            <div class="absolute top-20 left-20 w-96 h-96 bg-white rounded-full blur-3xl"></div>
            <div class="absolute bottom-40 right-40 w-96 h-96 bg-white rounded-full blur-3xl"></div>
            <div class="absolute top-60 right-20 w-80 h-80 bg-white rounded-full blur-3xl"></div>
        </div>
        <div class="relative max-w-[1400px] mx-auto">
            
            <!-- 상단 대형 영문 타이틀 -->
            <div style="margin-bottom: 60px;">
                <h2 style="
                    font-family: 'Inter', sans-serif;
                    font-weight: 900;
                    font-size: clamp(36px, 6vw, 72px);
                    line-height: 1.05;
                    color: #000000;
                    letter-spacing: -0.02em;
                    margin: 0;
                ">
                    COME AS YOU ARE, GROW TOGETHER<br>
                    TOGETHER IN LIGHT AND LOVE
                </h2>
            </div>
            
            <!-- 메인 컨텐츠 그리드 -->
            <div class="relative" style="min-height: 500px;">
                <div class="grid grid-cols-12 gap-8 items-end">
                    
                    <!-- 좌측 이미지 (세로로 긴 이미지) -->
                    <div class="col-span-12 md:col-span-4">
                        <img src="https://fkqxalcwhqohrkdzwhvv.supabase.co/storage/v1/object/public/media/2.jpg" 
                             alt="교회 이미지" 
                             class="w-full object-cover"
                             style="height: 500px;">
                </div>
                    
                    <!-- 중앙 텍스트 영역 -->
                    <div class="col-span-12 md:col-span-5 flex flex-col" style="padding-top: 0;">
                        
                        <!-- 우리와 함께해요 (Figma 디자인 반영) -->
                        <div style="
                            font-family: 'Noto Sans KR', sans-serif;
                            font-weight: 700;
                            font-size: clamp(32px, 3.5vw, 40px);
                            line-height: 1.407;
                            color: #000000;
                            margin: 0 0 40px 0;
                        ">
                            <div style="margin: 0; padding: 0;">우리와</div>
                            <div style="margin: 0; padding: 0; color: #FF0000;">함께해요</div>
                        </div>
                        
                        <!-- 한글 설명 텍스트 (Figma 디자인 반영) -->
                        <div style="
                            font-family: 'Inter', sans-serif;
                            font-weight: 400;
                            font-size: clamp(18px, 1.8vw, 20px);
                            line-height: 1.8;
                            color: #000000;
                        ">
                            <p style="margin: 0 0 0 0; white-space: pre-line;">당신의 예배가 습관이 아닌 만남이 되길 원합니다.
혼자 걷는 신앙은 외롭습니다.
함께 웃고, 나누고, 서로를 위해 기도하는
공동체 안에서 진짜 가족을 만나보세요.
매일 말씀 앞에 서는 훈련, 함께하면
더 멀리 갈 수 있습니다.
당신의 믿음이 깊어지고 삶이 변화되는 여정,
우리와 함께 걸어가실래요?</p>
                </div>
                </div>
                    
                    <!-- 우측 이미지 (작은 이미지) -->
                    <div class="col-span-12 md:col-span-3 flex justify-end">
                        <img src="https://fkqxalcwhqohrkdzwhvv.supabase.co/storage/v1/object/public/media/1.jpg" 
                             alt="교회 이미지" 
                             class="object-cover"
                             style="width: 380px; height: 380px;">
        </div>
        
                </div>
                </div>
                </div>
    </section>

    <!-- 7. 대형 인용문 섹션 -->
    <section class="py-20 bg-gray-100" style="padding-left: 80px; padding-right: 80px;">
        <div class="max-w-4xl mx-auto">
            <div class="text-center reveal-text visible">
                <p id="quoteStatement" style="
                    font-family: 'Noto Sans KR', sans-serif;
                    font-weight: 300;
                    font-size: clamp(24px, 3vw, 42px);
                    line-height: 1.6;
                    color: #2D2D2D;
                    margin: 0;
                    letter-spacing: 0.02em;
                ">
                    너희는 세상의 빛이라<br>
                    산 위에 있는 동네가 숨겨지지 못할 것이요
                </p>
                <p style="
                    font-family: 'Noto Sans KR', sans-serif;
                    font-weight: 400;
                    font-size: clamp(14px, 1.2vw, 18px);
                    color: #666;
                    margin-top: 20px;
                    letter-spacing: 0.05em;
                ">
                    — 마태복음 5:14
                </p>
            </div>
        </div>
    </section>

    <!-- 10. ⭐ 스택 카드 간증 섹션 -->
    <section id="testimonials" class="stacking-cards-container bg-white">
        <div class="stacking-cards-wrapper" id="stackingCardsWrapper">
            <!-- 좌측 타이틀 -->
            <div class="testimonial-title-box" style="position: absolute; left: 15%; top: 50%; transform: translateY(-50%); z-index: 10; width: 30%; max-width: 450px; padding-left: 60px; padding-right: 30px; box-sizing: border-box;">
                <img src="https://fkqxalcwhqohrkdzwhvv.supabase.co/storage/v1/object/public/media/3.jpg" 
                     alt="간증 섹션 이미지" 
                     class="mb-8 object-cover"
                     style="width: 100%; max-width: 400px; height: auto; border-radius: 8px;">
                <p class="text-gray-400 text-base tracking-widest mb-6 testimonial-fade" style="animation-delay: 0s;">TESTIMONIALS</p>
                <h2 class="font-bold leading-tight text-gray-900" style="font-size: clamp(48px, 6vw, 80px); line-height: 1.15; word-break: keep-all;">
                    <span class="testimonial-slide" style="display: inline-block; animation-delay: 0.2s; white-space: nowrap;">성도님들의</span><br>
                    <span class="testimonial-slide" style="display: inline-block; color: #FFB800; animation-delay: 0.4s; white-space: nowrap;">살아있는</span><br>
                    <span class="testimonial-slide" style="display: inline-block; animation-delay: 0.6s; white-space: nowrap;">간증</span>
                </h2>
                <div class="w-20 h-1.5 bg-gray-900 mt-10 testimonial-line"></div>
            </div>
            
            <!-- 카드 1 (이주희 성도) - 노랑 (맨 위) -->
            <div class="stack-card" id="stackCard1" style="background-color: #FFB800;">
                <div class="flex justify-between items-start mb-10">
                    <div class="text-6xl font-bold" style="font-size: 64px;">이</div>
                    <img src="https://fkqxalcwhqohrkdzwhvv.supabase.co/storage/v1/object/public/media/KakaoTalk_Photo_2025-12-16-19-22-45.jpg" 
                         alt="이주희 성도" 
                         loading="lazy"
                         style="width: 140px; height: 140px; border-radius: 16px; object-fit: cover;">
                </div>
                <blockquote class="text-base font-normal leading-relaxed mb-12" style="font-size: 16px; line-height: 1.6; flex: 1; margin-top: 16px;">
                    "주님께서 사랑으로 인도하시는 교회 안에서 성도들이 서로 사랑하고 서로를 세워주는 공동체입니다. 이곳에서 저는 혼자보다 함께할 때 더 기쁨이 있음을 배우게 되었습니다."
                </blockquote>
                <div>
                    <div class="text-xl font-bold" style="font-size: 20px;">이주희</div>
                    <div class="text-sm opacity-80" style="font-size: 14px;">성도</div>
                </div>
            </div>

            <!-- 카드 2 (고이경 셀리더) - 빨강 (중간) -->
            <div class="stack-card" id="stackCard2" style="background-color: #FF6B6B;">
                <div class="flex justify-between items-start mb-10">
                    <div class="text-6xl font-bold" style="font-size: 64px;">고</div>
                    <img src="https://fkqxalcwhqohrkdzwhvv.supabase.co/storage/v1/object/public/media/KakaoTalk_Photo_2025-12-16-19-23-41.jpg" 
                         alt="고이경 셀리더" 
                         loading="lazy"
                         style="width: 140px; height: 140px; border-radius: 16px; object-fit: cover;">
                </div>
                <blockquote class="text-base font-normal leading-relaxed mb-12" style="font-size: 16px; line-height: 1.6; flex: 1; margin-top: 16px;">
                    "우리 교회는 주님을 사랑하며 서로를 위해 기도하는 믿음의 공동체입니다. 각자의 삶의 자리에서 주님을 찾고, 매일의 묵상을 통해 믿음으로 승리하는 교회입니다."
                </blockquote>
                <div>
                    <div class="text-xl font-bold" style="font-size: 20px;">고이경</div>
                    <div class="text-sm opacity-80" style="font-size: 14px;">셀리더</div>
                </div>
            </div>

            <!-- 카드 3 (김지수 집사) - 하늘색 -->
            <div class="stack-card" id="stackCard3" style="background-color: #87CEEB;">
                <div class="flex justify-between items-start mb-10">
                    <div class="text-6xl font-bold" style="font-size: 64px;">김</div>
                    <img src="https://fkqxalcwhqohrkdzwhvv.supabase.co/storage/v1/object/public/media/KakaoTalk_Photo_2025-12-16-19-23-52.jpg" 
                         alt="김지수 집사" 
                         loading="lazy"
                         style="width: 140px; height: 140px; border-radius: 16px; object-fit: cover;">
                </div>
                <blockquote class="text-base font-normal leading-relaxed mb-12" style="font-size: 16px; line-height: 1.6; flex: 1; margin-top: 16px;">
                    "성경중심의 설교로 귀에 쏙쏙 박혀 삶에 적용할수 있게 말씀해 주십니다. 가끔 목사님께서 실질적으로 경험하신 이야기도 재미있게 해주셔서 집중도 잘되고 지금 하신 말씀이 정말 나에게 해주시는 말씀처럼 살아움직입니다. 직접 작사하신 찬양을 불러주실때는 얼굴에 빛이나는 집중을 안할수 없게 만드는 설교 입니다."
                </blockquote>
                <div>
                    <div class="text-xl font-bold" style="font-size: 20px;">김지수</div>
                    <div class="text-sm opacity-80" style="font-size: 14px;">집사</div>
                </div>
            </div>

            <!-- 카드 4 (백현준 형제) - 연두색 (맨 아래) -->
            <div class="stack-card" id="stackCard4" style="background-color: #90EE90;">
                <div class="flex justify-between items-start mb-10">
                    <div class="text-6xl font-bold" style="font-size: 64px;">백</div>
                    <img src="https://fkqxalcwhqohrkdzwhvv.supabase.co/storage/v1/object/public/media/KakaoTalk_Photo_2025-12-16-19-24-00.jpg" 
                         alt="백현준 형제" 
                         loading="lazy"
                         style="width: 140px; height: 140px; border-radius: 16px; object-fit: cover;">
                </div>
                <blockquote class="text-base font-normal leading-relaxed mb-12" style="font-size: 16px; line-height: 1.6; flex: 1; margin-top: 16px;">
                    ""수고하고 무거운 짐 진 자들아 다 내게로 오라" 주님의 초대처럼 부천교회는 지친 마음을 안고 와도 괜찮은 곳입니다. 억지로 애쓰지 않아도 되고 있는 모습 그대로 와서 쉴 수 있습니다. 예배와 교제 가운데 굳어 있던 마음이 풀어지고 따뜻한 교제와 기도를 통해 다시 걸어갈 힘을 얻게 됩니다."
                </blockquote>
                <div>
                    <div class="text-xl font-bold" style="font-size: 20px;">백현준</div>
                    <div class="text-sm opacity-80" style="font-size: 14px;">형제</div>
                </div>
            </div>
            
            <!-- 카드 5 (박윤경 성도) - 보라색 (사진 없음) -->
            <div class="stack-card" id="stackCard5" style="background-color: #DDA0DD;">
                <div class="flex justify-start items-start mb-10">
                    <div class="text-6xl font-bold" style="font-size: 64px;">박</div>
                </div>
                <blockquote class="text-base font-normal leading-relaxed mb-12" style="font-size: 16px; line-height: 1.6; flex: 1; margin-top: 16px;">
                    "매주 화요일 저녁 성경공부를 하고 있는데 그동안 나태해졌던 신앙생활을 바로잡는 큰 계기가 되었던 것 같아요. 매일 성경 말씀을 읽게 되며, 그동안 몰랐던 새로운 지식들도 알게 되어 신앙심이 더 깊어지게 되었어요. 특히 성경공부를 하면서 예수님을 영접하게 되어서 너무 기쁜 마음이에요! 자칫 지루할수도 있는 공부 시간을 재밌고 귀에 쏙쏙 들어오게 가르쳐주셔서 매주 화요일 저녁이 기다려지게 된답니다 너무 감사드려요!!"
                </blockquote>
                <div>
                    <div class="text-xl font-bold" style="font-size: 20px;">박윤경</div>
                    <div class="text-sm opacity-80" style="font-size: 14px;">성도</div>
                </div>
            </div>
            
        </div>
    </section>

    <!-- 10.5. 예배시간 안내 섹션 (빈티지/클래식 스타일) -->
    <section id="worship-times" class="worship-section">
        <div class="worship-bg"></div>
        
        <div class="worship-content">
            <!-- 상단 장식 -->
            <div class="ornament-top">✦</div>
            
            <!-- 제목 -->
            <h2 class="worship-title">WORSHIP</h2>
            <div class="divider">
                <span class="line"></span>
                <span class="text">예배시간</span>
                <span class="line"></span>
            </div>
            
            <!-- 예배 시간 목록 -->
            <div class="worship-list" id="worship-times-container">
                <!-- 동적으로 로드됨 -->
            </div>
            
            <!-- 하단 장식 -->
            <div class="ornament-bottom">
                ─── ✦ ───
            </div>
        </div>
    </section>

    <!-- 12.5. 공지사항 섹션 (레퍼런스 99% 구현 + 캐러셀) -->
    <section id="notice" class="relative py-20 px-8" style="background-color: #EFEAE3; position: relative; overflow: visible; padding-top: 80px; padding-bottom: 80px;">
        <!-- 배경 질감 -->
        <div style="position: absolute; inset: 0; pointer-events: none; background-image: url('data:image/svg+xml,%3Csvg viewBox=%220 0 200 200%22 xmlns=%22http://www.w3.org/2000/svg%22%3E%3Cfilter id=%22noiseFilter%22%3E%3CfeTurbulence type=%22fractalNoise%22 baseFrequency=%220.65%22 numOctaves=%223%22 stitchTiles=%22stitch%22/%3E%3C/filter%3E%3Crect width=%22100%25%22 height=%22100%25%22 filter=%22url(%23noiseFilter)%22/%3E%3C/svg%3E'); opacity: 0.15;"></div>
        
        <!-- 잎사귀 그림자 효과 -->
        <div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; opacity: 0.1;">
            <div style="position: absolute; top: 10%; left: 5%; width: 200px; height: 200px; background: radial-gradient(ellipse, rgba(0,0,0,0.1) 0%, transparent 70%); border-radius: 50%; filter: blur(40px);"></div>
            <div style="position: absolute; top: 20%; right: 10%; width: 150px; height: 150px; background: radial-gradient(ellipse, rgba(0,0,0,0.08) 0%, transparent 70%); border-radius: 50%; filter: blur(30px);"></div>
        </div>
        
        <div class="max-w-7xl mx-auto relative z-10">
            <!-- 섹션 헤더 -->
            <div class="text-center mb-16">
                <p class="text-gray-500 text-sm tracking-widest mb-3" style="font-family: 'Noto Sans KR', sans-serif;">NOTICE</p>
                <h2 class="text-3xl md:text-4xl font-bold mb-4" style="font-family: 'Noto Sans KR', sans-serif; color: #2D2D2D;">공지사항</h2>
            </div>
            
            <!-- 캐러셀 컨테이너 -->
            <div class="notice-carousel-container relative" style="position: relative;">
                <!-- 좌측 화살표 -->
                <button class="notice-carousel-btn notice-carousel-prev" style="position: absolute; left: -60px; top: 50%; transform: translateY(-50%); z-index: 20; width: 48px; height: 48px; border-radius: 50%; background-color: #FFFFFF; border: 2px solid #E0E0E0; cursor: pointer; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 8px rgba(0,0,0,0.1); transition: all 0.3s;" onmouseover="this.style.backgroundColor='#F5F5F5'; this.style.borderColor='#2D2D2D';" onmouseout="this.style.backgroundColor='#FFFFFF'; this.style.borderColor='#E0E0E0';">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#2D2D2D" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M15 18l-6-6 6-6"/>
                    </svg>
                    </button>
                
                <!-- 카드 스크롤 영역 -->
                <div class="notice-carousel-wrapper" style="overflow: hidden; position: relative; padding: 20px 20px;">
                    <div id="notice-carousel-track" class="notice-carousel-track" style="display: flex; gap: 24px; transition: transform 0.5s ease;">
                        <!-- 동적으로 로드됨 -->
                    </div>
                </div>
                
                <!-- 우측 화살표 -->
                <button class="notice-carousel-btn notice-carousel-next" style="position: absolute; right: -60px; top: 50%; transform: translateY(-50%); z-index: 20; width: 48px; height: 48px; border-radius: 50%; background-color: #FFFFFF; border: 2px solid #E0E0E0; cursor: pointer; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 8px rgba(0,0,0,0.1); transition: all 0.3s;" onmouseover="this.style.backgroundColor='#F5F5F5'; this.style.borderColor='#2D2D2D';" onmouseout="this.style.backgroundColor='#FFFFFF'; this.style.borderColor='#E0E0E0';">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#2D2D2D" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M9 18l6-6-6-6"/>
                    </svg>
                    </button>
            </div>
            
            <!-- 페이지네이션 -->
            <div id="notice-pagination" class="notice-pagination" style="display: flex; justify-content: center; align-items: center; gap: 8px; margin-top: 32px; flex-wrap: wrap;">
                <!-- 페이지 번호가 여기에 동적으로 추가됩니다 -->
            </div>
        </div>
    </section>
    
    <script>
        // 공지사항 페이지네이션 기능
        let noticeCarouselTrack = null;
        let noticeCurrentPage = 1;
        let noticeItemsPerPage = 3;
        let noticeAllData = [];
        
        function initNoticeCarousel() {
            noticeCarouselTrack = document.querySelector('.notice-carousel-track');
            if (!noticeCarouselTrack) return;
            
            // 화살표 버튼 이벤트
            document.querySelector('.notice-carousel-prev')?.addEventListener('click', () => {
                goToNoticePage(noticeCurrentPage - 1);
            });
            
            document.querySelector('.notice-carousel-next')?.addEventListener('click', () => {
                goToNoticePage(noticeCurrentPage + 1);
            });
        }
        
        function updateNoticeCarousel() {
            if (!noticeCarouselTrack) return;
            
            const totalPages = Math.ceil(noticeAllData.length / noticeItemsPerPage);
            noticeCurrentPage = Math.min(noticeCurrentPage, totalPages || 1);
            noticeCurrentPage = Math.max(noticeCurrentPage, 1);
            
            const startIndex = (noticeCurrentPage - 1) * noticeItemsPerPage;
            const endIndex = startIndex + noticeItemsPerPage;
            const pageData = noticeAllData.slice(startIndex, endIndex);
            
            // 카드 렌더링
            noticeCarouselTrack.innerHTML = pageData.map((item, localIndex) => {
                const globalIndex = startIndex + localIndex;
                const fullContent = item.content || '';
                const lines = fullContent.split('\n').filter(l => l.trim());
                const previewLines = lines.slice(0, 3);
                const hasMore = lines.length > 3;
                const dateStr = formatHandwrittenDate(item.created_at || item.updated_at);
                
                return `
                    <div class="notice-card clickable-card" 
                         data-index="${globalIndex}"
                         onclick="openNoticeModalFromData(${globalIndex})"
                         style="min-width: 380px; max-width: 380px; height: 320px; background-color: #FEFEFE; border-radius: 16px; padding: 32px; box-shadow: 0 8px 32px rgba(0,0,0,0.15), 0 4px 16px rgba(0,0,0,0.1); position: relative; flex-shrink: 0; cursor: pointer; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); display: flex; flex-direction: column; margin: 20px 0;" 
                         onmouseover="this.style.transform='translateY(-8px)'; this.style.boxShadow='0 16px 48px rgba(0,0,0,0.25), 0 8px 24px rgba(0,0,0,0.15)';"
                         onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 8px 32px rgba(0,0,0,0.15), 0 4px 16px rgba(0,0,0,0.1)';">
                        <div style="position: absolute; inset: 0; border-radius: 16px; pointer-events: none; background-image: url('data:image/svg+xml,%3Csvg viewBox=%220 0 200 200%22 xmlns=%22http://www.w3.org/2000/svg%22%3E%3Cfilter id=%22noiseFilter%22%3E%3CfeTurbulence type=%22fractalNoise%22 baseFrequency=%220.9%22 numOctaves=%225%22 stitchTiles=%22stitch%22/%3E%3C/filter%3E%3Crect width=%22100%25%22 height=%22100%25%22 filter=%22url(%23noiseFilter)%22/%3E%3C/svg%3E'); opacity: 0.3; mix-blend-mode: multiply;"></div>
                        <div style="position: absolute; inset: 0; border-radius: 16px; pointer-events: none; background: linear-gradient(135deg, rgba(255,255,255,0.15) 0%, rgba(0,0,0,0.03) 100%);"></div>
                        <div style="position: relative; z-index: 1; margin-bottom: 20px;">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
                                <h3 style="font-family: 'Noto Sans KR', sans-serif; font-weight: 700; font-size: 28px; color: #2D2D2D; letter-spacing: 0.05em; margin: 0; text-transform: uppercase;">NOTICE</h3>
                                ${dateStr ? `<p style="font-family: 'Nanum Pen Script', cursive; font-size: 16px; color: #8B7355; margin: 0; transform: rotate(-2deg); font-weight: 400; letter-spacing: 0.5px;">${dateStr}</p>` : ''}
                            </div>
                            <div style="width: 100%; height: 1px; background-color: #2D2D2D; margin-top: 8px;"></div>
                        </div>
                        <div style="position: relative; z-index: 1; flex: 1; overflow: hidden; margin-bottom: 16px;">
                            ${previewLines.map(line => `<p style="font-family: 'Noto Sans KR', sans-serif; font-weight: 400; font-size: 16px; color: #4A4A4A; line-height: 1.8; margin: 0 0 12px 0;">${line.replace(/</g, '&lt;').replace(/>/g, '&gt;')}</p>`).join('')}
                            ${hasMore ? '<p style="font-family: \'Noto Sans KR\', sans-serif; font-weight: 400; font-size: 14px; color: #888888; margin: 8px 0 0 0; font-style: italic;">... 더 보기</p>' : ''}
                        </div>
                        <div style="position: relative; z-index: 1; margin-top: auto;">
                            <p style="font-family: 'Noto Sans KR', sans-serif; font-weight: 400; font-size: 12px; color: #888888; font-style: italic; margin: 0;">@bucheonchurch</p>
                        </div>
                        <div style="position: absolute; bottom: 20px; right: 20px; width: 80px; height: 80px; z-index: 1; opacity: 0.6;">
                            <svg viewBox="0 0 100 100" style="width: 100%; height: 100%;">
                                <path d="M50 80 Q40 60 35 50 Q30 40 25 30 Q20 20 15 15 Q10 10 10 5" stroke="#4A4A4A" stroke-width="1.5" fill="none" stroke-linecap="round"/>
                                <path d="M35 50 Q30 35 25 25" stroke="#4A4A4A" stroke-width="1.5" fill="none" stroke-linecap="round"/>
                                <ellipse cx="25" cy="25" rx="8" ry="12" fill="none" stroke="#4A4A4A" stroke-width="1.5"/>
                                <ellipse cx="15" cy="15" rx="6" ry="10" fill="none" stroke="#4A4A4A" stroke-width="1.5"/>
                            </svg>
                        </div>
                    </div>
                `;
            }).join('');
            
            // 페이지네이션 업데이트
            updateNoticePagination(totalPages);
            updateNoticeNavButtons();
        }
        
        function updateNoticePagination(totalPages) {
            const paginationEl = document.getElementById('notice-pagination');
            if (!paginationEl) return;
            
            if (totalPages <= 1) {
                paginationEl.innerHTML = '';
                return;
            }
            
            const maxVisiblePages = 5;
            let startPage = Math.max(1, noticeCurrentPage - Math.floor(maxVisiblePages / 2));
            let endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);
            
            if (endPage - startPage < maxVisiblePages - 1) {
                startPage = Math.max(1, endPage - maxVisiblePages + 1);
            }
            
            let paginationHTML = '';
            
            if (startPage > 1) {
                paginationHTML += `<button onclick="goToNoticePage(${startPage - 1})" style="padding: 8px 12px; border: 1px solid #ddd; background: white; color: #333; border-radius: 4px; cursor: pointer; font-family: 'Noto Sans KR', sans-serif; font-size: 14px;" onmouseover="this.style.backgroundColor='#f5f5f5';" onmouseout="this.style.backgroundColor='white';">‹</button>`;
            }
            
            for (let i = startPage; i <= endPage; i++) {
                const isActive = i === noticeCurrentPage;
                paginationHTML += `<button onclick="goToNoticePage(${i})" style="padding: 8px 12px; border: 1px solid ${isActive ? '#333' : '#ddd'}; background: ${isActive ? '#333' : 'white'}; color: ${isActive ? '#fff' : '#333'}; border-radius: 4px; cursor: pointer; font-family: 'Noto Sans KR', sans-serif; font-size: 14px; font-weight: ${isActive ? '600' : '400'};" onmouseover="if(!${isActive}) { this.style.backgroundColor='#f5f5f5'; }" onmouseout="if(!${isActive}) { this.style.backgroundColor='white'; }">${i}</button>`;
            }
            
            if (endPage < totalPages) {
                paginationHTML += `<button onclick="goToNoticePage(${endPage + 1})" style="padding: 8px 12px; border: 1px solid #ddd; background: white; color: #333; border-radius: 4px; cursor: pointer; font-family: 'Noto Sans KR', sans-serif; font-size: 14px;" onmouseover="this.style.backgroundColor='#f5f5f5';" onmouseout="this.style.backgroundColor='white';">›</button>`;
            }
            
            paginationEl.innerHTML = paginationHTML;
        }
        
        function goToNoticePage(page) {
            noticeCurrentPage = page;
            updateNoticeCarousel();
            document.getElementById('notice').scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
        
        function updateNoticeNavButtons() {
            const totalPages = Math.ceil(noticeAllData.length / noticeItemsPerPage);
            const prevBtn = document.querySelector('.notice-carousel-prev');
            const nextBtn = document.querySelector('.notice-carousel-next');
            
            if (prevBtn) {
                if (noticeCurrentPage <= 1) {
                    prevBtn.style.opacity = '0.5';
                    prevBtn.style.pointerEvents = 'none';
                } else {
                    prevBtn.style.opacity = '1';
                    prevBtn.style.pointerEvents = 'auto';
                }
            }
            
            if (nextBtn) {
                if (noticeCurrentPage >= totalPages) {
                    nextBtn.style.opacity = '0.5';
                    nextBtn.style.pointerEvents = 'none';
                } else {
                    nextBtn.style.opacity = '1';
                    nextBtn.style.pointerEvents = 'auto';
                }
            }
        }
        
        
        // 페이지 로드 시 초기화
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initNoticeCarousel);
        } else {
            initNoticeCarousel();
        }
    </script>

    <!-- 12.6. 기도제목 섹션 (공지사항과 동일 형식 + 고급스러운 그린 배경) -->
    <section id="prayer" class="relative py-20 px-8" style="background-color: #4A7C59; position: relative; overflow: visible; padding-top: 80px; padding-bottom: 80px;">
        <!-- 배경 질감 -->
        <div style="position: absolute; inset: 0; pointer-events: none; background-image: url('data:image/svg+xml,%3Csvg viewBox=%220 0 200 200%22 xmlns=%22http://www.w3.org/2000/svg%22%3E%3Cfilter id=%22noiseFilter%22%3E%3CfeTurbulence type=%22fractalNoise%22 baseFrequency=%220.65%22 numOctaves=%223%22 stitchTiles=%22stitch%22/%3E%3C/filter%3E%3Crect width=%22100%25%22 height=%22100%25%22 filter=%22url(%23noiseFilter)%22/%3E%3C/svg%3E'); opacity: 0.15;"></div>
        
        <!-- 잎사귀 그림자 효과 -->
        <div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; opacity: 0.1;">
            <div style="position: absolute; top: 10%; left: 5%; width: 200px; height: 200px; background: radial-gradient(ellipse, rgba(0,0,0,0.1) 0%, transparent 70%); border-radius: 50%; filter: blur(40px);"></div>
            <div style="position: absolute; top: 20%; right: 10%; width: 150px; height: 150px; background: radial-gradient(ellipse, rgba(0,0,0,0.08) 0%, transparent 70%); border-radius: 50%; filter: blur(30px);"></div>
        </div>
        
        <div class="max-w-7xl mx-auto relative z-10">
            <!-- 섹션 헤더 -->
            <div class="text-center mb-16">
                <p class="text-gray-300 text-sm tracking-widest mb-3" style="font-family: 'Noto Sans KR', sans-serif;">PRAYER</p>
                <h2 class="text-3xl md:text-4xl font-bold mb-4" style="font-family: 'Noto Sans KR', sans-serif; color: #FFFFFF;">기도제목</h2>
            </div>
            
            <!-- 캐러셀 컨테이너 -->
            <div class="prayer-carousel-container relative" style="position: relative;">
                <!-- 좌측 화살표 -->
                <button class="prayer-carousel-btn prayer-carousel-prev" style="position: absolute; left: -60px; top: 50%; transform: translateY(-50%); z-index: 20; width: 48px; height: 48px; border-radius: 50%; background-color: #FFFFFF; border: 2px solid #E0E0E0; cursor: pointer; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 8px rgba(0,0,0,0.1); transition: all 0.3s;" onmouseover="this.style.backgroundColor='#F5F5F5'; this.style.borderColor='#2D2D2D';" onmouseout="this.style.backgroundColor='#FFFFFF'; this.style.borderColor='#E0E0E0';">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#2D2D2D" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M15 18l-6-6 6-6"/>
                    </svg>
                    </button>
                
                <!-- 카드 스크롤 영역 -->
                <div class="prayer-carousel-wrapper" style="overflow: hidden; position: relative; padding: 20px 20px;">
                    <div id="prayer-carousel-track" class="prayer-carousel-track" style="display: flex; gap: 24px; transition: transform 0.5s ease;">
                        <!-- 동적으로 로드됨 -->
                    </div>
                </div>
                
                <!-- 우측 화살표 -->
                <button class="prayer-carousel-btn prayer-carousel-next" style="position: absolute; right: -60px; top: 50%; transform: translateY(-50%); z-index: 20; width: 48px; height: 48px; border-radius: 50%; background-color: #FFFFFF; border: 2px solid #E0E0E0; cursor: pointer; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 8px rgba(0,0,0,0.1); transition: all 0.3s;" onmouseover="this.style.backgroundColor='#F5F5F5'; this.style.borderColor='#2D2D2D';" onmouseout="this.style.backgroundColor='#FFFFFF'; this.style.borderColor='#E0E0E0';">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#2D2D2D" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M9 18l6-6-6-6"/>
                    </svg>
                </button>
            </div>
            
            <!-- 페이지네이션 -->
            <div id="prayer-pagination" class="prayer-pagination" style="display: flex; justify-content: center; align-items: center; gap: 8px; margin-top: 32px; flex-wrap: wrap;">
                <!-- 페이지 번호가 여기에 동적으로 추가됩니다 -->
            </div>
        </div>
    </section>

    <script>
        // 기도제목 페이지네이션 기능
        let prayerCarouselTrack = null;
        let prayerCurrentPage = 1;
        let prayerItemsPerPage = 3;
        let prayerAllData = [];
        
        function initPrayerCarousel() {
            prayerCarouselTrack = document.getElementById('prayer-carousel-track') || document.querySelector('.prayer-carousel-track');
            if (!prayerCarouselTrack) return;
            
            // 화살표 버튼 이벤트
            document.querySelector('.prayer-carousel-prev')?.addEventListener('click', () => {
                goToPrayerPage(prayerCurrentPage - 1);
            });
            
            document.querySelector('.prayer-carousel-next')?.addEventListener('click', () => {
                goToPrayerPage(prayerCurrentPage + 1);
            });
        }
        
        function updatePrayerCarousel() {
            if (!prayerCarouselTrack) return;
            
            const totalPages = Math.ceil(prayerAllData.length / prayerItemsPerPage);
            prayerCurrentPage = Math.min(prayerCurrentPage, totalPages || 1);
            prayerCurrentPage = Math.max(prayerCurrentPage, 1);
            
            const startIndex = (prayerCurrentPage - 1) * prayerItemsPerPage;
            const endIndex = startIndex + prayerItemsPerPage;
            const pageData = prayerAllData.slice(startIndex, endIndex);
            
            // 카드 렌더링
            prayerCarouselTrack.innerHTML = pageData.map((item, localIndex) => {
                const globalIndex = startIndex + localIndex;
                const fullContent = item.content || '';
                const lines = fullContent.split('\n').filter(l => l.trim());
                const previewLines = lines.slice(0, 3);
                const hasMore = lines.length > 3;
                const dateStr = formatHandwrittenDate(item.created_at || item.updated_at);
                
                return `
                    <div class="prayer-card clickable-card" 
                         data-index="${globalIndex}"
                         onclick="openPrayerModalFromData(${globalIndex})"
                         style="min-width: 380px; max-width: 380px; height: 320px; background-color: #FEFEFE; border-radius: 16px; padding: 32px; box-shadow: 0 8px 32px rgba(0,0,0,0.15), 0 4px 16px rgba(0,0,0,0.1); position: relative; flex-shrink: 0; cursor: pointer; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); display: flex; flex-direction: column; margin: 20px 0;" 
                         onmouseover="this.style.transform='translateY(-8px)'; this.style.boxShadow='0 16px 48px rgba(0,0,0,0.25), 0 8px 24px rgba(0,0,0,0.15)';"
                         onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 8px 32px rgba(0,0,0,0.15), 0 4px 16px rgba(0,0,0,0.1)';">
                        <div style="position: absolute; inset: 0; border-radius: 16px; pointer-events: none; background-image: url('data:image/svg+xml,%3Csvg viewBox=%220 0 200 200%22 xmlns=%22http://www.w3.org/2000/svg%22%3E%3Cfilter id=%22noiseFilter%22%3E%3CfeTurbulence type=%22fractalNoise%22 baseFrequency=%220.9%22 numOctaves=%225%22 stitchTiles=%22stitch%22/%3E%3C/filter%3E%3Crect width=%22100%25%22 height=%22100%25%22 filter=%22url(%23noiseFilter)%22/%3E%3C/svg%3E'); opacity: 0.3; mix-blend-mode: multiply;"></div>
                        <div style="position: absolute; inset: 0; border-radius: 16px; pointer-events: none; background: linear-gradient(135deg, rgba(255,255,255,0.15) 0%, rgba(0,0,0,0.03) 100%);"></div>
                        <div style="position: relative; z-index: 1; margin-bottom: 20px;">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
                                <h3 style="font-family: 'Noto Sans KR', sans-serif; font-weight: 700; font-size: 28px; color: #2D2D2D; letter-spacing: 0.05em; margin: 0; text-transform: uppercase;">PRAYER</h3>
                                ${dateStr ? `<p style="font-family: 'Nanum Pen Script', cursive; font-size: 16px; color: #8B7355; margin: 0; transform: rotate(-2deg); font-weight: 400; letter-spacing: 0.5px;">${dateStr}</p>` : ''}
                            </div>
                            <div style="width: 100%; height: 1px; background-color: #2D2D2D; margin-top: 8px;"></div>
                        </div>
                        <div style="position: relative; z-index: 1; flex: 1; overflow: hidden; margin-bottom: 16px;">
                            ${previewLines.map(line => `<p style="font-family: 'Noto Sans KR', sans-serif; font-weight: 400; font-size: 16px; color: #4A4A4A; line-height: 1.8; margin: 0 0 12px 0;">${line.replace(/</g, '&lt;').replace(/>/g, '&gt;')}</p>`).join('')}
                            ${hasMore ? '<p style="font-family: \'Noto Sans KR\', sans-serif; font-weight: 400; font-size: 14px; color: #888888; margin: 8px 0 0 0; font-style: italic;">... 더 보기</p>' : ''}
                        </div>
                        <div style="position: relative; z-index: 1; margin-top: auto;">
                            <p style="font-family: 'Noto Sans KR', sans-serif; font-weight: 400; font-size: 12px; color: #888888; font-style: italic; margin: 0;">@bucheonchurch</p>
                        </div>
                        <div style="position: absolute; bottom: 20px; right: 20px; width: 80px; height: 80px; z-index: 1; opacity: 0.6;">
                            <svg viewBox="0 0 100 100" style="width: 100%; height: 100%;">
                                <path d="M50 80 Q40 60 35 50 Q30 40 25 30 Q20 20 15 15 Q10 10 10 5" stroke="#4A4A4A" stroke-width="1.5" fill="none" stroke-linecap="round"/>
                                <path d="M35 50 Q30 35 25 25" stroke="#4A4A4A" stroke-width="1.5" fill="none" stroke-linecap="round"/>
                                <ellipse cx="25" cy="25" rx="8" ry="12" fill="none" stroke="#4A4A4A" stroke-width="1.5"/>
                                <ellipse cx="15" cy="15" rx="6" ry="10" fill="none" stroke="#4A4A4A" stroke-width="1.5"/>
                            </svg>
                        </div>
                    </div>
                `;
            }).join('');
            
            // 페이지네이션 업데이트
            updatePrayerPagination(totalPages);
            updatePrayerNavButtons();
        }
        
        function updatePrayerPagination(totalPages) {
            const paginationEl = document.getElementById('prayer-pagination');
            if (!paginationEl) return;
            
            if (totalPages <= 1) {
                paginationEl.innerHTML = '';
                return;
            }
            
            const maxVisiblePages = 5;
            let startPage = Math.max(1, prayerCurrentPage - Math.floor(maxVisiblePages / 2));
            let endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);
            
            if (endPage - startPage < maxVisiblePages - 1) {
                startPage = Math.max(1, endPage - maxVisiblePages + 1);
            }
            
            let paginationHTML = '';
            
            if (startPage > 1) {
                paginationHTML += `<button onclick="goToPrayerPage(${startPage - 1})" style="padding: 8px 12px; border: 1px solid #ddd; background: white; color: #333; border-radius: 4px; cursor: pointer; font-family: 'Noto Sans KR', sans-serif; font-size: 14px;" onmouseover="this.style.backgroundColor='#f5f5f5';" onmouseout="this.style.backgroundColor='white';">‹</button>`;
            }
            
            for (let i = startPage; i <= endPage; i++) {
                const isActive = i === prayerCurrentPage;
                paginationHTML += `<button onclick="goToPrayerPage(${i})" style="padding: 8px 12px; border: 1px solid ${isActive ? '#333' : '#ddd'}; background: ${isActive ? '#333' : 'white'}; color: ${isActive ? '#fff' : '#333'}; border-radius: 4px; cursor: pointer; font-family: 'Noto Sans KR', sans-serif; font-size: 14px; font-weight: ${isActive ? '600' : '400'};" onmouseover="if(!${isActive}) { this.style.backgroundColor='#f5f5f5'; }" onmouseout="if(!${isActive}) { this.style.backgroundColor='white'; }">${i}</button>`;
            }
            
            if (endPage < totalPages) {
                paginationHTML += `<button onclick="goToPrayerPage(${endPage + 1})" style="padding: 8px 12px; border: 1px solid #ddd; background: white; color: #333; border-radius: 4px; cursor: pointer; font-family: 'Noto Sans KR', sans-serif; font-size: 14px;" onmouseover="this.style.backgroundColor='#f5f5f5';" onmouseout="this.style.backgroundColor='white';">›</button>`;
            }
            
            paginationEl.innerHTML = paginationHTML;
        }
        
        function goToPrayerPage(page) {
            prayerCurrentPage = page;
            updatePrayerCarousel();
            document.getElementById('prayer').scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
        
        function updatePrayerNavButtons() {
            const totalPages = Math.ceil(prayerAllData.length / prayerItemsPerPage);
            const prevBtn = document.querySelector('.prayer-carousel-prev');
            const nextBtn = document.querySelector('.prayer-carousel-next');
            
            if (prevBtn) {
                if (prayerCurrentPage <= 1) {
                    prevBtn.style.opacity = '0.5';
                    prevBtn.style.pointerEvents = 'none';
                } else {
                    prevBtn.style.opacity = '1';
                    prevBtn.style.pointerEvents = 'auto';
                }
            }
            
            if (nextBtn) {
                if (prayerCurrentPage >= totalPages) {
                    nextBtn.style.opacity = '0.5';
                    nextBtn.style.pointerEvents = 'none';
                } else {
                    nextBtn.style.opacity = '1';
                    nextBtn.style.pointerEvents = 'auto';
                }
            }
        }
        
        // 페이지 로드 시 초기화
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initPrayerCarousel);
        } else {
            initPrayerCarousel();
        }
    </script>

    <!-- 12.7. 갤러리 섹션 (폴라로이드 스타일) -->
    <section id="gallery" class="py-8 px-8" style="background: #E5E3E0; position: relative; overflow: hidden;">
        <!-- 배경 질감 -->
        <div style="position: absolute; inset: 0; pointer-events: none; background-image: url('data:image/svg+xml,%3Csvg viewBox=%220 0 200 200%22 xmlns=%22http://www.w3.org/2000/svg%22%3E%3Cfilter id=%22noiseFilter%22%3E%3CfeTurbulence type=%22fractalNoise%22 baseFrequency=%220.65%22 numOctaves=%223%22 stitchTiles=%22stitch%22/%3E%3C/filter%3E%3Crect width=%22100%25%22 height=%22100%25%22 filter=%22url(%23noiseFilter)%22/%3E%3C/svg%3E'); opacity: 0.15;"></div>
        <div class="max-w-6xl mx-auto" style="max-width: 1200px; margin: 0 auto; padding: 20px 20px; position: relative; z-index: 1; min-height: 700px;">
            <!-- 헤더 -->
            <div class="text-center mb-6">
                <h2 class="text-4xl font-bold mb-3" style="font-size: 28px; font-weight: bold; text-align: center; margin-bottom: 8px; font-family: 'Noto Sans KR', sans-serif; color: #333;">부천교회 갤러리</h2>
                <p class="text-gray-700" style="font-size: 14px; color: #555; font-family: 'Noto Sans KR', sans-serif;">우리 교회의 아름다운 순간들</p>
            </div>
            
            <!-- 탭 메뉴 -->
            <div class="flex justify-center gap-3 mb-8 flex-wrap" style="display: flex; justify-content: center; gap: 8px; margin-bottom: 24px; flex-wrap: wrap;">
                <button class="gallery-tab active" data-tab="all" style="padding: 8px 16px; border-radius: 50px; border: 2px solid #999; background: #333; color: #fff; font-family: 'Noto Sans KR', sans-serif; font-size: 14px; cursor: pointer; transition: all 0.3s; font-weight: 500;" onmouseover="if(!this.classList.contains('active')) { this.style.borderColor='#666'; this.style.background='#555'; }" onmouseout="if(!this.classList.contains('active')) { this.style.borderColor='#999'; this.style.background='white'; this.style.color='#333'; }" onclick="switchGalleryTab('all', this)">
                    전체보기
                </button>
                <button class="gallery-tab" data-tab="event" style="padding: 8px 16px; border-radius: 50px; border: 2px solid #999; background: white; color: #333; font-family: 'Noto Sans KR', sans-serif; font-size: 14px; cursor: pointer; transition: all 0.3s; font-weight: 500;" onmouseover="if(!this.classList.contains('active')) { this.style.borderColor='#666'; this.style.background='#555'; this.style.color='#fff'; }" onmouseout="if(!this.classList.contains('active')) { this.style.borderColor='#999'; this.style.background='white'; this.style.color='#333'; }" onclick="switchGalleryTab('event', this)">
                    교회행사
                </button>
                <button class="gallery-tab" data-tab="children" style="padding: 8px 16px; border-radius: 50px; border: 2px solid #999; background: white; color: #333; font-family: 'Noto Sans KR', sans-serif; font-size: 14px; cursor: pointer; transition: all 0.3s; font-weight: 500;" onmouseover="if(!this.classList.contains('active')) { this.style.borderColor='#666'; this.style.background='#555'; this.style.color='#fff'; }" onmouseout="if(!this.classList.contains('active')) { this.style.borderColor='#999'; this.style.background='white'; this.style.color='#333'; }" onclick="switchGalleryTab('children', this)">
                    유치부
                </button>
                <button class="gallery-tab" data-tab="youth" style="padding: 8px 16px; border-radius: 50px; border: 2px solid #999; background: white; color: #333; font-family: 'Noto Sans KR', sans-serif; font-size: 14px; cursor: pointer; transition: all 0.3s; font-weight: 500;" onmouseover="if(!this.classList.contains('active')) { this.style.borderColor='#666'; this.style.background='#555'; this.style.color='#fff'; }" onmouseout="if(!this.classList.contains('active')) { this.style.borderColor='#999'; this.style.background='white'; this.style.color='#333'; }" onclick="switchGalleryTab('youth', this)">
                    청년부
                </button>
            </div>
            
            <!-- 로딩 스피너 -->
            <div id="gallery-loading" class="text-center py-20" style="display: none;">
                <div class="inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900" style="border-bottom: 3px solid #333; border-radius: 50%; width: 48px; height: 48px; animation: spin 1s linear infinite;"></div>
                <p class="mt-4 text-gray-700" style="margin-top: 16px; color: #555; font-family: 'Noto Sans KR', sans-serif;">이미지를 불러오는 중...</p>
            </div>
            
            <!-- 빈 상태 메시지 -->
            <div id="gallery-empty" class="text-center py-20" style="display: none;">
                <p class="text-gray-600 text-lg" style="color: #666; font-size: 18px; font-family: 'Noto Sans KR', sans-serif;">표시할 이미지가 없습니다.</p>
            </div>
            
            <!-- 갤러리 컨테이너 -->
            <div class="gallery-container relative" style="position: relative; min-height: 650px;">
                <!-- 좌측 화살표 -->
                <button id="gallery-prev" class="gallery-nav-btn" onclick="goToGalleryPage(galleryCurrentPage - 1)" style="position: absolute; left: -60px; top: 50%; transform: translateY(-50%); z-index: 20; width: 48px; height: 48px; border-radius: 50%; background-color: #FFFFFF; border: 2px solid #E0E0E0; cursor: pointer; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 8px rgba(0,0,0,0.1); transition: all 0.3s; opacity: 0.5; pointer-events: none;" onmouseover="if(this.style.pointerEvents !== 'none') { this.style.backgroundColor='#F5F5F5'; this.style.borderColor='#2D2D2D'; }" onmouseout="if(this.style.pointerEvents !== 'none') { this.style.backgroundColor='#FFFFFF'; this.style.borderColor='#E0E0E0'; }">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#2D2D2D" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M15 18l-6-6 6-6"/>
                    </svg>
                </button>
                
                <!-- 폴라로이드 그리드 -->
                <div id="gallery-grid" class="polaroid-grid" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; min-height: 650px !important; grid-auto-rows: auto; overflow: visible; align-items: start;">
                    <!-- 폴라로이드 카드들이 여기에 동적으로 추가됩니다 -->
                </div>
                
                <!-- 우측 화살표 -->
                <button id="gallery-next" class="gallery-nav-btn" onclick="goToGalleryPage(galleryCurrentPage + 1)" style="position: absolute; right: -60px; top: 50%; transform: translateY(-50%); z-index: 20; width: 48px; height: 48px; border-radius: 50%; background-color: #FFFFFF; border: 2px solid #E0E0E0; cursor: pointer; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 8px rgba(0,0,0,0.1); transition: all 0.3s;" onmouseover="if(this.style.pointerEvents !== 'none') { this.style.backgroundColor='#F5F5F5'; this.style.borderColor='#2D2D2D'; }" onmouseout="if(this.style.pointerEvents !== 'none') { this.style.backgroundColor='#FFFFFF'; this.style.borderColor='#E0E0E0'; }">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#2D2D2D" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M9 18l6-6-6-6"/>
                    </svg>
                </button>
            </div>
            
            <!-- 페이지네이션 -->
            <div id="gallery-pagination" class="gallery-pagination" style="display: flex; justify-content: center; align-items: center; gap: 8px; margin-top: 32px; flex-wrap: wrap;">
                <!-- 페이지 번호가 여기에 동적으로 추가됩니다 -->
            </div>
        </div>
    </section>
    
    <!-- 라이트박스 -->
    <div id="lightbox" class="fixed inset-0 bg-black bg-opacity-90 z-50 hidden items-center justify-center" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.9); z-index: 9999; display: none; align-items: center; justify-content: center; user-select: none;" onclick="closeLightbox(event)">
        <button id="lightbox-close" class="absolute top-4 right-4 text-white text-4xl hover:text-gray-300" style="position: absolute; top: 20px; right: 20px; color: white; font-size: 40px; background: none; border: none; cursor: pointer; padding: 10px; line-height: 1; z-index: 10001;" onclick="closeLightbox()">&times;</button>
        
        <!-- 이전 버튼 -->
        <button id="lightbox-prev" class="lightbox-nav-btn" style="position: absolute; left: 20px; top: 50%; transform: translateY(-50%); background: rgba(255, 255, 255, 0.2); border: 2px solid rgba(255, 255, 255, 0.5); color: white; width: 60px; height: 60px; border-radius: 50%; cursor: pointer; font-size: 24px; display: flex; align-items: center; justify-content: center; transition: all 0.3s; z-index: 10001; backdrop-filter: blur(10px);" onmouseover="this.style.background='rgba(255, 255, 255, 0.3)'; this.style.borderColor='rgba(255, 255, 255, 0.8)';" onmouseout="this.style.background='rgba(255, 255, 255, 0.2)'; this.style.borderColor='rgba(255, 255, 255, 0.5)';" onclick="event.stopPropagation(); navigateLightbox(-1);">‹</button>
        
        <!-- 다음 버튼 -->
        <button id="lightbox-next" class="lightbox-nav-btn" style="position: absolute; right: 20px; top: 50%; transform: translateY(-50%); background: rgba(255, 255, 255, 0.2); border: 2px solid rgba(255, 255, 255, 0.5); color: white; width: 60px; height: 60px; border-radius: 50%; cursor: pointer; font-size: 24px; display: flex; align-items: center; justify-content: center; transition: all 0.3s; z-index: 10001; backdrop-filter: blur(10px);" onmouseover="this.style.background='rgba(255, 255, 255, 0.3)'; this.style.borderColor='rgba(255, 255, 255, 0.8)';" onmouseout="this.style.background='rgba(255, 255, 255, 0.2)'; this.style.borderColor='rgba(255, 255, 255, 0.5)';" onclick="event.stopPropagation(); navigateLightbox(1);">›</button>
        
        <img id="lightbox-image" src="" alt="" style="max-width: 90vw; max-height: 90vh; width: auto; height: auto; border-radius: 8px; touch-action: pan-y; display: block; margin: 0 auto;" onmousedown="handleLightboxDragStart(event)" onmousemove="handleLightboxDragMove(event)" onmouseup="handleLightboxDragEnd(event)" ontouchstart="handleLightboxDragStart(event)" ontouchmove="handleLightboxDragMove(event)" ontouchend="handleLightboxDragEnd(event)">
    </div>

    <!-- 공지사항/기도제목 모달 -->
    <div id="content-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden items-center justify-center" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0); z-index: 10000; display: none; align-items: center; justify-content: center; backdrop-filter: blur(0px); will-change: background, backdrop-filter; transition: background 0.35s cubic-bezier(0.25, 0.46, 0.45, 0.94), backdrop-filter 0.35s cubic-bezier(0.25, 0.46, 0.45, 0.94);" onclick="closeContentModal(event)">
        <div class="modal-content" style="background-color: #FEFEFE; border-radius: 24px; padding: 48px; max-width: 600px; width: 90%; max-height: 80vh; overflow-y: auto; position: relative; box-shadow: 0 20px 60px rgba(0,0,0,0); transform: scale(0.85) translateY(20px); opacity: 0; will-change: transform, opacity; transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94), opacity 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94), box-shadow 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94); backface-visibility: hidden; transform-style: preserve-3d;" onclick="event.stopPropagation();">
            <!-- 배경 질감 -->
            <div style="position: absolute; inset: 0; border-radius: 24px; pointer-events: none; background-image: url('data:image/svg+xml,%3Csvg viewBox=%220 0 200 200%22 xmlns=%22http://www.w3.org/2000/svg%22%3E%3Cfilter id=%22noiseFilter%22%3E%3CfeTurbulence type=%22fractalNoise%22 baseFrequency=%220.9%22 numOctaves=%225%22 stitchTiles=%22stitch%22/%3E%3C/filter%3E%3Crect width=%22100%25%22 height=%22100%25%22 filter=%22url(%23noiseFilter)%22/%3E%3C/svg%3E'); opacity: 0.3; mix-blend-mode: multiply;"></div>
            <div style="position: absolute; inset: 0; border-radius: 24px; pointer-events: none; background: linear-gradient(135deg, rgba(255,255,255,0.15) 0%, rgba(0,0,0,0.03) 100%);"></div>
            
            <!-- 닫기 버튼 -->
            <button onclick="closeContentModal()" style="position: absolute; top: 20px; right: 20px; width: 40px; height: 40px; border-radius: 50%; background-color: rgba(255, 255, 255, 0.8); border: 2px solid #E0E0E0; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.3s; z-index: 10; flex-shrink: 0;" onmouseover="this.style.backgroundColor='#FFFFFF'; this.style.borderColor='#2D2D2D';" onmouseout="this.style.backgroundColor='rgba(255, 255, 255, 0.8)'; this.style.borderColor='#E0E0E0';">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#2D2D2D" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M18 6L6 18M6 6l12 12"/>
                </svg>
            </button>
            
            <!-- 모달 내용 -->
            <div style="position: relative; z-index: 1;">
                <div style="display: flex; align-items: center; gap: 16px; margin-bottom: 16px; padding-right: 50px;">
                    <h3 id="modal-type" style="font-family: 'Noto Sans KR', sans-serif; font-weight: 700; font-size: 32px; color: #2D2D2D; letter-spacing: 0.05em; margin: 0; text-transform: uppercase;">NOTICE</h3>
                    <p id="modal-date" style="font-family: 'Nanum Pen Script', cursive; font-size: 22px; color: #8B7355; margin: 0; transform: rotate(-2deg); font-weight: 400; letter-spacing: 0.5px; white-space: nowrap;"></p>
                </div>
                <div style="width: 100%; height: 2px; background-color: #2D2D2D; margin-bottom: 24px;"></div>
                <h4 id="modal-title" style="font-family: 'Noto Sans KR', sans-serif; font-weight: 600; font-size: 20px; color: #2D2D2D; margin: 0 0 20px 0; display: none;"></h4>
                <div id="modal-content" style="font-family: 'Noto Sans KR', sans-serif; font-weight: 400; font-size: 18px; color: #4A4A4A; line-height: 2; white-space: pre-line; margin-bottom: 24px;"></div>
                <div style="border-top: 1px solid #E0E0E0; padding-top: 16px; margin-top: 24px;">
                    <p style="font-family: 'Noto Sans KR', sans-serif; font-weight: 400; font-size: 12px; color: #888888; font-style: italic; margin: 0;">@bucheonchurch</p>
                </div>
            </div>
        </div>
    </div>
    
    <style>
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .gallery-tab.active {
            background: #333 !important;
            color: #fff !important;
            border-color: #333 !important;
        }
        
        .polaroid {
            background: #fff;
            padding: 16px 16px 28px 16px;
            border-radius: 3.2px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.16), 0 4px 12px rgba(0, 0, 0, 0.12);
            max-width: 100%;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
            transform-origin: center;
        }
        
        .polaroid:hover {
            transform: translateY(-20px) scale(0.86) !important;
            box-shadow: 0 24px 64px rgba(0, 0, 0, 0.32), 0 16px 40px rgba(0, 0, 0, 0.28);
        }
        
        .polaroid img {
            width: 100%;
            aspect-ratio: 1;
            object-fit: cover;
            display: block;
        }
        
        .polaroid-caption {
            font-family: 'Nanum Pen Script', cursive;
            font-size: 22.4px;
            font-weight: 400;
            color: #666;
            text-align: center;
            margin-top: 6.4px;
            line-height: 1.4;
        }
        
        .polaroid-filename {
            font-family: 'Nanum Pen Script', cursive;
            font-size: 28.8px;
            font-weight: 700;
            color: #333;
            text-align: center;
            margin-top: 3.2px;
            line-height: 1.3;
        }
        
        .polaroid-grid {
            min-height: 650px !important;
            grid-auto-rows: auto;
            overflow: visible;
            gap: 8px !important;
            align-items: start;
        }
        
        @media (min-width: 768px) {
            .polaroid-grid {
                grid-template-columns: repeat(4, 1fr) !important;
                min-height: 650px !important;
                gap: 8px !important;
                grid-auto-rows: auto !important;
            }
        }
        
        @media (min-width: 1024px) {
            .polaroid-grid {
                grid-template-columns: repeat(4, 1fr) !important;
                min-height: 650px !important;
                gap: 8px !important;
                grid-auto-rows: auto !important;
            }
        }
        
        .lightbox-nav-btn {
            opacity: 1;
            transition: opacity 0.3s ease;
        }
        
        .lightbox-nav-btn[style*="display: none"] {
            opacity: 0;
            pointer-events: none;
        }
        
        #lightbox-image {
            max-width: 90vw !important;
            max-height: 90vh !important;
            width: auto !important;
            height: auto !important;
            display: block !important;
            margin: 0 auto !important;
        }
        
        @media (max-width: 768px) {
            #lightbox {
                padding: 0 !important;
                background: rgba(0, 0, 0, 0.95) !important;
            }
            
            #lightbox-image {
                max-width: 100vw !important;
                max-height: 85vh !important;
                width: auto !important;
                height: auto !important;
                object-fit: contain !important;
                border-radius: 0 !important;
            }
            
            #lightbox-close {
                position: fixed !important;
                top: 10px !important;
                right: 10px !important;
                font-size: 36px !important;
                z-index: 10002 !important;
                background: rgba(0,0,0,0.5) !important;
                border-radius: 50% !important;
                width: 44px !important;
                height: 44px !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
            }
            
            .lightbox-nav-btn {
                width: 44px !important;
                height: 44px !important;
                font-size: 18px !important;
                background: rgba(255,255,255,0.2) !important;
            }
            
            #lightbox-prev {
                left: 8px !important;
            }
            
            #lightbox-next {
                right: 8px !important;
            }
        }
        
        /* 공지사항/기도제목 모달 스타일 */
        .clickable-card {
            user-select: none;
        }
        
        .clickable-card:active {
            transform: translateY(-2px) scale(0.98) !important;
        }
        
        #content-modal.modal-open {
            background: rgba(0, 0, 0, 0.6) !important;
            backdrop-filter: blur(8px) !important;
        }
        
        #content-modal.modal-open .modal-content {
            transform: scale(1) translateY(0) !important;
            opacity: 1 !important;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3) !important;
        }
        
        @keyframes modalFadeIn {
            0% {
                opacity: 0;
                transform: scale(0.8) translateY(30px) rotateX(10deg);
            }
            60% {
                transform: scale(1.02) translateY(-5px) rotateX(-2deg);
            }
            100% {
                opacity: 1;
                transform: scale(1) translateY(0) rotateX(0deg);
            }
        }
        
        @keyframes modalBackdropFade {
            from {
                background: rgba(0, 0, 0, 0);
                backdrop-filter: blur(0px);
            }
            to {
                background: rgba(0, 0, 0, 0.6);
                backdrop-filter: blur(8px);
            }
        }
        
        #content-modal .modal-content::-webkit-scrollbar {
            width: 8px;
        }
        
        #content-modal .modal-content::-webkit-scrollbar-track {
            background: #F5F5F5;
            border-radius: 4px;
        }
        
        #content-modal .modal-content::-webkit-scrollbar-thumb {
            background: #D0D0D0;
            border-radius: 4px;
        }
        
        #content-modal .modal-content::-webkit-scrollbar-thumb:hover {
            background: #B0B0B0;
        }
        
        @media (max-width: 768px) {
            #content-modal .modal-content {
                padding: 24px 20px !important;
                max-width: 95% !important;
                max-height: 85vh !important;
            }
            
            #content-modal #modal-title {
                font-size: 20px !important;
            }
            
            #content-modal #modal-content {
                font-size: 14px !important;
                line-height: 1.6 !important;
            }
            
            #content-modal #modal-date {
                font-size: 12px !important;
            }
            
            #modal-type {
                font-size: 24px !important;
            }
            
            #modal-content {
                font-size: 16px !important;
            }
        }
    </style>
    
    <script>
        // Supabase 설정
        const SUPABASE_URL_GALLERY = 'https://fkqxalcwhqohrkdzwhvv.supabase.co';
        const SUPABASE_ANON_KEY_GALLERY = 'sb_publishable_5sLcyIwutRptBow_Xe7MpA_IDKtDwXI';
        
        // Google Drive API 설정
        const GOOGLE_API_KEY = 'AIzaSyAR0pKih7x68qN5m0TKL8P34DAjh6VTN-o';
        const GOOGLE_DRIVE_FOLDERS = {
            'event': '1LjNa6LTwdZrGFcsDjereCDsP7QBZVryt',      // 교회행사
            'kids': '1vhJxT8UCFbwOWQ4LOCwYgitndwFs3yvl',       // 유치부
            'youth': '1JxUQ4AoFu1J3YGL_92kpKsyzjVXrQmXu'      // 청년부
        };
        
        // Supabase 클라이언트 초기화
        let gallerySupabaseClient = null;
        if (window.supabase && window.supabase.createClient) {
            gallerySupabaseClient = window.supabase.createClient(SUPABASE_URL_GALLERY, SUPABASE_ANON_KEY_GALLERY);
        }
        
        // 카테고리 매핑 (갤러리 탭 -> Google Drive folder)
        const CATEGORY_MAP = {
            'event': 'event',      // 교회행사
            'children': 'kids',    // 유치부
            'youth': 'youth'       // 청년부
        };
        
        let allImages = [];
        let currentTab = 'all';
        let currentFilteredImages = [];
        let currentLightboxIndex = 0;
        let galleryCurrentPage = 1;
        const galleryItemsPerPage = 8; // 4x2 그리드
        let lightboxDragStartX = 0;
        let lightboxDragStartY = 0;
        let lightboxIsDragging = false;
        
        
        // 날짜 포맷팅 함수
        function formatDate(dateString) {
            const date = new Date(dateString);
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            return `${year}.${month}.${day}`;
        }
        
        // 랜덤 회전 각도 생성 (-2deg ~ +2deg) - 덜 흐트러지게
        function getRandomRotation() {
            return (Math.random() * 4 - 2).toFixed(1);
        }
        
        // 파일명에서 확장자 제거
        function getFileNameWithoutExtension(filename) {
            return filename.replace(/\.(jpg|jpeg|png|gif|webp)$/i, '');
        }
        
        // Google Drive 폴더에서 이미지 가져오기
        async function loadImagesFromGoogleDrive(folderId) {
            try {
                const response = await fetch(
                    `https://www.googleapis.com/drive/v3/files?q='${folderId}'+in+parents+and+mimeType+contains+'image/'&fields=files(id,name,mimeType,thumbnailLink,webViewLink,webContentLink,createdTime,modifiedTime)&key=${GOOGLE_API_KEY}`,
                    {
                        headers: {
                            'Accept': 'application/json'
                        }
                    }
                );
                
                if (!response.ok) {
                    throw new Error(`Google Drive API 오류: ${response.status}`);
                }
                
                const data = await response.json();
                console.log('Google Drive API 응답:', data);
                if (data.files && data.files.length > 0) {
                    console.log('로드된 파일들:', data.files.map(f => ({ id: f.id, name: f.name, hasThumbnail: !!f.thumbnailLink, hasWebContent: !!f.webContentLink })));
                }
                return data.files || [];
            } catch (error) {
                console.error('Google Drive 이미지 로드 실패:', error);
                return [];
            }
        }
        
        // 모든 이미지 로드 (Google Drive 폴더에서 직접 가져오기)
        async function loadAllImages() {
            const loadingEl = document.getElementById('gallery-loading');
            const gridEl = document.getElementById('gallery-grid');
            const emptyEl = document.getElementById('gallery-empty');
            
            loadingEl.style.display = 'block';
            gridEl.innerHTML = '';
            emptyEl.style.display = 'none';
            
            try {
                allImages = [];
                
                // 각 카테고리별로 Google Drive 폴더에서 이미지 가져오기
                for (const [category, folderId] of Object.entries(GOOGLE_DRIVE_FOLDERS)) {
                    const driveImages = await loadImagesFromGoogleDrive(folderId);
                    
                    driveImages.forEach(file => {
                        let galleryCategory = 'all';
                        if (category === 'event') {
                            galleryCategory = 'event';
                        } else if (category === 'kids') {
                            galleryCategory = 'children';
                        } else if (category === 'youth') {
                            galleryCategory = 'youth';
                        }
                        
                        // Google Drive 이미지 URL 생성 (새로운 형식 사용)
                        const fileId = file.id;
                        
                        // 썸네일 URL (갤러리용 - 400px)
                        // 두 가지 형식 모두 시도 가능하도록 배열로 저장
                        const thumbnailUrls = [
                            `https://drive.google.com/thumbnail?id=${fileId}&sz=w400`,
                            `https://lh3.googleusercontent.com/d/${fileId}=w400`
                        ];
                        const thumbnailUrl = thumbnailUrls[0]; // 기본값으로 첫 번째 사용
                        
                        // 원본 이미지 URL (라이트박스용 - 1200px)
                        const originalUrls = [
                            `https://drive.google.com/thumbnail?id=${fileId}&sz=w1200`,
                            `https://lh3.googleusercontent.com/d/${fileId}=w1200`
                        ];
                        const originalUrl = originalUrls[0]; // 기본값으로 첫 번째 사용
                        
                        allImages.push({
                            id: fileId,
                            name: file.name,
                            category: galleryCategory,
                            createdTime: file.createdTime || file.modifiedTime,
                            modifiedTime: file.modifiedTime || file.createdTime,
                            thumbnail: thumbnailUrl,
                            thumbnailUrls: thumbnailUrls, // 대체 URL 배열 저장
                            original: originalUrl,
                            originalUrls: originalUrls, // 대체 URL 배열 저장
                            isGoogleDrive: true,
                            googleDriveId: fileId,
                            webViewLink: file.webViewLink,
                            webContentLink: file.webContentLink
                        });
                    });
                }
                
                // 생성일 기준으로 정렬 (최신순)
                allImages.sort((a, b) => {
                    const dateA = new Date(a.createdTime || 0);
                    const dateB = new Date(b.createdTime || 0);
                    return dateB - dateA;
                });
                
                if (allImages.length === 0) {
                    console.log('갤러리: Google Drive 폴더에 이미지가 없습니다.');
                    loadingEl.style.display = 'none';
                    emptyEl.style.display = 'block';
                } else {
                    console.log(`갤러리: ${allImages.length}개 이미지 로드 완료 (Google Drive에서 직접)`, allImages);
                    loadingEl.style.display = 'none';
                    displayImages(allImages);
                }
            } catch (error) {
                console.error('갤러리 이미지 로드 실패:', error);
                loadingEl.style.display = 'none';
                emptyEl.style.display = 'block';
            }
        }
        
        // 이미지 표시 (페이지네이션 적용)
        function displayImages(images) {
            const gridEl = document.getElementById('gallery-grid');
            const emptyEl = document.getElementById('gallery-empty');
            
            // 현재 필터링된 이미지 목록 저장
            currentFilteredImages = images;
            
            if (images.length === 0) {
                gridEl.innerHTML = '';
                emptyEl.style.display = 'block';
                document.getElementById('gallery-pagination').innerHTML = '';
                updateGalleryNavButtons();
                return;
            }
            
            // 페이지 계산
            const totalPages = Math.ceil(images.length / galleryItemsPerPage);
            galleryCurrentPage = Math.min(galleryCurrentPage, totalPages || 1);
            galleryCurrentPage = Math.max(galleryCurrentPage, 1);
            
            // 현재 페이지의 이미지 추출
            const startIndex = (galleryCurrentPage - 1) * galleryItemsPerPage;
            const endIndex = startIndex + galleryItemsPerPage;
            const pageImages = images.slice(startIndex, endIndex);
            
            emptyEl.style.display = 'none';
            gridEl.innerHTML = pageImages.map((image, localIndex) => {
                const globalIndex = startIndex + localIndex;
                // 날짜 포맷팅 (수정일자 우선, 없으면 생성일자)
                const dateString = image.modifiedTime || image.createdTime || '';
                const formattedDate = dateString ? formatDate(dateString) : '';
                
                // 파일명 (확장자 제거)
                const fileName = getFileNameWithoutExtension(image.name);
                
                // 랜덤 회전 각도
                const rotation = getRandomRotation();
                
                // 이미지 URL 이스케이프 처리 및 대체 URL 생성
                const fileId = image.googleDriveId || image.id;
                const safeName = (image.name || '').replace(/'/g, "\\'").replace(/"/g, '&quot;');
                
                // 썸네일 대체 URL 배열 (우선순위 순서)
                const thumbnailFallbacks = (image.thumbnailUrls || [
                    image.thumbnail,
                    `https://drive.google.com/thumbnail?id=${fileId}&sz=w400`,
                    `https://lh3.googleusercontent.com/d/${fileId}=w400`
                ]).filter(url => url);
                
                // 원본 대체 URL 배열 (라이트박스용)
                const originalFallbacks = (image.originalUrls || [
                    image.original,
                    `https://drive.google.com/thumbnail?id=${fileId}&sz=w1200`,
                    `https://lh3.googleusercontent.com/d/${fileId}=w1200`
                ]).filter(url => url);
                
                // 안전한 URL 문자열 생성 (이스케이프 처리)
                const safeThumbnailUrls = thumbnailFallbacks.map(url => url.replace(/'/g, "\\'").replace(/"/g, '&quot;'));
                const safeOriginalUrls = originalFallbacks.map(url => url.replace(/'/g, "\\'").replace(/"/g, '&quot;'));
                
                // 라이트박스용 원본 URL (첫 번째 우선)
                const primaryOriginal = safeOriginalUrls[0] || '';
                
                return `
                    <div class="polaroid" onclick="openLightbox('${primaryOriginal}', '${safeName}', ${globalIndex})" style="transform: rotate(${rotation}deg) scale(0.8); position: relative; width: 100%; height: auto; display: flex; flex-direction: column;">
                        <img src="${safeThumbnailUrls[0]}" alt="${safeName}" loading="lazy" 
                             onerror="
                                let fallbacks = ['${safeThumbnailUrls.join("', '")}'];
                                let idx = fallbacks.indexOf(this.src) + 1;
                                if (idx < fallbacks.length) {
                                    this.src = fallbacks[idx];
                                } else {
                                    this.onerror = null;
                                    this.src = 'data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22400%22 height=%22400%22%3E%3Crect fill=%22%23f0f0f0%22 width=%22400%22 height=%22400%22/%3E%3Ctext fill=%22%23999%22 font-family=%22sans-serif%22 font-size=%2218%22 dy=%2210.5%22 font-weight=%22bold%22 x=%2250%25%22 y=%2250%25%22 text-anchor=%22middle%22%3E이미지를 불러올 수 없습니다%3C/text%3E%3C/svg%3E';
                                }
                             "
                             style="width: 100%; aspect-ratio: 1; object-fit: cover; display: block;">
                        <p class="polaroid-caption">${formattedDate}</p>
                        <p class="polaroid-filename">${fileName}</p>
                    </div>
                `;
            }).join('');
            
            // 그리드 최소 높이 설정
            if (gridEl) {
                gridEl.style.minHeight = '650px';
                gridEl.style.overflow = 'visible';
                gridEl.style.gridAutoRows = 'auto';
                gridEl.style.alignItems = 'start';
            }
            
            // 페이지네이션 업데이트
            updateGalleryPagination(totalPages);
            updateGalleryNavButtons();
        }
        
        // 갤러리 페이지네이션 업데이트
        function updateGalleryPagination(totalPages) {
            const paginationEl = document.getElementById('gallery-pagination');
            if (!paginationEl) return;
            
            if (totalPages <= 1) {
                paginationEl.innerHTML = '';
                return;
            }
            
            // 5개씩 표시
            const maxVisiblePages = 5;
            let startPage = Math.max(1, galleryCurrentPage - Math.floor(maxVisiblePages / 2));
            let endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);
            
            if (endPage - startPage < maxVisiblePages - 1) {
                startPage = Math.max(1, endPage - maxVisiblePages + 1);
            }
            
            let paginationHTML = '';
            
            // 이전 페이지 그룹 버튼
            if (startPage > 1) {
                paginationHTML += `<button onclick="goToGalleryPage(${startPage - 1})" style="padding: 8px 12px; border: 1px solid #ddd; background: white; color: #333; border-radius: 4px; cursor: pointer; font-family: 'Noto Sans KR', sans-serif; font-size: 14px;" onmouseover="this.style.backgroundColor='#f5f5f5';" onmouseout="this.style.backgroundColor='white';">‹</button>`;
            }
            
            // 페이지 번호
            for (let i = startPage; i <= endPage; i++) {
                const isActive = i === galleryCurrentPage;
                paginationHTML += `<button onclick="goToGalleryPage(${i})" style="padding: 8px 12px; border: 1px solid ${isActive ? '#333' : '#ddd'}; background: ${isActive ? '#333' : 'white'}; color: ${isActive ? '#fff' : '#333'}; border-radius: 4px; cursor: pointer; font-family: 'Noto Sans KR', sans-serif; font-size: 14px; font-weight: ${isActive ? '600' : '400'};" onmouseover="if(!${isActive}) { this.style.backgroundColor='#f5f5f5'; }" onmouseout="if(!${isActive}) { this.style.backgroundColor='white'; }">${i}</button>`;
            }
            
            // 다음 페이지 그룹 버튼
            if (endPage < totalPages) {
                paginationHTML += `<button onclick="goToGalleryPage(${endPage + 1})" style="padding: 8px 12px; border: 1px solid #ddd; background: white; color: #333; border-radius: 4px; cursor: pointer; font-family: 'Noto Sans KR', sans-serif; font-size: 14px;" onmouseover="this.style.backgroundColor='#f5f5f5';" onmouseout="this.style.backgroundColor='white';">›</button>`;
            }
            
            paginationEl.innerHTML = paginationHTML;
        }
        
        // 갤러리 페이지 이동
        function goToGalleryPage(page) {
            galleryCurrentPage = page;
            displayImages(currentFilteredImages);
            // 페이지 상단으로 스크롤
            document.getElementById('gallery').scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
        
        // 갤러리 네비게이션 버튼 업데이트
        function updateGalleryNavButtons() {
            const totalPages = Math.ceil(currentFilteredImages.length / galleryItemsPerPage);
            const prevBtn = document.getElementById('gallery-prev');
            const nextBtn = document.getElementById('gallery-next');
            
            if (prevBtn) {
                if (galleryCurrentPage <= 1) {
                    prevBtn.style.opacity = '0.5';
                    prevBtn.style.pointerEvents = 'none';
                } else {
                    prevBtn.style.opacity = '1';
                    prevBtn.style.pointerEvents = 'auto';
                }
            }
            
            if (nextBtn) {
                if (galleryCurrentPage >= totalPages) {
                    nextBtn.style.opacity = '0.5';
                    nextBtn.style.pointerEvents = 'none';
                } else {
                    nextBtn.style.opacity = '1';
                    nextBtn.style.pointerEvents = 'auto';
                }
            }
        }
        
        // 탭 전환
        function switchGalleryTab(tab, buttonElement) {
            currentTab = tab;
            galleryCurrentPage = 1; // 탭 변경 시 첫 페이지로 리셋
            
            // 모든 탭 버튼에서 active 클래스 제거
            document.querySelectorAll('.gallery-tab').forEach(btn => {
                btn.classList.remove('active');
                btn.style.background = 'white';
                btn.style.color = '#333';
                btn.style.borderColor = '#ddd';
            });
            
            // 클릭한 버튼에 active 클래스 추가
            buttonElement.classList.add('active');
            buttonElement.style.background = '#333';
            buttonElement.style.color = '#fff';
            buttonElement.style.borderColor = '#333';
            
            // 이미지 필터링
            let filteredImages = [];
            if (tab === 'all') {
                filteredImages = allImages;
            } else {
                filteredImages = allImages.filter(img => img.category === tab);
            }
            
            displayImages(filteredImages);
        }
        
        // 라이트박스 열기
        function openLightbox(imageUrl, imageName, index) {
            const lightbox = document.getElementById('lightbox');
            const lightboxImage = document.getElementById('lightbox-image');
            
            if (!lightbox || !lightboxImage) {
                console.error('라이트박스 요소를 찾을 수 없습니다.');
                return;
            }
            
            currentLightboxIndex = index !== undefined ? index : 0;
            
            // 이미지 로드 전에 로딩 상태 표시 및 스타일 초기화
            lightboxImage.style.display = 'block';
            lightboxImage.style.opacity = '0';
            lightboxImage.style.width = '';
            lightboxImage.style.height = '';
            
            lightboxImage.onload = function() {
                this.style.display = 'block';
                this.style.opacity = '1';
                // 모든 스타일 제거 - CSS가 자동으로 처리
                this.removeAttribute('style');
                this.style.maxWidth = '90vw';
                this.style.maxHeight = '90vh';
                this.style.width = 'auto';
                this.style.height = 'auto';
                this.style.display = 'block';
                this.style.margin = '0 auto';
                this.style.opacity = '1';
                this.style.borderRadius = '8px';
            };
            let errorTryCount = 0;
            const maxRetries = 6;
            
            lightboxImage.onerror = function() {
                console.error('이미지 로드 실패:', imageUrl, '시도 횟수:', errorTryCount);
                errorTryCount++;
                
                // 현재 필터링된 이미지에서 원본 이미지 정보 찾기
                if (currentFilteredImages && currentFilteredImages[currentLightboxIndex] && errorTryCount < maxRetries) {
                    const image = currentFilteredImages[currentLightboxIndex];
                    const fileId = image.googleDriveId || image.id;
                    
                    // 여러 대체 URL 시도 (새로운 형식 우선)
                    const alternativeUrls = (image.originalUrls || [
                        image.original,
                        `https://drive.google.com/thumbnail?id=${fileId}&sz=w1200`,
                        `https://lh3.googleusercontent.com/d/${fileId}=w1200`,
                        `https://drive.google.com/thumbnail?id=${fileId}&sz=w1920`,
                        `https://lh3.googleusercontent.com/d/${fileId}=w1920`,
                        image.webContentLink
                    ]).filter(url => url && url !== imageUrl && url !== this.src);
                    
                    if (alternativeUrls.length > 0 && errorTryCount <= alternativeUrls.length) {
                        const nextUrl = alternativeUrls[errorTryCount - 1];
                        console.log(`대체 URL 시도 ${errorTryCount}/${alternativeUrls.length}:`, nextUrl);
                        this.src = nextUrl;
                        return;
                    }
                }
                
                // 모든 URL 실패 시 에러 메시지 표시
                this.style.display = 'block';
                this.style.opacity = '1';
                this.alt = imageName || '이미지를 불러올 수 없습니다';
                console.error('모든 이미지 URL 시도 실패. 파일 ID:', currentFilteredImages?.[currentLightboxIndex]?.googleDriveId, '시도한 URL:', imageUrl);
            };
            
            lightboxImage.src = imageUrl;
            lightboxImage.alt = imageName || '';
            lightbox.style.display = 'flex';
            document.body.style.overflow = 'hidden';
            
            updateLightboxNavigation();
        }
        
        // 라이트박스 네비게이션 업데이트
        function updateLightboxNavigation() {
            const prevBtn = document.getElementById('lightbox-prev');
            const nextBtn = document.getElementById('lightbox-next');
            
            if (currentFilteredImages.length <= 1) {
                prevBtn.style.display = 'none';
                nextBtn.style.display = 'none';
                return;
            }
            
            prevBtn.style.display = currentLightboxIndex === 0 ? 'none' : 'flex';
            nextBtn.style.display = currentLightboxIndex === currentFilteredImages.length - 1 ? 'none' : 'flex';
        }
        
        // 라이트박스 네비게이션 (이전/다음)
        function navigateLightbox(direction) {
            if (currentFilteredImages.length === 0) return;
            
            currentLightboxIndex += direction;
            
            if (currentLightboxIndex < 0) {
                currentLightboxIndex = 0;
                return;
            }
            
            if (currentLightboxIndex >= currentFilteredImages.length) {
                currentLightboxIndex = currentFilteredImages.length - 1;
                return;
            }
            
            const image = currentFilteredImages[currentLightboxIndex];
            const lightboxImage = document.getElementById('lightbox-image');
            
            // 스타일 초기화
            lightboxImage.style.opacity = '0';
            
            // 이미지 로드 후
            lightboxImage.onload = function() {
                this.style.opacity = '1';
            };
            
            lightboxImage.src = image.original;
            lightboxImage.alt = image.name;
            
            updateLightboxNavigation();
        }
        
        // 라이트박스 드래그 시작
        function handleLightboxDragStart(e) {
            if (e.target.id === 'lightbox-image') {
                lightboxIsDragging = true;
                const clientX = e.touches ? e.touches[0].clientX : e.clientX;
                const clientY = e.touches ? e.touches[0].clientY : e.clientY;
                lightboxDragStartX = clientX;
                lightboxDragStartY = clientY;
            }
        }
        
        // 라이트박스 드래그 중
        function handleLightboxDragMove(e) {
            if (!lightboxIsDragging) return;
            
            const clientX = e.touches ? e.touches[0].clientX : e.clientX;
            const clientY = e.touches ? e.touches[0].clientY : e.clientY;
            const deltaX = clientX - lightboxDragStartX;
            const deltaY = clientY - lightboxDragStartY;
            
            // 수평 이동이 수직 이동보다 크면 스와이프로 인식
            if (Math.abs(deltaX) > Math.abs(deltaY) && Math.abs(deltaX) > 50) {
                e.preventDefault();
            }
        }
        
        // 라이트박스 드래그 종료
        function handleLightboxDragEnd(e) {
            if (!lightboxIsDragging) return;
            
            const clientX = e.changedTouches ? e.changedTouches[0].clientX : e.clientX;
            const deltaX = clientX - lightboxDragStartX;
            
            // 좌우 스와이프 감지 (최소 50px 이동)
            if (Math.abs(deltaX) > 50) {
                if (deltaX > 0) {
                    // 오른쪽으로 스와이프 = 이전 이미지
                    navigateLightbox(-1);
                } else {
                    // 왼쪽으로 스와이프 = 다음 이미지
                    navigateLightbox(1);
                }
            }
            
            lightboxIsDragging = false;
        }
        
        // 라이트박스 닫기
        function closeLightbox(event) {
            if (event && event.target.id !== 'lightbox' && event.target.id !== 'lightbox-close' && event.target.id !== 'lightbox-prev' && event.target.id !== 'lightbox-next') {
                return;
            }
            
            const lightbox = document.getElementById('lightbox');
            lightbox.style.display = 'none';
            document.body.style.overflow = '';
            lightboxIsDragging = false;
        }
        
        // 키보드 이벤트 (ESC, 화살표 키)
        document.addEventListener('keydown', (e) => {
            const lightbox = document.getElementById('lightbox');
            if (lightbox.style.display === 'none') return;
            
            if (e.key === 'Escape') {
                closeLightbox();
            } else if (e.key === 'ArrowLeft') {
                navigateLightbox(-1);
            } else if (e.key === 'ArrowRight') {
                navigateLightbox(1);
            }
        });
        
        // 페이지 로드 시 이미지 로드 (Supabase SDK 로드 대기)
        async function initGallery() {
            // Supabase SDK 로드 대기
            let retries = 0;
            while (!window.supabase && retries < 50) {
                await new Promise(resolve => setTimeout(resolve, 100));
                retries++;
            }
            
            if (window.supabase && window.supabase.createClient) {
                gallerySupabaseClient = window.supabase.createClient(SUPABASE_URL_GALLERY, SUPABASE_ANON_KEY_GALLERY);
                console.log('✅ 갤러리 Supabase 클라이언트 초기화 완료');
            }
            
            loadAllImages();
        }
        
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initGallery);
        } else {
            initGallery();
        }
    </script>

    <!-- 12.8. 오시는 길 섹션 -->
    <section id="location" class="relative py-20 px-8" style="background-color: #EFEAE3; position: relative; overflow: hidden;">
        <!-- 배경 질감 -->
        <div style="position: absolute; inset: 0; pointer-events: none; background-image: url('data:image/svg+xml,%3Csvg viewBox=%220 0 200 200%22 xmlns=%22http://www.w3.org/2000/svg%22%3E%3Cfilter id=%22noiseFilter%22%3E%3CfeTurbulence type=%22fractalNoise%22 baseFrequency=%220.65%22 numOctaves=%223%22 stitchTiles=%22stitch%22/%3E%3C/filter%3E%3Crect width=%22100%25%22 height=%22100%25%22 filter=%22url(%23noiseFilter)%22/%3E%3C/svg%3E'); opacity: 0.15;"></div>
        
        <!-- 잎사귀 그림자 효과 -->
        <div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; opacity: 0.1;">
            <div style="position: absolute; top: 10%; left: 5%; width: 200px; height: 200px; background: radial-gradient(ellipse, rgba(0,0,0,0.1) 0%, transparent 70%); border-radius: 50%; filter: blur(40px);"></div>
            <div style="position: absolute; top: 20%; right: 10%; width: 150px; height: 150px; background: radial-gradient(ellipse, rgba(0,0,0,0.08) 0%, transparent 70%); border-radius: 50%; filter: blur(30px);"></div>
        </div>
        
        <div class="max-w-6xl mx-auto relative z-10">
            <!-- 헤더 -->
            <div class="text-center mb-12">
                <p class="text-gray-500 text-sm tracking-widest mb-3">LOCATION</p>
                <h2 class="text-3xl md:text-4xl font-bold mb-4">오시는 길</h2>
                <p class="text-gray-600">경기 부천시 중동로71번길 66</p>
            </div>
            
            <!-- 지도 + 교통정보 그리드 -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-stretch">
                <!-- 왼쪽: 지도 (정사각형) -->
                <div class="rounded-2xl overflow-hidden aspect-square" style="box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15), 0 10px 30px rgba(0, 0, 0, 0.1); background: white; transform: translateY(-5px); transition: transform 0.3s ease, box-shadow 0.3s ease;" onmouseover="this.style.transform='translateY(-8px)'; this.style.boxShadow='0 25px 70px rgba(0, 0, 0, 0.2), 0 15px 40px rgba(0, 0, 0, 0.15)';" onmouseout="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 20px 60px rgba(0, 0, 0, 0.15), 0 10px 30px rgba(0, 0, 0, 0.1)';">
                    <iframe 
                        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3167.8424123076307!2d126.76089717653752!3d37.50358397205447!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x357b7d8e56c4ab8b%3A0x8f5d8f5d8f5d8f5d!2z6rK96riw64-EIOu2gOyynOyLnCDspJHrj5nroZw3MeuyiOq4uCA2Ng!5e0!3m2!1sko!2skr!4v1702828800000!5m2!1sko!2skr" 
                        width="100%" 
                        height="100%" 
                        style="border:0;" 
                        allowfullscreen="" 
                        loading="lazy" 
                        referrerpolicy="no-referrer-when-downgrade">
                    </iframe>
                </div>
                
                <!-- 오른쪽: 교통 정보 -->
                <div class="flex flex-col gap-6">
                    <!-- 지하철 -->
                    <div class="bg-white rounded-2xl p-8 flex-1" style="box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15), 0 10px 30px rgba(0, 0, 0, 0.1); transform: translateY(-5px); transition: transform 0.3s ease, box-shadow 0.3s ease;" onmouseover="this.style.transform='translateY(-8px)'; this.style.boxShadow='0 25px 70px rgba(0, 0, 0, 0.2), 0 15px 40px rgba(0, 0, 0, 0.15)';" onmouseout="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 20px 60px rgba(0, 0, 0, 0.15), 0 10px 30px rgba(0, 0, 0, 0.1)';">
                        <div class="flex items-center gap-5 mb-4">
                            <!-- 7호선 실제 로고 (올리브색) -->
                            <div class="w-16 h-16 rounded-full flex items-center justify-center" style="background-color: #6B8E23;">
                                <span class="text-white text-3xl font-black">7</span>
                            </div>
                            <div>
                                <h3 class="font-bold text-2xl text-gray-900">지하철</h3>
                                <p class="text-gray-500">7호선</p>
                            </div>
                        </div>
                        <div class="pl-2">
                            <p class="text-gray-700 text-lg leading-relaxed">
                                <strong class="text-gray-900">중동역</strong> 3번 출구<br>
                                <span class="text-gray-500">도보 약 5분</span>
                            </p>
                        </div>
                    </div>
                    
                    <!-- 버스 -->
                    <div class="bg-white rounded-2xl p-8 flex-1" style="box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15), 0 10px 30px rgba(0, 0, 0, 0.1); transform: translateY(-5px); transition: transform 0.3s ease, box-shadow 0.3s ease;" onmouseover="this.style.transform='translateY(-8px)'; this.style.boxShadow='0 25px 70px rgba(0, 0, 0, 0.2), 0 15px 40px rgba(0, 0, 0, 0.15)';" onmouseout="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 20px 60px rgba(0, 0, 0, 0.15), 0 10px 30px rgba(0, 0, 0, 0.1)';">
                        <div class="flex items-center gap-5 mb-4">
                            <!-- 버스 아이콘 -->
                            <div class="w-16 h-16 rounded-full flex items-center justify-center" style="background-color: #2ECC71;">
                                <svg class="w-9 h-9 text-white" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M4 16c0 .88.39 1.67 1 2.22V20c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h8v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1.78c.61-.55 1-1.34 1-2.22V6c0-3.5-3.58-4-8-4s-8 .5-8 4v10zm3.5 1c-.83 0-1.5-.67-1.5-1.5S6.67 14 7.5 14s1.5.67 1.5 1.5S8.33 17 7.5 17zm9 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm1.5-6H6V6h12v5z"/>
                                </svg>
                            </div>
                            <div>
                                <h3 class="font-bold text-2xl text-gray-900">버스</h3>
                                <p class="text-gray-500">정류장</p>
                            </div>
                        </div>
                        <div class="pl-2">
                            <p class="text-gray-700 text-lg leading-relaxed">
                                <strong class="text-gray-900">중동 주공아파트</strong> 정류장 하차<br>
                                <span class="text-gray-500">도보 약 3분</span>
                            </p>
                        </div>
                    </div>
                    
                    <!-- 길안내 버튼 -->
                    <div class="grid grid-cols-3 gap-3">
                        <a href="https://map.naver.com/p/search/%EA%B2%BD%EA%B8%B0%20%EB%B6%80%EC%B2%9C%EC%8B%9C%20%EC%A4%91%EB%8F%99%EB%A1%9C71%EB%B2%88%EA%B8%B8%2066" target="_blank" 
                           class="flex items-center justify-center gap-2 px-4 py-4 bg-green-500 text-white rounded-xl font-semibold hover:bg-green-600 transition shadow-lg">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></svg>
                            네이버
                        </a>
                        <a href="https://map.kakao.com/link/search/경기 부천시 중동로71번길 66" target="_blank" 
                           class="flex items-center justify-center gap-2 px-4 py-4 bg-yellow-400 text-black rounded-xl font-semibold hover:bg-yellow-500 transition shadow-lg">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></svg>
                            카카오
                        </a>
                        <a href="tmap://search?name=경기 부천시 중동로71번길 66" 
                           class="flex items-center justify-center gap-2 px-4 py-4 text-white rounded-xl font-semibold hover:opacity-90 transition shadow-lg" style="background-color: #E74C3C;">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></svg>
                            T map
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- 12.7. CTA 섹션 -->
    <section id="contact" class="py-40 px-8 bg-white">
        <div class="max-w-5xl mx-auto text-center">
            <h2 class="text-3xl md:text-4xl font-bold reveal-text" style="line-height: 1.8;">
                인생의 고민이나 힘든 일이 있으신가요?<br>
                목사님께 이메일로 편지를 보내주세요.
            </h2>
            <a href="mailto:pastor@bucheonchurch.org" class="inline-block mt-12 bg-black text-white px-12 py-5 rounded-full text-xl font-semibold hover:bg-gray-800 transition reveal-text">
                목사님께 이메일 보내기 →
            </a>
        </div>
    </section>

    <!-- 12.9. 티커 (푸터 바로 위 고정) -->
    <div class="w-full text-white py-2 md:py-3 overflow-hidden" style="background-color: #FF6B6B; border-radius: 12px 12px 0 0; position: relative; z-index: 10;">
        <div class="relative w-full h-full" style="overflow: hidden;">
            <!-- 왼쪽 페이드 그라데이션 -->
            <div class="absolute left-0 top-0 w-16 md:w-32 h-full z-20 pointer-events-none" style="background: linear-gradient(to right, #FF6B6B 0%, #FF6B6B 50%, transparent 100%);"></div>
            <!-- 오른쪽 페이드 그라데이션 -->
            <div class="absolute right-0 top-0 w-16 md:w-32 h-full z-20 pointer-events-none" style="background: linear-gradient(to left, #FF6B6B 0%, #FF6B6B 50%, transparent 100%);"></div>
            <!-- 티커 콘텐츠 -->
            <div class="ticker-content" style="display: inline-flex; white-space: nowrap;">
                <span class="px-4 md:px-8 text-xs md:text-sm font-semibold">살리는 빛 부천침례교회 ✦ 주일예배 오전 11시 ✦ 수요예배 오후 8시 ✦ 금요예배 오후 9시 ✦ 학생부 토요일 오후 2시 ✦ 유치부 오전 11시 ✦</span>
                <span class="px-4 md:px-8 text-xs md:text-sm font-semibold">살리는 빛 부천침례교회 ✦ 주일예배 오전 11시 ✦ 수요예배 오후 8시 ✦ 금요예배 오후 9시 ✦ 학생부 토요일 오후 2시 ✦ 유치부 오전 11시 ✦</span>
                <span class="px-4 md:px-8 text-xs md:text-sm font-semibold">살리는 빛 부천침례교회 ✦ 주일예배 오전 11시 ✦ 수요예배 오후 8시 ✦ 금요예배 오후 9시 ✦ 학생부 토요일 오후 2시 ✦ 유치부 오전 11시 ✦</span>
                <span class="px-4 md:px-8 text-xs md:text-sm font-semibold">살리는 빛 부천침례교회 ✦ 주일예배 오전 11시 ✦ 수요예배 오후 8시 ✦ 금요예배 오후 9시 ✦ 학생부 토요일 오후 2시 ✦ 유치부 오전 11시 ✦</span>
            </div>
        </div>
    </div>

    <!-- 13. 푸터 -->
    <footer style="background-color: #2d2d2d; position: relative;" class="py-10 px-8">
        <div class="max-w-6xl mx-auto">
            <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-8">
                <!-- 좌측: 교회 정보 -->
                <div>
                    <h3 class="text-white text-2xl font-semibold mb-3">살리는 빛 부천침례교회</h3>
                    <div class="text-gray-300 text-base space-y-2">
                        <div>📍 경기 부천시 중동로71번길 66 | 📞 032-654-1004</div>
                        <div class="text-gray-400">헌금계좌: 농협 351-0428-5575-33 (일반) / 216012-51-312535 (특별)</div>
                    </div>
                        </div>
                
                <!-- 우측: 소셜 미디어 -->
                <div class="flex items-center gap-6">
                    <a href="https://cafe.daum.net/buchonbaptist" target="_blank" class="flex items-center gap-3 text-gray-300 hover:text-white transition text-lg">
                        <svg class="w-7 h-7" viewBox="0 0 24 24" fill="currentColor">
                            <circle cx="12" cy="12" r="10" fill="#FF6B00"/>
                            <text x="12" y="16" text-anchor="middle" fill="white" font-size="10" font-weight="bold">C</text>
                        </svg>
                        카페
                    </a>
                    <a href="https://blog.naver.com/bucheonbaptist" target="_blank" class="flex items-center gap-3 text-gray-300 hover:text-white transition text-lg">
                        <svg class="w-7 h-7" viewBox="0 0 24 24" fill="currentColor">
                            <rect width="24" height="24" rx="4" fill="#03C75A"/>
                            <text x="12" y="17" text-anchor="middle" fill="white" font-size="12" font-weight="bold">N</text>
                        </svg>
                        블로그
                    </a>
                    <a href="https://www.youtube.com/@살리는빛부천침례교회" target="_blank" class="flex items-center gap-3 text-gray-300 hover:text-white transition text-lg">
                        <svg class="w-7 h-7 text-red-500" fill="currentColor" viewBox="0 0 24 24"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg>
                        유튜브
                    </a>
                    </div>
                </div>
            
            <!-- 하단 저작권 -->
            <div class="text-center mt-8 pt-6 border-t border-gray-600">
                <div class="text-gray-400 text-base">
                    © 2025 살리는 빛 부천침례교회. All Rights Reserved.
                </div>
                <div class="text-gray-500 text-sm mt-3">
                    Design by <a href="https://church-beta-one.vercel.app/" target="_blank" class="text-gray-400 hover:text-white transition underline">마라나타 스튜디오 (Maranatha Studio)</a>
                </div>
            </div>
            
            <!-- 관리자 페이지 접근 링크 (푸터 내부 고정) -->
            <div style="position: absolute; bottom: 20px; right: 20px;">
                <a href="admin/content-manage.html" 
                   style="display: flex; flex-direction: column; align-items: center; gap: 6px; padding: 10px 14px; background-color: rgba(255, 255, 255, 0.95); border-radius: 12px; box-shadow: 0 2px 12px rgba(0,0,0,0.15); transition: all 0.3s ease; text-decoration: none; backdrop-filter: blur(10px);"
                   onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 16px rgba(0,0,0,0.25)';"
                   onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 12px rgba(0,0,0,0.15)';"
                   title="관리자 모드">
                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="#333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                        <circle cx="12" cy="16" r="1"></circle>
                        <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                    </svg>
                    <span style="font-family: 'Noto Sans KR', sans-serif; font-size: 11px; color: #333; font-weight: 500; white-space: nowrap;">관리자 모드</span>
                </a>
            </div>
        </div>
    </footer>

    <script>
        // ========================================
        // SUPABASE 초기화
        // ========================================
        const SUPABASE_URL = 'https://fkqxalcwhqohrkdzwhvv.supabase.co';
        const SUPABASE_ANON_KEY = 'sb_publishable_5sLcyIwutRptBow_Xe7MpA_IDKtDwXI';
        
        let supabaseClient = null;
        
        // Supabase SDK 로드 대기
        function initSupabaseClient() {
            console.log('🔍 window.supabase 확인:', typeof window.supabase);
            console.log('🔍 window.supabase.createClient 확인:', typeof window.supabase?.createClient);
            
            if (window.supabase && window.supabase.createClient) {
                try {
                    supabaseClient = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
                    console.log('✅ Supabase client initialized:', supabaseClient ? '성공' : '실패');
                    return true;
                } catch (error) {
                    console.error('❌ Supabase client 생성 오류:', error);
                    return false;
                }
            }
            console.warn('⚠️ window.supabase 또는 createClient를 찾을 수 없음');
            return false;
        }
        
        // SDK 로드 대기 (최대 5초)
        let retryCount = 0;
        const maxRetries = 50;
        function waitForSupabase() {
            console.log(`⏳ Supabase SDK 대기 중... (시도 ${retryCount + 1}/${maxRetries})`);
            
            if (initSupabaseClient()) {
                console.log('✅ Supabase SDK 로드 성공!');
                return Promise.resolve();
            }
            
            if (retryCount < maxRetries) {
                retryCount++;
                return new Promise(resolve => setTimeout(() => {
                    waitForSupabase().then(resolve);
                }, 100));
            }
            
            console.error('❌ Supabase SDK 로드 실패 (최대 재시도 횟수 초과)');
            console.error('❌ window.supabase 상태:', window.supabase);
            return Promise.resolve();
        }
        
        // ========================================
        // 데이터 로드 함수들
        // ========================================
        async function loadServiceCards() {
            // 하드코딩된 서비스 카드를 사용하므로 Supabase에서 로드하지 않음
            // Supabase 데이터가 있으면 사용하고, 없으면 하드코딩된 카드 유지
            if (!supabaseClient) {
                console.log('ℹ️ Supabase client not available, using hardcoded service cards');
                return;
            }
            
            try {
                const { data, error } = await supabaseClient
                    .from('service_cards')
                    .select('*')
                    .eq('is_active', true)
                    .order('display_order', { ascending: true });
                
                if (error) {
                    console.warn('⚠️ Could not load service cards from Supabase, using hardcoded:', error);
                    return;
                }
                
                // Supabase에 데이터가 있으면 사용 (현재는 하드코딩된 카드 사용)
                if (data && data.length > 0) {
                    console.log('✅ Service cards loaded from Supabase:', data.length);
                    // 필요시 여기서 동적 렌더링 가능
                } else {
                    console.log('ℹ️ No service cards in Supabase, using hardcoded cards');
                }
            } catch (error) {
                console.warn('⚠️ Could not load service cards from Supabase, using hardcoded:', error);
            }
        }
        
        async function loadTestimonialCards() {
            // 간증 카드는 하드코딩된 것을 사용하므로 Supabase에서 로드하지 않음
            // Supabase 데이터가 있으면 사용하고, 없으면 하드코딩된 카드 유지
            if (!supabaseClient) {
                console.log('ℹ️ Supabase client not available, using hardcoded testimonial cards');
                return;
            }
            
            try {
                const { data, error } = await supabaseClient
                    .from('testimonial_cards')
                    .select('*')
                    .eq('is_active', true)
                    .order('display_order', { ascending: true });
                
                if (error) {
                    console.warn('⚠️ Could not load testimonial cards from Supabase, using hardcoded:', error);
                    return;
                }
                
                // Supabase에 데이터가 있으면 사용 (현재는 하드코딩된 카드 사용)
                if (data && data.length > 0) {
                    console.log('✅ Testimonial cards loaded from Supabase:', data.length);
                    // 필요시 여기서 동적 렌더링 가능
                } else {
                    console.log('ℹ️ No testimonial cards in Supabase, using hardcoded cards');
                }
            } catch (error) {
                console.warn('⚠️ Could not load testimonial cards from Supabase, using hardcoded:', error);
            }
        }
        
        async function loadProgramCards() {
            try {
                const { data, error } = await supabaseClient
                    .from('program_cards')
                    .select('*')
                    .eq('is_active', true)
                    .order('display_order', { ascending: true });

                if (error) throw error;

                if (data && data.length > 0) {
                    const container = document.getElementById('programCards');
                    if (!container) {
                        console.warn('⚠️ programCards container not found');
                        return;
                    }
                    container.innerHTML = data.map(card => `
                        <div class="bg-white rounded-3xl p-10 shadow-lg hover:shadow-2xl transition-all duration-300 ${card.is_recommended ? 'ring-4 ring-amber-400 relative' : ''}">
                            ${card.is_recommended ? '<div class="absolute -top-4 left-8 bg-amber-400 text-black px-6 py-2 rounded-full font-bold text-sm">RECOMMENDED</div>' : ''}
                            <h3 class="text-3xl font-bold mb-4">${card.title}</h3>
                            <div class="text-amber-500 text-lg font-semibold mb-6">${card.duration} ${card.duration_label || '과정'}</div>
                            <p class="text-gray-600 leading-relaxed mb-8">${card.description}</p>
                            <ul class="space-y-3 mb-8">
                                ${card.features.map(feature => `<li class="flex items-center gap-3"><span class="text-amber-500">✓</span> ${feature}</li>`).join('')}
                            </ul>
                            <button class="w-full bg-black text-white py-4 rounded-xl font-semibold hover:bg-gray-800 transition">${card.button_text || '자세히 보기'}</button>
                        </div>
                    `).join('');
                    console.log('✅ Program cards loaded:', data.length);
                }
            } catch (error) {
                console.error('❌ Error loading program cards:', error);
            }
        }
        
        async function loadStatsItems() {
            try {
                const { data, error } = await supabaseClient
                    .from('stats_items')
                    .select('*')
                    .eq('is_active', true)
                    .order('display_order', { ascending: true });

                if (error) throw error;

                if (data && data.length > 0) {
                    const container = document.getElementById('statsItems');
                    if (!container) {
                        console.warn('⚠️ statsItems container not found');
                        return;
                    }
                    container.innerHTML = data.map(stat => `
                        <div class="text-center">
                            <div class="text-7xl font-bold mb-4">${stat.value}</div>
                            <div class="text-2xl font-semibold mb-2">${stat.label}</div>
                            <div class="text-gray-600">${stat.description}</div>
                        </div>
                    `).join('');
                    console.log('✅ Stats items loaded:', data.length);
                }
            } catch (error) {
                console.error('❌ Error loading stats items:', error);
            }
        }
        
        // ========================================
        // YouTube 재생목록 최신 영상 로드 (API 사용)
        // ========================================
        async function loadLatestYouTubeVideo() {
            const apiKey = 'AIzaSyDcGTEeXo5wDMcNLhmcylPvIGQPFQcAyuk';
                const playlistId = 'PL_0QqEAUL4K8x7GDlngrYo2QlVPVZV3WY';
            const iframe = document.getElementById('youtubePlayer');
            
            try {
                // YouTube Data API v3를 사용해서 재생목록의 모든 영상 가져오기
                let allVideos = [];
                let nextPageToken = '';
                
                // 모든 페이지의 영상을 가져옴 (재생목록에 50개 이상 있을 수 있음)
                do {
                    const url = `https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&playlistId=${playlistId}&maxResults=50&key=${apiKey}${nextPageToken ? '&pageToken=' + nextPageToken : ''}`;
                    const response = await fetch(url);
                    const data = await response.json();
                    
                    if (data.error) {
                        throw new Error(data.error.message);
                    }
                    
                    if (data.items && data.items.length > 0) {
                        allVideos = allVideos.concat(data.items);
                    }
                    
                    nextPageToken = data.nextPageToken || '';
                } while (nextPageToken);
                
                if (allVideos.length > 0) {
                    // 마지막 영상이 최신 영상 (재생목록에 가장 나중에 추가된 영상)
                    const latestVideo = allVideos[allVideos.length - 1];
                    const latestVideoId = latestVideo.snippet.resourceId.videoId;
                    const videoTitle = latestVideo.snippet.title;
                    
                    console.log('✅ 최신 설교 영상 로드:', videoTitle);
                    
                if (iframe) {
                        // 최신 영상을 재생목록과 함께 임베드 (최신 영상부터 시작)
                        iframe.src = `https://www.youtube.com/embed/${latestVideoId}?rel=0&modestbranding=1`;
                    }
                } else {
                    throw new Error('재생목록에 영상이 없습니다.');
                }
                
            } catch (error) {
                console.error('❌ YouTube API 에러:', error);
                // 에러 발생 시 기본 재생목록 URL 사용
                if (iframe) {
                    iframe.src = `https://www.youtube.com/embed/videoseries?list=${playlistId}&rel=0&modestbranding=1`;
                }
            }
        }
        
        
        async function loadHeroSection() {
            try {
                const { data, error } = await supabaseClient
                    .from('hero_section')
                    .select('*')
                    .eq('is_active', true)
                    .single();
                
                if (error) throw error;
                
                if (data) {
                    document.getElementById('heroTitle').textContent = data.main_title;
                    document.getElementById('heroSubtitle').textContent = data.sub_text;
                    console.log('✅ Hero section loaded');
                }
            } catch (error) {
                console.error('❌ Error loading hero section:', error);
            }
        }
        
        async function loadLargeStatements() {
            try {
                const { data, error } = await supabaseClient
                    .from('large_statements')
                    .select('*')
                    .eq('is_active', true)
                    .order('display_order', { ascending: true });
                
                if (error) throw error;
                
                if (data && data.length > 0) {
                    // Intro statement - 세 가지 가치 섹션은 하드코딩된 내용 사용
                    // const introStatement = data.find(s => s.section_key === 'intro');
                    // if (introStatement) {
                    //     document.getElementById('introStatement').innerHTML = introStatement.content;
                    // }
                    
                    // Quote statement - 마태복음 말씀은 하드코딩된 내용 유지 (Supabase에서 덮어쓰지 않음)
                    // const quoteStatement = data.find(s => s.section_key === 'quote');
                    // if (quoteStatement) {
                    //     document.getElementById('quoteStatement').innerHTML = quoteStatement.content;
                    // }
                    
                    console.log('✅ Large statements loaded:', data.length);
                }
            } catch (error) {
                console.error('❌ Error loading large statements:', error);
            }
        }
        
        // ========================================
        // 예배시간, 공지사항, 기도제목 로드
        // ========================================
        async function loadWorshipTimes() {
            console.log('🔍 loadWorshipTimes() 함수 시작');
            try {
                const container = document.getElementById('worship-times-container');
                console.log('🔍 worship-times-container 찾기:', container ? '✅ 찾음' : '❌ 못 찾음');
                if (!container) {
                    console.error('❌ worship-times-container 요소를 찾을 수 없습니다!');
                    return;
                }
                
                // 기본값 (하드코딩) - 빈티지 스타일에 맞게 수정
                const defaultData = [
                    { service_name: '주일예배', service_time: '11:00 AM', day_of_week: 'SUNDAY' },
                    { service_name: '수요예배', service_time: '8:00 PM', day_of_week: 'WEDNESDAY' },
                    { service_name: '금요예배', service_time: '9:00 PM', day_of_week: 'FRIDAY' },
                    { service_name: '학생부예배', service_time: '2:00 PM', day_of_week: 'SATURDAY' },
                    { service_name: '유치부예배', service_time: '11:00 AM', day_of_week: 'SUNDAY' }
                ];
                
                let data = defaultData;
                
                if (supabaseClient) {
                    try {
                        const { data: supabaseData, error } = await supabaseClient
                            .from('worship_times')
                            .select('*')
                            .eq('is_active', true)
                            .order('display_order', { ascending: true });
                        
                        if (error) {
                            console.error('❌ Worship times query error:', error);
                        } else if (supabaseData && supabaseData.length > 0) {
                            data = supabaseData;
                            console.log('✅ Worship times loaded from Supabase:', data.length, data);
                        } else {
                            console.log('ℹ️ No worship times in Supabase, using defaults');
                        }
                    } catch (error) {
                        console.warn('⚠️ Could not load from Supabase, using defaults:', error);
                    }
                } else {
                    console.log('ℹ️ Supabase client not available, using default worship times');
                }
                
                if (data && data.length > 0) {
                    // Supabase 데이터를 빈티지 스타일 형식으로 변환
                    const formatData = data.map(item => {
                        // service_time을 AM/PM 형식으로 변환
                        let timeFormatted = item.service_time || '';
                        if (timeFormatted.includes('오전')) {
                            timeFormatted = timeFormatted.replace('오전', '').replace('시', '').trim();
                            const hour = parseInt(timeFormatted);
                            timeFormatted = `${hour.toString().padStart(2, '0')}:00 AM`;
                        } else if (timeFormatted.includes('오후')) {
                            timeFormatted = timeFormatted.replace('오후', '').replace('시', '').trim();
                            const hour = parseInt(timeFormatted);
                            timeFormatted = `${hour.toString().padStart(2, '0')}:00 PM`;
                        }
                        
                        // day_of_week를 영문 대문자로 변환
                        let dayFormatted = item.day_of_week || '';
                        const dayMap = {
                            '주일': 'SUNDAY',
                            '일요일': 'SUNDAY',
                            '수요일': 'WEDNESDAY',
                            '금요일': 'FRIDAY',
                            '토요일': 'SATURDAY'
                        };
                        if (dayMap[dayFormatted]) {
                            dayFormatted = dayMap[dayFormatted];
                        } else if (dayFormatted && !dayFormatted.match(/^[A-Z]+$/)) {
                            // 한글이면 기본값 사용
                            dayFormatted = '';
                        }
                        
                        // service_name에서 공백 제거
                        const nameFormatted = (item.service_name || '').replace(/\s/g, '');
                        
                        return {
                            name: nameFormatted,
                            time: timeFormatted,
                            day: dayFormatted
                        };
                    });
                    
                    // 레이아웃: 주일예배 단독, 나머지 4개는 한 줄로 가로 배치
                    let html = '';
                    
                    // 주일예배 찾기 (단독 배치)
                    const sunday1 = formatData.find(item => item.name === '주일예배');
                    if (sunday1) {
                        html += `
                            <div class="worship-item">
                                ${sunday1.day ? `<span class="day">${sunday1.day}</span>` : ''}
                                <span class="name">${sunday1.name}</span>
                                <span class="time">${sunday1.time}</span>
                            </div>
                        `;
                    }
                    
                    // 나머지 4개 (수요, 금요, 학생, 유치) 찾기
                    const others = formatData.filter(item => item.name !== '주일예배');
                    if (others.length > 0) {
                        html += `
                            <div class="worship-items-row">
                                ${others.map(item => `
                                    <div class="worship-item">
                                        ${item.day ? `<span class="day">${item.day}</span>` : ''}
                                        <span class="name">${item.name}</span>
                                        <span class="time">${item.time}</span>
                                    </div>
                                `).join('')}
                            </div>
                        `;
                    }
                    
                    container.innerHTML = html;
                    console.log('✅ Worship times rendered:', formatData.length, 'items');
                } else {
                    console.error('❌ No worship times data to render');
                }
            } catch (error) {
                console.error('❌ Error loading worship times:', error);
            }
        }

        async function loadNotices() {
            console.log('🔍 loadNotices() 함수 시작');
            try {
                const trackEl = document.getElementById('notice-carousel-track');
                console.log('🔍 notice-carousel-track 찾기:', trackEl ? '✅ 찾음' : '❌ 못 찾음');
                if (!trackEl) {
                    console.error('❌ notice-carousel-track 요소를 찾을 수 없습니다!');
                    return;
                }
                
                // 기본값 (하드코딩)
                const defaultData = [
                    { content: '12월 25일 부터 29일 까지\n연말 휴가로 잠시 쉬어가려 합니다.\n해당 날짜에 모든 업무가 중단되오니\n이용에 참고 부탁 드립니다.\n예약 문의는 DM으로 부탁드립니다.' },
                    { content: '새해 예배 안내\n새해를 맞이하여 특별 예배를 드립니다.\n많은 참석 부탁드립니다.' },
                    { content: '교회 행사 안내\n다가오는 교회 행사에 대한 안내입니다.\n자세한 내용은 교회 게시판을 확인해 주세요.' }
                ];
                
                let data = defaultData;
                
                if (supabaseClient) {
                    try {
                        const { data: supabaseData, error } = await supabaseClient
                            .from('notices')
                            .select('*')
                            .eq('is_active', true)
                            .order('display_order', { ascending: false });
                        
                        if (error) {
                            console.error('❌ Notices query error:', error);
                        } else if (supabaseData && supabaseData.length > 0) {
                            data = supabaseData;
                            console.log('✅ Notices loaded from Supabase:', data.length, data);
                        } else {
                            console.log('ℹ️ No notices in Supabase, using defaults');
                        }
                    } catch (error) {
                        console.warn('⚠️ Could not load from Supabase, using defaults:', error);
                    }
                } else {
                    console.log('ℹ️ Supabase client not available, using default notices');
                }
                
                if (data && data.length > 0) {
                    // 데이터를 전역 변수에 저장 (모달에서 사용)
                    window.noticesData = data;
                    noticeAllData = data;
                    noticeCurrentPage = 1; // 데이터 로드 시 첫 페이지로 리셋
                    
                    updateNoticeCarousel();
                    console.log('✅ Notices rendered:', data.length, 'items');
                } else {
                    console.error('❌ No notices data to render');
                }
            } catch (error) {
                console.error('❌ Error loading notices:', error);
            }
        }

        async function loadPrayerRequests() {
            console.log('🔍 loadPrayerRequests() 함수 시작');
            try {
                const trackEl = document.getElementById('prayer-carousel-track');
                console.log('🔍 prayer-carousel-track 찾기:', trackEl ? '✅ 찾음' : '❌ 못 찾음');
                if (!trackEl) {
                    console.error('❌ prayer-carousel-track 요소를 찾을 수 없습니다!');
                    return;
                }
                
                // 기본값 (하드코딩)
                const defaultData = [
                    { content: '교회를 위한 기도\n교회가 하나님의 뜻을 따라\n섬기는 공동체가 되도록\n기도해 주세요.' },
                    { content: '성도들을 위한 기도\n모든 성도들이 하나님의\n사랑 안에서 성장하도록\n기도해 주세요.' },
                    { content: '선교를 위한 기도\n전 세계 복음 전파를 위한\n기도에 함께해 주세요.' },
                    { content: '사회를 위한 기도\n우리 사회가 하나님의\n평화와 정의로 가득하도록\n기도해 주세요.' }
                ];
                
                let data = defaultData;
                
                if (supabaseClient) {
                    try {
                        const { data: supabaseData, error } = await supabaseClient
                            .from('prayer_requests')
                            .select('*')
                            .eq('is_active', true)
                            .order('display_order', { ascending: false });
                        
                        if (error) {
                            console.error('❌ Prayer requests query error:', error);
                        } else if (supabaseData && supabaseData.length > 0) {
                            data = supabaseData;
                            console.log('✅ Prayer requests loaded from Supabase:', data.length, data);
                        } else {
                            console.log('ℹ️ No prayer requests in Supabase, using defaults');
                        }
                    } catch (error) {
                        console.warn('⚠️ Could not load from Supabase, using defaults:', error);
                    }
                } else {
                    console.log('ℹ️ Supabase client not available, using default prayer requests');
                }
                
                if (data && data.length > 0) {
                    // 데이터를 전역 변수에 저장 (모달에서 사용)
                    window.prayerData = data;
                    prayerAllData = data;
                    prayerCurrentPage = 1; // 데이터 로드 시 첫 페이지로 리셋
                    
                    updatePrayerCarousel();
                    console.log('✅ Prayer requests rendered:', data.length, 'items');
                } else {
                    prayerAllData = [];
                    updatePrayerCarousel();
                    console.error('❌ No prayer requests data to render');
                }
            } catch (error) {
                console.error('❌ Error loading prayer requests:', error);
            }
        }

        // ========================================
        // 날짜 포맷 함수 (손글씨 스타일)
        // ========================================
        function formatHandwrittenDate(dateString) {
            if (!dateString) return '';
            const date = new Date(dateString);
            const year = date.getFullYear();
            const month = date.getMonth() + 1;
            const day = date.getDate();
            const hours = date.getHours();
            const minutes = date.getMinutes();
            
            return `${year}.${month.toString().padStart(2, '0')}.${day.toString().padStart(2, '0')} ${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}`;
        }
        
        // ========================================
        // 공지사항/기도제목 모달 함수
        // ========================================
        function openNoticeModalFromData(index) {
            if (!window.noticesData || !window.noticesData[index]) return;
            
            const item = window.noticesData[index];
            const modal = document.getElementById('content-modal');
            const modalType = document.getElementById('modal-type');
            const modalTitle = document.getElementById('modal-title');
            const modalContent = document.getElementById('modal-content');
            const modalDate = document.getElementById('modal-date');
            
            modalType.textContent = 'NOTICE';
            modalContent.textContent = item.content || '';
            
            // 일시 표시
            const dateStr = formatHandwrittenDate(item.created_at || item.updated_at);
            if (dateStr) {
                modalDate.textContent = dateStr;
                modalDate.style.display = 'block';
            } else {
                modalDate.style.display = 'none';
            }
            
            if (item.title && item.title.trim()) {
                modalTitle.textContent = item.title;
                modalTitle.style.display = 'block';
            } else {
                modalTitle.style.display = 'none';
            }
            
            // 초기 상태 설정
            const modalContentEl = modal.querySelector('.modal-content');
            modalContentEl.style.transform = 'scale(0.85) translateY(20px)';
            modalContentEl.style.opacity = '0';
            modal.style.background = 'rgba(0, 0, 0, 0)';
            modal.style.backdropFilter = 'blur(0px)';
            
            modal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
            
            // 부드러운 애니메이션 (double RAF로 최적화)
            requestAnimationFrame(() => {
                requestAnimationFrame(() => {
                    modal.classList.add('modal-open');
                });
            });
        }
        
        function openPrayerModalFromData(index) {
            if (!window.prayerData || !window.prayerData[index]) return;
            
            const item = window.prayerData[index];
            const modal = document.getElementById('content-modal');
            const modalType = document.getElementById('modal-type');
            const modalTitle = document.getElementById('modal-title');
            const modalContent = document.getElementById('modal-content');
            const modalDate = document.getElementById('modal-date');
            
            modalType.textContent = 'PRAYER';
            modalContent.textContent = item.content || '';
            
            // 일시 표시
            const dateStr = formatHandwrittenDate(item.created_at || item.updated_at);
            if (dateStr) {
                modalDate.textContent = dateStr;
                modalDate.style.display = 'block';
            } else {
                modalDate.style.display = 'none';
            }
            
            if (item.title && item.title.trim()) {
                modalTitle.textContent = item.title;
                modalTitle.style.display = 'block';
            } else {
                modalTitle.style.display = 'none';
            }
            
            // 초기 상태 설정
            const modalContentEl = modal.querySelector('.modal-content');
            modalContentEl.style.transform = 'scale(0.85) translateY(20px)';
            modalContentEl.style.opacity = '0';
            modal.style.background = 'rgba(0, 0, 0, 0)';
            modal.style.backdropFilter = 'blur(0px)';
            
            modal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
            
            // 부드러운 애니메이션 (double RAF로 최적화)
            requestAnimationFrame(() => {
                requestAnimationFrame(() => {
                    modal.classList.add('modal-open');
                });
            });
        }
        
        function closeContentModal(event) {
            if (event && event.target.id !== 'content-modal' && !event.target.closest('.modal-content')) {
                return;
            }
            
            const modal = document.getElementById('content-modal');
            const modalContentEl = modal.querySelector('.modal-content');
            
            // 닫기 애니메이션
            modal.classList.remove('modal-open');
            modalContentEl.style.transform = 'scale(0.85) translateY(20px)';
            modalContentEl.style.opacity = '0';
            modal.style.background = 'rgba(0, 0, 0, 0)';
            modal.style.backdropFilter = 'blur(0px)';
            
            setTimeout(() => {
                modal.style.display = 'none';
                document.body.style.overflow = '';
                // 초기 상태로 리셋
                modalContentEl.style.transform = 'scale(0.85) translateY(20px)';
                modalContentEl.style.opacity = '0';
            }, 400);
        }
        
        // ESC 키로 모달 닫기
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                const modal = document.getElementById('content-modal');
                if (modal.style.display === 'flex') {
                    closeContentModal();
                }
            }
        });
        
        // ========================================
        // 히어로 슬라이드쇼 (3초 간격)
        // ========================================
        function initHeroSlideshow() {
            const slides = document.querySelectorAll('.hero-slide');
            if (slides.length === 0) return;
            
            let currentSlide = 0;
            const totalSlides = slides.length;
            
            setInterval(() => {
                // 현재 슬라이드 페이드 아웃
                slides[currentSlide].style.opacity = '0';
                
                // 다음 슬라이드로 이동
                currentSlide = (currentSlide + 1) % totalSlides;
                
                // 다음 슬라이드 페이드 인
                slides[currentSlide].style.opacity = '1';
            }, 3000); // 3초 간격
            
            console.log('🖼️ 히어로 슬라이드쇼 시작 - ' + totalSlides + '개 이미지');
        }
        
        // DOM 로드 후 슬라이드쇼 시작
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initHeroSlideshow);
        } else {
            initHeroSlideshow();
        }
        
        // ========================================
        // 페이지 로드 시 모든 데이터 불러오기
        // ========================================
        window.addEventListener('DOMContentLoaded', async () => {
            console.log('🚀 ========== 페이지 로드 시작 ==========');
            console.log('🚀 Supabase 연동 시작...');
            
            // Supabase SDK 로드 대기
            console.log('⏳ Supabase SDK 로드 대기 중...');
            await waitForSupabase();
            
            if (!supabaseClient) {
                console.error('❌ Supabase client 초기화 실패!');
                console.warn('⚠️ Supabase client not available, using defaults');
            } else {
                console.log('✅ Supabase client 초기화 성공!');
            }
            
            console.log('📋 데이터 로드 함수들 실행 시작...');
            console.log('1️⃣ loadWorshipTimes() 실행');
            await loadWorshipTimes();
            
            console.log('2️⃣ loadNotices() 실행');
            await loadNotices();
            
            console.log('3️⃣ loadPrayerRequests() 실행');
            await loadPrayerRequests();
            
            // 다른 데이터들도 로드
            await Promise.all([
                loadHeroSection(),
                loadLargeStatements(),
                loadServiceCards(),
                loadTestimonialCards(),
                loadProgramCards(),
                loadStatsItems(),
                loadLatestYouTubeVideo()
            ]);
            
            console.log('✅ ========== 모든 데이터 로드 완료! ==========');
            
            // 데이터 로드 후 애니메이션 초기화
            setTimeout(() => {
                updateHorizontalScroll();
                // 간증 카드 초기화는 DOM이 완전히 로드된 후에 실행
                setTimeout(() => {
                    initStackingCards();
                    updateStackingCards();
                }, 200);
                
                // Intersection Observer 재적용
                document.querySelectorAll('.reveal-text, .fade-in, .text-reveal, .line-reveal').forEach(el => {
                    observer.observe(el);
                });
            }, 100);
        });
        
        // ========================================
        // INTERSECTION OBSERVER - FADE IN
        // ========================================
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, { 
            threshold: 0.1, 
            rootMargin: '0px 0px -50px 0px' 
        });

        document.querySelectorAll('.reveal-text, .fade-in, .text-reveal, .line-reveal').forEach(el => {
            observer.observe(el);
        });

        // ========================================
        // 가로 스크롤 섹션
        // ========================================
        const horizontalSection = document.querySelector('.horizontal-scroll-container');
        const track = document.getElementById('horizontalTrack');
        const totalCards = 3;

        // 모바일 터치 스와이프 지원
        let touchStartX = 0;
        let touchStartY = 0;
        let isHorizontalScrolling = false;
        let currentCardIndex = 0;
        let isMobile = window.innerWidth <= 768;
        
        function updateHorizontalScroll() {
            if (!horizontalSection || !track) return;
            
            // 모바일/데스크탑 모두 스크롤 기반으로 작동
            const rect = horizontalSection.getBoundingClientRect();
            const sectionTop = rect.top;
            const sectionHeight = horizontalSection.offsetHeight;
            const windowHeight = window.innerHeight;
            
            const scrollableDistance = sectionHeight - windowHeight;
            const scrollProgress = Math.max(0, Math.min(1, -sectionTop / scrollableDistance));
            
            // 매우 부드러운 easing 함수 (easeInOutQuart)
            const easedProgress = scrollProgress < 0.5
                ? 8 * scrollProgress * scrollProgress * scrollProgress * scrollProgress
                : 1 - Math.pow(-2 * scrollProgress + 2, 4) / 2;
            
            const cardProgress = easedProgress * (totalCards - 1);
            const translateX = -cardProgress * 100;
            
            // GPU 가속을 위한 translate3d 사용
            track.style.transform = `translate3d(${translateX}vw, 0, 0)`;
        }
        
        // 모바일 터치 이벤트 처리
        if (horizontalSection && track) {
            horizontalSection.addEventListener('touchstart', (e) => {
                touchStartX = e.touches[0].clientX;
                touchStartY = e.touches[0].clientY;
                isHorizontalScrolling = false;
            }, { passive: true });
            
            horizontalSection.addEventListener('touchmove', (e) => {
                if (!isHorizontalScrolling) {
                    const deltaX = Math.abs(e.touches[0].clientX - touchStartX);
                    const deltaY = Math.abs(e.touches[0].clientY - touchStartY);
                    isHorizontalScrolling = deltaX > deltaY && deltaX > 10;
                }
            }, { passive: true });
            
            horizontalSection.addEventListener('touchend', (e) => {
                if (!isMobile) return;
                
                const touchEndX = e.changedTouches[0].clientX;
                const touchEndY = e.changedTouches[0].clientY;
                const deltaX = touchStartX - touchEndX;
                const deltaY = touchStartY - touchEndY;
                
                if (isHorizontalScrolling && Math.abs(deltaX) > 50) {
                    if (deltaX > 0 && currentCardIndex < totalCards - 1) {
                        // 왼쪽으로 스와이프 = 다음 카드
                        currentCardIndex++;
                    } else if (deltaX < 0 && currentCardIndex > 0) {
                        // 오른쪽으로 스와이프 = 이전 카드
                        currentCardIndex--;
                    }
                    updateHorizontalScroll();
                }
            }, { passive: true });
        }
        
        // 화면 크기 변경 감지
        window.addEventListener('resize', () => {
            isMobile = window.innerWidth <= 768;
            if (!isMobile) {
                currentCardIndex = 0;
            }
            updateHorizontalScroll();
        });

        // ========================================
        // 스택 카드 섹션
        // ========================================
        const stackingSection = document.querySelector('.stacking-cards-container');

        function initStackingCards() {
            // 카드들의 초기 위치 설정
            const stackCard1 = document.getElementById('stackCard1');
            const stackCard2 = document.getElementById('stackCard2');
            const stackCard3 = document.getElementById('stackCard3');
            const stackCard4 = document.getElementById('stackCard4');
            const stackCard5 = document.getElementById('stackCard5');
            
            // iPad/태블릿에서 카드를 오른쪽으로 이동하여 간격 확보 (768px ~ 1400px)
            const isTablet = window.innerWidth >= 768 && window.innerWidth <= 1400;
            const isMobileView = window.innerWidth <= 768;
            
            // 모바일/데스크탑에 따른 기본 transform
            const baseTransform = isMobileView ? 'translateX(-50%)' : 'translate(-50%, -50%)';
            
            if (stackCard1) {
                stackCard1.style.transform = baseTransform;
                stackCard1.style.opacity = '1';
                stackCard1.style.zIndex = '5';
                if (isMobileView) {
                    stackCard1.style.left = '50%';
                } else if (window.innerWidth > 1400) {
                    stackCard1.style.left = 'calc(50% + 5cm)';
                } else if (isTablet) {
                    stackCard1.style.left = '70%';
                } else {
                    stackCard1.style.left = '50%';
                }
            }
            if (stackCard2) {
                stackCard2.style.transform = `${baseTransform} translateY(20px) rotate(2deg) scale(0.95)`;
                stackCard2.style.opacity = '0.7';
                stackCard2.style.zIndex = '4';
                if (isMobileView) {
                    stackCard2.style.left = '50%';
                } else if (window.innerWidth > 1400) {
                    stackCard2.style.left = 'calc(50% + 5cm)';
                } else if (isTablet) {
                    stackCard2.style.left = '70%';
                } else {
                    stackCard2.style.left = '50%';
                }
            }
            if (stackCard3) {
                stackCard3.style.transform = `${baseTransform} translateY(40px) rotate(-2deg) scale(0.9)`;
                stackCard3.style.opacity = '0.5';
                stackCard3.style.zIndex = '3';
                if (isMobileView) {
                    stackCard3.style.left = '50%';
                } else if (window.innerWidth > 1400) {
                    stackCard3.style.left = 'calc(50% + 5cm)';
                } else if (isTablet) {
                    stackCard3.style.left = '70%';
                } else {
                    stackCard3.style.left = '50%';
                }
            }
            if (stackCard4) {
                stackCard4.style.transform = `${baseTransform} translateY(60px) rotate(2deg) scale(0.85)`;
                stackCard4.style.opacity = '0.4';
                stackCard4.style.zIndex = '2';
                if (isMobileView) {
                    stackCard4.style.left = '50%';
                } else if (window.innerWidth > 1400) {
                    stackCard4.style.left = 'calc(50% + 5cm)';
                } else if (isTablet) {
                    stackCard4.style.left = '70%';
                } else {
                    stackCard4.style.left = '50%';
                }
            }
            if (stackCard5) {
                stackCard5.style.transform = `${baseTransform} translateY(80px) rotate(-2deg) scale(0.8)`;
                stackCard5.style.opacity = '0.3';
                stackCard5.style.zIndex = '1';
                if (isMobileView) {
                    stackCard5.style.left = '50%';
                } else if (window.innerWidth > 1400) {
                    stackCard5.style.left = 'calc(50% + 5cm)';
                } else if (isTablet) {
                    stackCard5.style.left = '70%';
                } else {
                    stackCard5.style.left = '50%';
                }
            }
        }
        
        function updateStackingCards() {
            // 동적으로 로드된 카드들 가져오기
            const stackCard1 = document.getElementById('stackCard1');
            const stackCard2 = document.getElementById('stackCard2');
            const stackCard3 = document.getElementById('stackCard3');
            const stackCard4 = document.getElementById('stackCard4');
            const stackCard5 = document.getElementById('stackCard5');
            
            // 카드가 아직 로드되지 않았으면 리턴
            if (!stackCard1 || !stackCard2 || !stackCard3 || !stackCard4 || !stackCard5) {
                console.warn('⚠️ Some testimonial cards not found, retrying...');
                // 약간의 지연 후 다시 시도
                setTimeout(() => {
                    const retryCard1 = document.getElementById('stackCard1');
                    const retryCard2 = document.getElementById('stackCard2');
                    const retryCard3 = document.getElementById('stackCard3');
                    const retryCard4 = document.getElementById('stackCard4');
                    const retryCard5 = document.getElementById('stackCard5');
                    if (retryCard1 && retryCard2 && retryCard3 && retryCard4 && retryCard5) {
                        initStackingCards();
                        updateStackingCards();
                    }
                }, 100);
                return;
            }
            
            const rect = stackingSection.getBoundingClientRect();
            const sectionTop = rect.top;
            const sectionHeight = stackingSection.offsetHeight;
            const windowHeight = window.innerHeight;
            
            const scrollableDistance = sectionHeight - windowHeight;
            const scrollProgress = Math.max(0, Math.min(1, -sectionTop / scrollableDistance));
            
            // 모바일 여부 확인
            const isMobileView = window.innerWidth <= 768;
            // 모바일/데스크탑에 따른 기본 transform
            const baseTransform = isMobileView ? 'translateX(-50%)' : 'translate(-50%, -50%)';

            // Card 1 (Yellow) - 맨 위, 처음에 보임 → 위로 날아감
            if (scrollProgress < 0.3) {
                const p = scrollProgress / 0.3;
                const eased = p * p; // easeIn
                stackCard1.style.transform = `${baseTransform} translateY(${-eased * 300}px) rotate(${-eased * 5}deg) scale(${1 - eased * 0.1})`;
                stackCard1.style.opacity = 1 - eased;
                stackCard1.style.zIndex = 4;
            } else {
                stackCard1.style.transform = `${baseTransform} translateY(-300px) rotate(-5deg) scale(0.9)`;
                stackCard1.style.opacity = 0;
                stackCard1.style.zIndex = 1;
            }

            // Card 2 (Red) - 카드1 벗겨진 후 보임 → 위로 날아감
            if (scrollProgress < 0.3) {
                stackCard2.style.transform = `${baseTransform} translateY(20px) rotate(2deg) scale(0.95)`;
                stackCard2.style.opacity = 0.7;
                stackCard2.style.zIndex = 3;
            } else if (scrollProgress < 0.55) {
                const p = (scrollProgress - 0.3) / 0.25;
                const eased = p * p;
                stackCard2.style.transform = `${baseTransform} translateY(${20 - eased * 320}px) rotate(${2 - eased * 7}deg) scale(${0.95 + p * 0.05 - eased * 0.1})`;
                stackCard2.style.opacity = 1 - eased;
                stackCard2.style.zIndex = 4;
            } else {
                stackCard2.style.transform = `${baseTransform} translateY(-300px) rotate(-5deg) scale(0.9)`;
                stackCard2.style.opacity = 0;
                stackCard2.style.zIndex = 1;
            }

            // Card 3 (Blue) - 카드2 벗겨진 후 보임 → 위로 날아감
            if (scrollProgress < 0.3) {
                stackCard3.style.transform = `${baseTransform} translateY(40px) rotate(-2deg) scale(0.9)`;
                stackCard3.style.opacity = 0.5;
                stackCard3.style.zIndex = 2;
            } else if (scrollProgress < 0.55) {
                const p = (scrollProgress - 0.3) / 0.25;
                stackCard3.style.transform = `${baseTransform} translateY(${40 - p * 20}px) rotate(${-2 + p * 2}deg) scale(${0.9 + p * 0.05})`;
                stackCard3.style.opacity = 0.5 + p * 0.3;
                stackCard3.style.zIndex = 3;
            } else if (scrollProgress < 0.8) {
                const p = (scrollProgress - 0.55) / 0.25;
                const eased = p * p;
                stackCard3.style.transform = `${baseTransform} translateY(${20 - eased * 320}px) rotate(${0 - eased * 5}deg) scale(${0.95 + p * 0.05 - eased * 0.1})`;
                stackCard3.style.opacity = 1 - eased;
                stackCard3.style.zIndex = 4;
            } else {
                stackCard3.style.transform = `${baseTransform} translateY(-300px) rotate(-5deg) scale(0.9)`;
                stackCard3.style.opacity = 0;
                stackCard3.style.zIndex = 1;
            }

            // Card 4 (Green) - 카드3 벗겨진 후 보임 → 위로 날아감
            if (scrollProgress < 0.3) {
                stackCard4.style.transform = `${baseTransform} translateY(60px) rotate(-3deg) scale(0.85)`;
                stackCard4.style.opacity = 0.3;
                stackCard4.style.zIndex = 1;
            } else if (scrollProgress < 0.55) {
                const p = (scrollProgress - 0.3) / 0.25;
                stackCard4.style.transform = `${baseTransform} translateY(${60 - p * 20}px) rotate(${-3 + p * 3}deg) scale(${0.85 + p * 0.05})`;
                stackCard4.style.opacity = 0.3 + p * 0.2;
                stackCard4.style.zIndex = 2;
            } else if (scrollProgress < 0.8) {
                const p = (scrollProgress - 0.55) / 0.25;
                stackCard4.style.transform = `${baseTransform} translateY(${40 - p * 20}px) rotate(${0 - p * 2}deg) scale(${0.9 + p * 0.05})`;
                stackCard4.style.opacity = 0.5 + p * 0.3;
                stackCard4.style.zIndex = 3;
            } else if (scrollProgress < 0.9) {
                const p = (scrollProgress - 0.8) / 0.1;
                const eased = p * p;
                stackCard4.style.transform = `${baseTransform} translateY(${20 - eased * 320}px) rotate(${-2 - eased * 3}deg) scale(${0.95 + p * 0.05 - eased * 0.1})`;
                stackCard4.style.opacity = 1 - eased;
                stackCard4.style.zIndex = 4;
            } else {
                stackCard4.style.transform = `${baseTransform} translateY(-300px) rotate(-5deg) scale(0.9)`;
                stackCard4.style.opacity = 0;
                stackCard4.style.zIndex = 1;
            }

            // Card 5 (Purple) - 맨 아래, 마지막에 정면으로
            if (scrollProgress < 0.3) {
                stackCard5.style.transform = `${baseTransform} translateY(80px) rotate(2deg) scale(0.8)`;
                stackCard5.style.opacity = 0.2;
                stackCard5.style.zIndex = 0;
            } else if (scrollProgress < 0.55) {
                const p = (scrollProgress - 0.3) / 0.25;
                stackCard5.style.transform = `${baseTransform} translateY(${80 - p * 20}px) rotate(${2 - p * 2}deg) scale(${0.8 + p * 0.05})`;
                stackCard5.style.opacity = 0.2 + p * 0.2;
                stackCard5.style.zIndex = 1;
            } else if (scrollProgress < 0.8) {
                const p = (scrollProgress - 0.55) / 0.25;
                stackCard5.style.transform = `${baseTransform} translateY(${60 - p * 20}px) rotate(${0 - p * 2}deg) scale(${0.85 + p * 0.05})`;
                stackCard5.style.opacity = 0.4 + p * 0.3;
                stackCard5.style.zIndex = 2;
            } else if (scrollProgress < 0.9) {
                const p = (scrollProgress - 0.8) / 0.1;
                stackCard5.style.transform = `${baseTransform} translateY(${40 - p * 20}px) rotate(${-2 + p * 2}deg) scale(${0.9 + p * 0.05})`;
                stackCard5.style.opacity = 0.7 + p * 0.2;
                stackCard5.style.zIndex = 3;
            } else {
                const p = (scrollProgress - 0.9) / 0.1;
                const eased = 1 - Math.pow(1 - p, 3); // easeOut
                stackCard5.style.transform = `${baseTransform} translateY(${20 - eased * 20}px) rotate(${0 - eased * 2}deg) scale(${0.95 + eased * 0.05})`;
                stackCard5.style.opacity = 0.9 + eased * 0.1;
                stackCard5.style.zIndex = 4;
            }
        }

        // ========================================
        // 히어로 섹션 패럴랙스 효과
        // ========================================
        let lastScrollY = 0;
        let heroBackgroundElement = null;
        
        function initHeroParallax() {
            heroBackgroundElement = document.getElementById('heroBackground');
            if (heroBackgroundElement) {
                heroBackgroundElement.style.willChange = 'transform';
                heroBackgroundElement.style.backfaceVisibility = 'hidden';
            }
        }
        
        function updateHeroParallax() {
            if (!heroBackgroundElement) return;
            
            const heroSection = document.getElementById('heroSection');
            if (!heroSection) return;
            
            const rect = heroSection.getBoundingClientRect();
            const scrollY = window.scrollY;
            
            // 히어로 섹션이 뷰포트에 보일 때만 적용
            if (rect.bottom > 0 && rect.top < window.innerHeight) {
                // 배경 이미지만 천천히 위로 이동 (텍스트보다 느리게)
                const backgroundOffset = scrollY * 0.3;
                heroBackgroundElement.style.transform = `translate3d(0, ${backgroundOffset}px, 0)`;
            } else {
                // 뷰포트 밖에 있으면 초기화
                heroBackgroundElement.style.transform = 'translate3d(0, 0, 0)';
            }
        }

        // ========================================
        // 스크롤 이벤트 (고성능 최적화)
        // ========================================
        let ticking = false;
        let rafId = null;

        function handleScroll() {
            if (!ticking) {
                rafId = window.requestAnimationFrame(() => {
                    updateHeroParallax();
                    updateHorizontalScroll();
                    updateStackingCards();
                    ticking = false;
                    rafId = null;
                });
                ticking = true;
            }
        }

        // Passive 이벤트 리스너로 성능 향상
        window.addEventListener('scroll', handleScroll, { passive: true });

        // 초기 실행
        initHeroParallax();
        updateHeroParallax();
        updateHorizontalScroll();
        // 간증 카드는 DOMContentLoaded에서 초기화되므로 여기서는 스크롤 업데이트만
        setTimeout(() => {
            initStackingCards();
            updateStackingCards();
        }, 300);

        // ========================================
        // 즉시 스크롤 (애니메이션 없음, 섹션을 화면 정중앙에 배치)
        // ========================================
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    // 섹션을 화면 정중앙에 배치
                    const targetRect = target.getBoundingClientRect();
                    const targetPosition = targetRect.top + window.pageYOffset;
                    const windowHeight = window.innerHeight;
                    const targetHeight = targetRect.height;
                    
                    // 섹션의 상단이 화면 중앙에 오도록 계산
                    const scrollPosition = targetPosition - (windowHeight / 2) + (targetHeight / 2);
                    
                    window.scrollTo({
                        top: Math.max(0, scrollPosition),
                        behavior: 'auto'
                    });
                }
            });
        });

        // ========================================
        // 카테고리 슬라이더 네비게이션
        // ========================================
        (function initCategorySlider() {
            const sliderTrack = document.getElementById('sliderTrack');
            const sliderPrev = document.getElementById('sliderPrev');
            const sliderNext = document.getElementById('sliderNext');
            const sliderContainer = document.getElementById('categorySlider');
            
            if (!sliderTrack || !sliderPrev || !sliderNext) return;
            
            let isPaused = false;
            let currentPosition = 0;
            // 슬라이드 너비를 CSS와 일치시키기 (40vw = 화면 너비의 40%)
            let slideWidth = window.innerWidth <= 768 
                ? window.innerWidth * 0.8  // 모바일: 80vw
                : window.innerWidth * 0.4; // 데스크톱: 40vw
            const totalSlides = 9; // 실제 슬라이드 개수 (복제 전)
            let animationId = null;
            
            // CSS 애니메이션 일시정지/재개 함수
            function pauseAnimation() {
                if (!isPaused) {
                    sliderTrack.style.animationPlayState = 'paused';
                    isPaused = true;
                }
            }
            
            function resumeAnimation() {
                if (isPaused) {
                    sliderTrack.style.animationPlayState = 'running';
                    isPaused = false;
                }
            }
            
            // 수동 슬라이드 이동 함수
            function slideTo(direction) {
                pauseAnimation();
                
                // 현재 transform 값 가져오기
                const currentTransform = sliderTrack.style.transform || 'translateX(0px)';
                const match = currentTransform.match(/translateX\((-?\d+(?:\.\d+)?)px\)/);
                const currentX = match ? parseFloat(match[1]) : 0;
                
                // 새로운 위치 계산
                const moveDistance = slideWidth;
                const newX = direction === 'next' 
                    ? currentX - moveDistance 
                    : currentX + moveDistance;
                
                // 무한 루프 처리: 절반 지점을 넘으면 처음으로 리셋
                const totalWidth = slideWidth * totalSlides;
                let finalX = newX;
                
                if (Math.abs(newX) >= totalWidth) {
                    finalX = 0;
                } else if (newX > 0) {
                    finalX = -totalWidth + moveDistance;
                }
                
                // 부드러운 이동
                sliderTrack.style.transition = 'transform 0.6s ease-out';
                sliderTrack.style.transform = `translateX(${finalX}px)`;
                
                // 애니메이션 완료 후 CSS 애니메이션 재시작
                setTimeout(() => {
                    sliderTrack.style.transition = '';
                    resumeAnimation();
                }, 600);
            }
            
            // 네비게이션 버튼 이벤트
            sliderPrev.addEventListener('click', () => slideTo('prev'));
            sliderNext.addEventListener('click', () => slideTo('next'));
            
            // 마우스 다운/업으로만 일시정지 (호버는 제거)
            let isMouseDown = false;
            sliderContainer.addEventListener('mousedown', (e) => {
                // 네비게이션 버튼 클릭이 아닐 때만 일시정지
                if (!e.target.closest('.slider-nav-btn')) {
                    isMouseDown = true;
                    pauseAnimation();
                }
            });
            
            sliderContainer.addEventListener('mouseup', () => {
                if (isMouseDown) {
                    isMouseDown = false;
                    resumeAnimation();
                }
            });
            
            // 마우스가 컨테이너 밖으로 나갔을 때도 재개
            sliderContainer.addEventListener('mouseleave', () => {
                if (isMouseDown) {
                    isMouseDown = false;
                    resumeAnimation();
                }
            });
            
            // 터치 스와이프 지원 (모바일)
            let touchStartX = 0;
            let touchEndX = 0;
            let isDragging = false;
            
            sliderContainer.addEventListener('touchstart', (e) => {
                touchStartX = e.touches[0].clientX;
                isDragging = true;
                pauseAnimation();
            }, { passive: true });
            
            sliderContainer.addEventListener('touchmove', (e) => {
                if (!isDragging) return;
                touchEndX = e.touches[0].clientX;
            }, { passive: true });
            
            sliderContainer.addEventListener('touchend', () => {
                if (!isDragging) return;
                
                const swipeDistance = touchStartX - touchEndX;
                const minSwipeDistance = 50;
                
                if (Math.abs(swipeDistance) > minSwipeDistance) {
                    if (swipeDistance > 0) {
                        slideTo('next');
                    } else {
                        slideTo('prev');
                    }
                } else {
                    resumeAnimation();
                }
                
                isDragging = false;
            }, { passive: true });
            
            // 모바일에서 슬라이드 너비 재계산
            function updateSlideWidth() {
                slideWidth = window.innerWidth <= 768 
                    ? window.innerWidth * 0.8  // 모바일: 80vw
                    : window.innerWidth * 0.4;  // 데스크톱: 40vw
            }
            
            window.addEventListener('resize', updateSlideWidth);
            updateSlideWidth(); // 초기 실행
            
            console.log('✅ 카테고리 슬라이더 초기화 완료');
        })();

        console.log('✅ 부천교회 웹사이트 로드 완료');
        console.log('✅ 가로 스크롤 활성화 (400vh)');
        console.log('✅ 스택 카드 애니메이션 활성화 (500vh)');
        
        // ========================================
        // 드롭다운 메뉴
        // ========================================
        function toggleDropdown(event, menuId) {
            event.stopPropagation();
            const menu = document.getElementById(menuId);
            const allMenus = document.querySelectorAll('.nav-dropdown-menu');
            const allButtons = document.querySelectorAll('.nav-dropdown-btn svg');
            
            // 다른 메뉴 닫기
            allMenus.forEach(m => {
                if (m.id !== menuId) {
                    m.style.display = 'none';
                }
            });
            allButtons.forEach(btn => {
                if (btn.closest('.nav-dropdown-btn') !== event.currentTarget) {
                    btn.style.transform = 'rotate(0deg)';
                }
            });
            
            // 현재 메뉴 토글
            if (menu.style.display === 'none' || !menu.style.display) {
                menu.style.display = 'block';
                event.currentTarget.querySelector('svg').style.transform = 'rotate(180deg)';
            } else {
                menu.style.display = 'none';
                event.currentTarget.querySelector('svg').style.transform = 'rotate(0deg)';
            }
        }
        
        // 모바일 햄버거 메뉴 토글
        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            if (menu) {
                menu.classList.toggle('active');
                document.body.style.overflow = menu.classList.contains('active') ? 'hidden' : '';
            }
        }
        
        function closeMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            if (menu) {
                menu.classList.remove('active');
                document.body.style.overflow = '';
            }
        }
        
        // 모바일 메뉴에서 섹션으로 스크롤 (헤더 높이 고려)
        function scrollToSectionMobile(hash) {
            // 메뉴 닫기
            closeMobileMenu();
            
            // 약간의 딜레이 후 스크롤 (메뉴 애니메이션 완료 대기)
            setTimeout(() => {
                const element = document.querySelector(hash);
                if (element) {
                    // 모바일 헤더 높이 (약 50px) + 약간의 여유 공간
                    const headerHeight = 50;
                    const offset = headerHeight;
                    
                    const elementPosition = element.getBoundingClientRect().top + window.pageYOffset;
                    const offsetPosition = elementPosition - offset;
                    
                    window.scrollTo({
                        top: offsetPosition,
                        behavior: 'smooth'
                    });
                }
            }, 100);
        }
        
        function toggleMobileSubmenu(submenuId) {
            const submenu = document.getElementById(submenuId);
            if (submenu) {
                const isHidden = submenu.style.display === 'none' || !submenu.style.display || !submenu.classList.contains('active');
                if (isHidden) {
                    submenu.style.display = 'flex';
                    submenu.classList.add('active');
                } else {
                    submenu.style.display = 'none';
                    submenu.classList.remove('active');
                }
            }
        }
        
        // 외부 클릭 시 드롭다운 닫기
        document.addEventListener('click', function(event) {
            if (!event.target.closest('.nav-dropdown')) {
                document.querySelectorAll('.nav-dropdown-menu').forEach(menu => {
                    menu.style.display = 'none';
                });
                document.querySelectorAll('.nav-dropdown-btn svg').forEach(btn => {
                    btn.style.transform = 'rotate(0deg)';
                });
            }
            
            // 모바일 메뉴 외부 클릭 시 닫기
            const mobileMenu = document.getElementById('mobile-menu');
            const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
            if (mobileMenu && mobileMenu.classList.contains('active')) {
                // 메뉴나 토글 버튼이 아닌 곳을 클릭했을 때
                if (!event.target.closest('#mobile-menu') && !event.target.closest('#mobile-menu-toggle')) {
                    closeMobileMenu();
                }
            }
        });
    </script>


</body>
</html>

